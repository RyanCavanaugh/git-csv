<html><title>TypeScript Daily Report for 11/1/2023</title><link rel="stylesheet" href="./style.css"/><body><div id="main"><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56270"><span class="OPEN">⊚</span> <span class="number-ref">#56270</span></a> Adding parentheses changes the result of type inference</h1><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1786766351"><span title="10/31/2023 1:50:04 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">The original PR that made the non-parenthesized version to work can be found here: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1518133904" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/52091" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/52091/hovercard" href="https://github.com/microsoft/TypeScript/pull/52091">#52091</a></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1787371268"><span title="10/31/2023 7:48:32 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">This is working as intended, though I agree it is a bit surprising. We <em>gramatically</em> check for conditional types of the pattern <code class="notranslate">[X] extends [Y] ? ...</code> (where <code class="notranslate">[X]</code> and <code class="notranslate">[Y]</code> are tuple types of the same arity) and defer their resolution if some of the <code class="notranslate">X</code> or <code class="notranslate">Y</code> elements are generic. This is such that non-distributable conditional types can be written <code class="notranslate">[X] extends [Y] ? ...</code> and be deferred similarly to <code class="notranslate">X extends Y ? ...</code>. We document this behavior <a href="https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#distributive-conditional-types" rel="nofollow">here</a>.</p>
<p dir="auto">We specifically don't first erase parentheses because that is just one of untold number of ways you could write a type that turns out to be a tuple type. The tuple types are in a sense immaterial (when they match on both sides they are effectively erased), but we want the explicit matching brackets on both sides to be the signal that this type is non-distributive.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> added <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="10/31/2023 7:48:42 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1787436423"><span title="10/31/2023 8:20:00 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Won't this mean that running a formatter which removes or adds parens will change behavior?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1787452002"><span title="10/31/2023 8:27:43 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">It does mean that - it happened to me just today when I was playing with this ;p</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1787467454"><span title="10/31/2023 8:35:23 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I feel like unwrapping parens is a good idea exactly for that reason. Formatters frequently unparen or reparen expressions depending on their position and complexity. They won't add or remove other syntax, though, so I don't think we're breaking into the realm of the other ways to make a tuple type by handling it.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Max10240.png?size=40"/>@Max10240</span> <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1788336407"><span title="10/31/2023 8:09:07 PM">19 hours ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">defer their resolution if some of the <code class="notranslate">X</code> or <code class="notranslate">Y</code> elements are generic ...</p>
</blockquote>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export type AddWithInfer&lt;A extends number, B extends number&gt; = [
	IsEqual&lt;A, PositiveInfinity&gt;, IsEqual&lt;A, NegativeInfinity&gt;,
	IsEqual&lt;B, PositiveInfinity&gt;, IsEqual&lt;B, NegativeInfinity&gt;,
] extends infer R extends [boolean, boolean, boolean, boolean]
	? [true, false] extends (infer _ extends ([R[0], R[3]])) // Note: with infer
		? PositiveInfinity
		: 'failed'
	: never;

type AddTest2 = AddWithInfer&lt;PositiveInfinity, PositiveInfinity&gt;; // Infinity, works too!"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">AddWithInfer</span><span class="pl-c1">&lt;</span><span class="pl-smi">A</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-kos">,</span> <span class="pl-smi">B</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
<span class="pl-kos">]</span> <span class="pl-k">extends</span> infer <span class="pl-smi">R</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">]</span>
	? <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">]</span> <span class="pl-k">extends</span> <span class="pl-kos">(</span>infer <span class="pl-smi">_</span> <span class="pl-k">extends</span> <span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-c">// Note: with infer</span>
		? <span class="pl-smi">PositiveInfinity</span>
		: <span class="pl-s">'failed'</span>
	: <span class="pl-smi">never</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">AddTest2</span> <span class="pl-c1">=</span> <span class="pl-smi">AddWithInfer</span><span class="pl-kos">&lt;</span><span class="pl-smi">PositiveInfinity</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span> <span class="pl-c">// Infinity, works too!</span></pre></div>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a> So using "infer" makes it work, because "infer" leads to something like that(<code class="notranslate">defer their resolution</code>), right? 😃</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> assigned <span class="timestamp"><span title="11/1/2023 2:15:32 PM">1 minutes ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> removed <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="11/1/2023 2:16:17 PM">0 minutes ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56271"><span class="OPEN">∏</span> <span class="number-ref">#56271</span></a> Defer conditional types with parenthesized multi-element tuple types in `extends` clause</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/31/2023 1:50:26 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/pull/56271#issuecomment-1787377509"><span title="10/31/2023 7:51:44 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">As per my comments <a href="https://github.com/microsoft/TypeScript/issues/56270#issuecomment-1787371268" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56270/hovercard">here</a> I don't think we want this to change.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> closed <span class="timestamp"><span title="10/31/2023 7:52:19 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/pull/56271#issuecomment-1787651823"><span title="10/31/2023 10:19:50 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Reopening on <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>’s request</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> reopened <span class="timestamp"><span title="10/31/2023 10:19:50 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56271#issuecomment-1789654714"><span title="11/1/2023 1:46:32 PM">30 minutes ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> pack this</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56271#issuecomment-1789654804"><span title="11/1/2023 1:46:37 PM">30 minutes ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>, I've started to run the tarball bundle task on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/ec113c046f63a77e8b93e41e5f72328177c088d7/hovercard" href="https://github.com/microsoft/TypeScript/commit/ec113c046f63a77e8b93e41e5f72328177c088d7"><tt>ec113c0</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158427" rel="nofollow">here</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56271#issuecomment-1789659840"><span title="11/1/2023 1:48:52 PM">27 minutes ago</span></a></span><div class="comment-body"><p dir="auto">Hey <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>, I've packed this into <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158427/artifacts?artifactName=tgz&amp;fileId=3F0CBC6645E4050DB9EB24473D159E55AE9EC546D964A9872D9BE8BC0677FB1802&amp;fileName=/typescript-5.3.0-insiders.20231101.tgz" rel="nofollow">an installable tgz</a>. You can install it for testing by referencing it in your <code class="notranslate">package.json</code> like so:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{
    &quot;devDependencies&quot;: {
        &quot;typescript&quot;: &quot;https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158427/artifacts?artifactName=tgz&amp;fileId=3F0CBC6645E4050DB9EB24473D159E55AE9EC546D964A9872D9BE8BC0677FB1802&amp;fileName=/typescript-5.3.0-insiders.20231101.tgz&quot;
    }
}"><pre class="notranslate"><code class="notranslate">{
    "devDependencies": {
        "typescript": "https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158427/artifacts?artifactName=tgz&amp;fileId=3F0CBC6645E4050DB9EB24473D159E55AE9EC546D964A9872D9BE8BC0677FB1802&amp;fileName=/typescript-5.3.0-insiders.20231101.tgz"
    }
}
</code></pre></div>
<p dir="auto">and then running <code class="notranslate">npm install</code>.</p>
<hr>
<p dir="auto">There is also a playground <a href="https://www.staging-typescript.org/play?ts=5.3.0-pr-56271-4" rel="nofollow">for this build</a> and an <a href="https://www.npmjs.com/package/@typescript-deploys/pr-build/v/5.3.0-pr-56271-4" rel="nofollow">npm</a> module you can use via <code class="notranslate">"typescript": "npm:@typescript-deploys/pr-build@5.3.0-pr-56271-4"</code>.;</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/52708"><span class="OPEN">⊚</span> <span class="number-ref">#52708</span></a> Duplicate auto-import completions when ATA transitively installs a different version of something installed locally</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#f0db4f;color:black;">Domain: JavaScript</span><span class="label" style="background-color:#61a8f4;color:black;">Domain: Auto-import</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> milestoned <span class="timestamp"><span title="2/9/2023 11:52:04 AM">on 2/9/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <span title="11/1/2023 11:56:25 AM">3 hours ago</span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> milestoned <span class="timestamp"><span title="11/1/2023 11:56:25 AM">3 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56143"><span class="OPEN">⊚</span> <span class="number-ref">#56143</span></a> No error when using arrow function as right operand of `instanceof`</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56143#issuecomment-1779543682"><span title="10/25/2023 8:31:55 AM">on 10/25/2023</span></a></span><div class="comment-body"><p dir="auto">I guess the problem is that <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1958229776" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56197" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56197/hovercard" href="https://github.com/microsoft/TypeScript/pull/56197">#56197</a> <em>only</em> fixes this when we can see the value declaration of the expression's type. For cases like</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const obj1: () =&gt; void = function f() { }
const obj2: () =&gt; void = () =&gt; { }

{} instanceof obj1;
{} instanceof obj2;"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-en">obj1</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-c1">=</span> <span class="pl-k">function</span> <span class="pl-en">f</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-kos">}</span>
<span class="pl-k">const</span> <span class="pl-en">obj2</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span> <span class="pl-kos">}</span>

<span class="pl-kos">{</span><span class="pl-kos">}</span> <span class="pl-k">instanceof</span> <span class="pl-s1">obj1</span><span class="pl-kos">;</span>
<span class="pl-kos">{</span><span class="pl-kos">}</span> <span class="pl-k">instanceof</span> <span class="pl-s1">obj2</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">There's nothing distinguishing the bottom two lines from the type system's perspective</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/JoshuaKGoldberg.png?size=40"/>@JoshuaKGoldberg</span> <a href="https://github.com/microsoft/TypeScript/issues/56143#issuecomment-1788214786"><span title="10/31/2023 5:26:22 PM">21 hours ago</span></a></span><div class="comment-body"><p dir="auto">Perhaps it'd make sense to add an understanding of that to the system? Help it differentiate between arrow functions and the other kinds?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56143#issuecomment-1789345845"><span title="11/1/2023 10:16:58 AM">4 hours ago</span></a></span><div class="comment-body"><p dir="auto">I think it's a hard sell, since it creates the possible mistake of people accidently <em>requiring</em> a function-with-a-prototype when they don't actually care (which is by far the common case).</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/JoshuaKGoldberg.png?size=40"/>@JoshuaKGoldberg</span> <a href="https://github.com/microsoft/TypeScript/issues/56143#issuecomment-1789406971"><span title="11/1/2023 10:58:31 AM">4 hours ago</span></a></span><div class="comment-body"><p dir="auto">Hmm, yeah. I started going through the process of filing an issue asking that the info be stored on the <code class="notranslate">ts.Type</code>. But even more so than <code class="notranslate">{ (): ... }</code> vs <code class="notranslate">() =&gt; ...</code>, +1 that the possible mistake probability is high... ah well.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56286"><span class="OPEN">⊚</span> <span class="number-ref">#56286</span></a> Introduce Class or Constructor utility type</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56286#issuecomment-1789395779"><span title="11/1/2023 10:50:17 AM">4 hours ago</span></a></span><div class="comment-body"><p dir="auto">The team decided against adding more utility types, unless they're needed for emit purposes. There's even a PR that will add "not a request for a utility type" to the viability checklist: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1897221132" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/55746" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/55746/hovercard" href="https://github.com/microsoft/TypeScript/pull/55746">#55746</a></p>
<p dir="auto">And of course there's already <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="358419750" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/26990" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/26990/hovercard" href="https://github.com/microsoft/TypeScript/issues/26990">#26990</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1729083969" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/54428" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/54428/hovercard" href="https://github.com/microsoft/TypeScript/issues/54428">#54428</a>, <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="276721634" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/20256" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/20256/hovercard" href="https://github.com/microsoft/TypeScript/issues/20256">#20256</a> and many more. Used search terms: <code class="notranslate">constructor type in:title</code></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span><span class="reaction-group"><span class="emoji">😆</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span> <span class="timestamp"><span title="11/1/2023 11:57:58 AM">3 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56100"><span class="OPEN">∏</span> <span class="number-ref">#56100</span></a> Emit declarations using alias chains</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">❤️</span><span class="count">2</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> assigned <span class="timestamp"><span title="11/1/2023 6:32:16 AM">8 hours ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="11/1/2023 9:02:31 AM">6 hours ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/weswigham.png?size=40"/>@weswigham</span> <a href="https://github.com/microsoft/TypeScript/pull/56100#issuecomment-1789363687"><span title="11/1/2023 10:28:59 AM">4 hours ago</span></a></span><div class="comment-body"><p dir="auto">Obligatory: Is there a linked issue?</p>
<p dir="auto">AFAIK this is sensible, but probably expensive - <code class="notranslate">getAliasForSymbolInContainer</code> is already costly, since it's an exhaustive traversal of all symbols in scope looking for aliases that refer to the target symbol - making it recursive is going to increase the worst case cost exponentially without some very smart caching. And, perhaps moreover, <code class="notranslate">getAliasForSymbolInContainer</code> is basically just a duplicated tiny slice of the inner loop of <code class="notranslate">getAccessibleSymbolChain</code> without all the recursion, safety, or caching rigamarole, to try and prevent the need for the (still expensive) <code class="notranslate">getAccessibleSymbolChain</code> call. By making it return a chain like this, isn't it basically just a copy of <code class="notranslate">getAccessibleSymbolChain</code> that preferences aliases, without all the aforementioned safety valves? Maybe it'd just be better to modify the <code class="notranslate">useExternalAliasingOnly</code> parameter into an alias-preference-flags parameter so <code class="notranslate">getAccessibleSymbolChain</code> is suitable for use here directly?</p>
<p dir="auto">I say that, but I'm also actively working on a replacement for <code class="notranslate">getAccessibleSymbolChain</code> itself that's a bit less.... bad. Exhaustive scope traversal on lookup is not a good thing (there are many scopes with many symbols), and I'd like to remove it; while we don't have the perf numbers for it, <code class="notranslate">getAccessibleSymbolChain</code> has basically organically grown in function since TS 1.8 or earlier, making it the oldest part of the declaration emit pipeline that's never seen a major refactor, and its' implementation is pretty unoptimized (but with 5+ years of edge cases written into it, hgggg) - it's come up as a hotspot in specific examples multiple times in the past, but we've always worked around the issue by adding limiters higher up in the declaration emit or checking process.</p>
<p dir="auto">I'd also say "we want to check the perf on this, at least", but declaration emit performance is still a bit of a blind spot in our perf suite. It's usually only lightly exercised by the error messages generated by the perf tests. 😭</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56279"><span class="OPEN">⊚</span> <span class="number-ref">#56279</span></a> Project References Wildcards</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556b75;">In Discussion</span> <span class="timestamp"><span title="10/31/2023 2:01:20 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1788303592"><span title="10/31/2023 7:30:25 PM">19 hours ago</span></a></span><div class="comment-body"><p dir="auto">Projects must be acyclic; how would that work if one globs over every project in the dependencies of every project?</p>
<p dir="auto">Even if cycles were legal, it seems like a bad idea to allow configuration that makes it easy for every project to depend on every other project; at that point it's back to a monolith that all has to be recompiled. Though, I suppose with the potential for alternative config options, at least.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jonaskello.png?size=40"/>@jonaskello</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1788523115"><span title="11/1/2023 12:20:52 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">I would agree with <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>. If you want to build only <code class="notranslate">app-2</code> and it's related <code class="notranslate">libs</code> then it would not be possible since everything is referencing everything else. In the small example this may not be a problem but if you have 10 apps and &gt;100 libs it will.</p>
<p dir="auto">If you ware using pnpm/yarn/npm workspaces you still need to specify the exact dependencies in <code class="notranslate">package.json</code> and then having the references in <code class="notranslate">tsconfig.json</code> becomes a non-issue becuase you can use a tool like <a href="https://www.npmjs.com/package/@monorepo-utils/workspaces-to-typescript-project-references" rel="nofollow">workspaces-to-typescript-project-references</a> to automatically fill the references from <code class="notranslate">package.json</code> into <code class="notranslate">tsconfig.json</code>.</p>
<p dir="auto">I would of course be nice if this functionality was built into <code class="notranslate">tsc</code> with something like <code class="notranslate">tsc --sync-refs</code> :-).</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1788535326"><span title="11/1/2023 12:34:31 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">I'll note that if you're using declaration maps and a package manager with monorepo support (with explicit deps), it may be entirely possible to not use references at all, and just build each project individually. There are downsides, of course, but at that point with say pnpm's dependency aware script running, you're basically just using packages as they'd be viewed when published (but locally).</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jonaskello.png?size=40"/>@jonaskello</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1788555263"><span title="11/1/2023 12:56:13 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">Yes, in this small example building each package separately may be feasible. However having to restart <code class="notranslate">tsc</code> many times is really slow if you have many apps/libs. You may also take a look at <a href="https://nx.dev/showcase/benchmarks/tsc-batch-mode" rel="nofollow">nx batch mode</a> to see the difference. From what I understand that also builds the tsconfig refs dynamically.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/eabrouwer3.png?size=40"/>@eabrouwer3</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789218645"><span title="11/1/2023 9:00:08 AM">6 hours ago</span></a></span><div class="comment-body"><p dir="auto">You guys all make great points. What if we had one of the following options to reduce the repetitiveness?</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;extends&quot;: [&quot;../../../tsconfig.base.json&quot;],
  &quot;references&quot;: &quot;inherit&quot;"><pre class="notranslate">{
  <span class="pl-ent">"extends"</span>: [<span class="pl-s"><span class="pl-pds">"</span>../../../tsconfig.base.json<span class="pl-pds">"</span></span>],
  <span class="pl-ent">"references"</span>: <span class="pl-s"><span class="pl-pds">"</span>inherit<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">^^ This leads to the same problems you're all talking about, but it might be nice to have the option to inherit. Especially in cases where (in my project) I have a <code class="notranslate">tsconfig.json</code> and a <code class="notranslate">tsconfig.build.json</code> where I have to specify all of the references in both places.</p>
<p dir="auto">The other option would be basically a shorthand for the <code class="notranslate">"references"</code> key, so you don't have to specify an object with "path" every time if you don't need to specify any other options.</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;extends&quot;: &quot;../../../tsconfig.base.json&quot;,
  &quot;references&quot;: [&quot;../../libs/lib-1&quot;, &quot;../../libs/lib-2&quot;, ...]
}"><pre class="notranslate">{
  <span class="pl-ent">"extends"</span>: <span class="pl-s"><span class="pl-pds">"</span>../../../tsconfig.base.json<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"references"</span>: [<span class="pl-s"><span class="pl-pds">"</span>../../libs/lib-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>../../libs/lib-2<span class="pl-pds">"</span></span>, <span class="pl-ii">...</span>]
}</pre></div>
<p dir="auto">But we could make it a dual typed field. It's an array of either string, or an options object with <code class="notranslate">"path"</code> and the other options. That at least cuts down how big the repetition is.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789227016"><span title="11/1/2023 9:05:18 AM">6 hours ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I have a <code class="notranslate">tsconfig.json</code> and a <code class="notranslate">tsconfig.build.json</code> where I have to specify all of the references in both places.</p>
</blockquote>
<p dir="auto">What in what situation do you need both of these? I can only think of a situation where you have a tsconfig to load <em>all</em> workspace code to avoid project reference overhead, but that only helps when you have a significantly large number of packages.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/eabrouwer3.png?size=40"/>@eabrouwer3</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789229326"><span title="11/1/2023 9:06:43 AM">6 hours ago</span></a></span><div class="comment-body"><p dir="auto"><code class="notranslate">tsconfig.json</code> compiles everything, including my test files. <code class="notranslate">tsconfig.build.json</code> excludes all test files and anything else like a db seed file or whatever that I don't want included in the production build. I feel like this pattern is fairly common, as in I've seen it around in a number of places, but maybe I've been misguided.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789236597"><span title="11/1/2023 9:10:23 AM">6 hours ago</span></a></span><div class="comment-body"><p dir="auto">I have personally more often seen tests in separate projects (what we do in TS, dt-tools), or one project that always builds tests with exclusions elsewhere (e.g., npmignore, what I do in my packages). But, I of course have my own narrow lens.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789300340"><span title="11/1/2023 9:47:58 AM">5 hours ago</span></a></span><div class="comment-body"><p dir="auto">My thinking was that this is useful (only) for the top-level "solution" tsconfig</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="tsconfig.json &lt;- specifies references: packages/*
packages/
  foo/
    tsconfig.json
  bar/
    tsconfig.json"><pre class="notranslate"><code class="notranslate">tsconfig.json &lt;- specifies references: packages/*
packages/
  foo/
    tsconfig.json
  bar/
    tsconfig.json
</code></pre></div>
<p dir="auto">so that you don't have to list out all the <code class="notranslate">package/</code> subdirs individually</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jonaskello.png?size=40"/>@jonaskello</span> <a href="https://github.com/microsoft/TypeScript/issues/56279#issuecomment-1789306768"><span title="11/1/2023 9:52:24 AM">5 hours ago</span></a></span><div class="comment-body"><p dir="auto">We co-locate the tests with the other code which I think is quite common in the javascript community. If you change the  application code you may break the compile of the test code and vice versa so IMO it does not make sense to compile them separately.</p>
<p dir="auto">It does make sense to not distribute the test files in production builds, but I see compile and distribution are separate things. However as mentioned all these points are personal preferences.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/55880"><span class="OPEN">∏</span> <span class="number-ref">#55880</span></a> Array subtypes inherit special array variance</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/55880#issuecomment-1736459541"><span title="9/26/2023 5:01:57 PM">on 9/26/2023</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a> Here are the results of running the top-repos suite comparing <code class="notranslate">main</code> and <code class="notranslate">refs/pull/55880/merge</code>:</p>
<p dir="auto">Everything looks good!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> assigned <span class="timestamp"><span title="10/27/2023 3:11:23 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="11/1/2023 9:03:12 AM">6 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56284"><span class="CLOSED">⊚</span> <span class="number-ref">#56284</span></a> The problem with Omit utility type</h1><span class="label" style="background-color:#CCCCCC;color:black;">Unactionable</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56284#issuecomment-1788606053"><span title="11/1/2023 1:43:28 AM">13 hours ago</span></a></span><div class="comment-body"><blockquote>
<h3 dir="auto">🔍 Search Terms</h3>
<p dir="auto">When we use <strong>Omit utility type</strong> we don't get auto-completion like we have in pick.</p>
</blockquote>
<p dir="auto">Try using keywords as search terms, then you might have better luck finding the duplicates.</p>
<hr>
<p dir="auto">You didn't fill out the issue template, so it's unclear what you're actually suggesting. Under "Suggestion" you just wrote "I created my own type", nothing more.</p>
<p dir="auto">If you're suggesting to change <code class="notranslate">Omit&lt;&gt;</code> to use <code class="notranslate">keyof T</code>, then it's a duplicate of <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="430786288" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/30825" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/30825/hovercard" href="https://github.com/microsoft/TypeScript/issues/30825">#30825</a> (and many many others). If you're suggesting to add the <code class="notranslate">OmitKeys&lt;&gt;</code> type to the standard library, then it's out of scope as the team decided to not add further utility types unless they're needed for emit purposes (see <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1897221132" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/55746" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/55746/hovercard" href="https://github.com/microsoft/TypeScript/pull/55746">#55746</a>).</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fatcerberus.png?size=40"/>@fatcerberus</span> <a href="https://github.com/microsoft/TypeScript/issues/56284#issuecomment-1789070194"><span title="11/1/2023 7:36:06 AM">7 hours ago</span></a></span><div class="comment-body"><p dir="auto">Also see <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1732749888" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/54451" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/54451/hovercard" href="https://github.com/microsoft/TypeScript/issues/54451">#54451</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#CCCCCC;color:black;">Unactionable</span> <span class="timestamp"><span title="11/1/2023 9:38:44 AM">5 hours ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56284#issuecomment-1789287318"><span title="11/1/2023 9:39:35 AM">5 hours ago</span></a></span><div class="comment-body"><p dir="auto">Duplicate <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1947366128" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56135" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56135/hovercard" href="https://github.com/microsoft/TypeScript/issues/56135">#56135</a>? But it's hard to tell what you want here without filling out the template more concretely.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> closed <span class="timestamp"><span title="11/1/2023 9:39:35 AM">5 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56280"><span class="OPEN">∏</span> <span class="number-ref">#56280</span></a> Only call `getLowerBoundOfKeyType` on non-generic mapped types</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="10/31/2023 2:48:33 PM">1 day ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788085072"><span title="10/31/2023 2:49:25 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> test top100<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> user test this<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> run dt<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> perf test this faster</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788085124"><span title="10/31/2023 2:49:27 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>, I've started to run the tsc-only perf test suite on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23/hovercard" href="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23"><tt>f027fc7</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158420" rel="nofollow">here</a>.</p>
<p dir="auto">Update: <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788098064" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56280/hovercard">The results are in!</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788085126"><span title="10/31/2023 2:49:27 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>, I've started to run the parallelized Definitely Typed test suite on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23/hovercard" href="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23"><tt>f027fc7</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158417" rel="nofollow">here</a>.</p>
<p dir="auto">Update: <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788132966" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56280/hovercard">The results are in!</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788085127"><span title="10/31/2023 2:49:27 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>, I've started to run the diff-based top-repos suite on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23/hovercard" href="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23"><tt>f027fc7</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158418" rel="nofollow">here</a>.</p>
<p dir="auto">Update: <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788137888" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56280/hovercard">The results are in!</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788085129"><span title="10/31/2023 2:49:27 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>, I've started to run the diff-based user code test suite on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23/hovercard" href="https://github.com/microsoft/TypeScript/commit/f027fc71af5084399082222675803227ee4c5b23"><tt>f027fc7</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158419" rel="nofollow">here</a>.</p>
<p dir="auto">Update: <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788100373" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56280/hovercard">The results are in!</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788098064"><span title="10/31/2023 3:01:52 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a><br>
The results of the perf run you requested are in!</p>
<details><summary> Here they are:</summary><p dir="auto">
</p><h2 dir="auto">Compiler</h2>
<b>Comparison Report - baseline..pr</b>
<table border="0" cellpadding="0" cellspacing="0" role="table">
<thead>
<tr>
<th align="left"><sub>Metric</sub></th>
<th align="right"><sub>baseline</sub></th>
<th align="right"><sub>pr</sub></th>
<th align="right"><sub>Delta</sub></th>
<th align="right"><sub>Best</sub></th>
<th align="right"><sub>Worst</sub></th>
<th align="right"><sub>p-value</sub></th>
</tr>
</thead>
<tbody><tr><th align="left" colspan="7"><sub>Angular - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>295,154k (± 0.02%)</sub></td>
<td align="right"><sub>295,117k (± 0.02%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>295,057k</sub></td>
<td align="right"><sub>295,180k</sub></td>
<td align="right"><sub>p=0.298 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.64s (± 0.31%)</sub></td>
<td align="right"><sub>2.62s (± 0.45%)</sub></td>
<td align="right"><sub>-0.02s (- 0.70%)</sub></td>
<td align="right"><sub>2.61s</sub></td>
<td align="right"><sub>2.64s</sub></td>
<td align="right"><sub>p=0.024 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.84s (± 0.97%)</sub></td>
<td align="right"><sub>0.84s (± 0.89%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.83s</sub></td>
<td align="right"><sub>0.85s</sub></td>
<td align="right"><sub>p=0.306 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>8.04s (± 0.31%)</sub></td>
<td align="right"><sub>8.03s (± 0.29%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>8.00s</sub></td>
<td align="right"><sub>8.06s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>7.08s (± 0.34%)</sub></td>
<td align="right"><sub>7.08s (± 0.36%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>7.05s</sub></td>
<td align="right"><sub>7.11s</sub></td>
<td align="right"><sub>p=0.872 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>18.59s (± 0.18%)</sub></td>
<td align="right"><sub>18.58s (± 0.11%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>18.56s</sub></td>
<td align="right"><sub>18.61s</sub></td>
<td align="right"><sub>p=0.257 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>Compiler-Unions - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>193,067k (± 1.48%)</sub></td>
<td align="right"><sub>193,095k (± 1.50%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>190,684k</sub></td>
<td align="right"><sub>196,747k</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>1.35s (± 0.56%)</sub></td>
<td align="right"><sub>1.35s (± 0.38%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1.35s</sub></td>
<td align="right"><sub>1.36s</sub></td>
<td align="right"><sub>p=0.784 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.73s (± 0.56%)</sub></td>
<td align="right"><sub>0.73s (± 0.56%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.73s</sub></td>
<td align="right"><sub>0.74s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>9.15s (± 0.26%)</sub></td>
<td align="right"><sub>9.17s (± 0.50%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>9.13s</sub></td>
<td align="right"><sub>9.25s</sub></td>
<td align="right"><sub>p=0.681 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>2.63s (± 0.63%)</sub></td>
<td align="right"><sub>2.62s (± 0.46%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.61s</sub></td>
<td align="right"><sub>2.64s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>13.86s (± 0.12%)</sub></td>
<td align="right"><sub>13.88s (± 0.30%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>13.84s</sub></td>
<td align="right"><sub>13.95s</sub></td>
<td align="right"><sub>p=0.513 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>Monaco - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>347,345k (± 0.00%)</sub></td>
<td align="right"><sub>347,372k (± 0.01%)</sub></td>
<td align="right"><sub>+27k (+ 0.01%)</sub></td>
<td align="right"><sub>347,353k</sub></td>
<td align="right"><sub>347,401k</sub></td>
<td align="right"><sub>p=0.037 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.46s (± 0.49%)</sub></td>
<td align="right"><sub>2.46s (± 0.88%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.42s</sub></td>
<td align="right"><sub>2.48s</sub></td>
<td align="right"><sub>p=0.803 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.94s (± 0.43%)</sub></td>
<td align="right"><sub>0.94s (± 0.55%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.93s</sub></td>
<td align="right"><sub>0.94s</sub></td>
<td align="right"><sub>p=0.595 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>6.95s (± 0.65%)</sub></td>
<td align="right"><sub>6.93s (± 0.38%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>6.90s</sub></td>
<td align="right"><sub>6.97s</sub></td>
<td align="right"><sub>p=0.375 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>4.03s (± 0.24%)</sub></td>
<td align="right"><sub>4.04s (± 0.49%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>4.01s</sub></td>
<td align="right"><sub>4.06s</sub></td>
<td align="right"><sub>p=0.454 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>14.38s (± 0.23%)</sub></td>
<td align="right"><sub>14.36s (± 0.38%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>14.29s</sub></td>
<td align="right"><sub>14.44s</sub></td>
<td align="right"><sub>p=0.629 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>TFS - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>302,590k (± 0.01%)</sub></td>
<td align="right"><sub>302,614k (± 0.02%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>302,569k</sub></td>
<td align="right"><sub>302,670k</sub></td>
<td align="right"><sub>p=0.297 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>1.99s (± 0.95%)</sub></td>
<td align="right"><sub>1.99s (± 1.13%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1.96s</sub></td>
<td align="right"><sub>2.03s</sub></td>
<td align="right"><sub>p=0.868 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>1.01s (± 1.02%)</sub></td>
<td align="right"><sub>1.00s (± 0.75%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.99s</sub></td>
<td align="right"><sub>1.01s</sub></td>
<td align="right"><sub>p=0.063 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>6.25s (± 0.37%)</sub></td>
<td align="right"><sub>6.27s (± 0.41%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>6.24s</sub></td>
<td align="right"><sub>6.31s</sub></td>
<td align="right"><sub>p=0.106 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>3.56s (± 0.66%)</sub></td>
<td align="right"><sub>3.57s (± 0.49%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>3.55s</sub></td>
<td align="right"><sub>3.60s</sub></td>
<td align="right"><sub>p=0.331 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>12.81s (± 0.35%)</sub></td>
<td align="right"><sub>12.84s (± 0.17%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>12.81s</sub></td>
<td align="right"><sub>12.87s</sub></td>
<td align="right"><sub>p=0.196 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>material-ui - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>470,529k (± 0.01%)</sub></td>
<td align="right"><sub>470,546k (± 0.01%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>470,490k</sub></td>
<td align="right"><sub>470,576k</sub></td>
<td align="right"><sub>p=0.298 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.57s (± 0.47%)</sub></td>
<td align="right"><sub>2.57s (± 1.01%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.54s</sub></td>
<td align="right"><sub>2.61s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.98s (± 1.06%)</sub></td>
<td align="right"><sub>0.99s (± 0.99%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.98s</sub></td>
<td align="right"><sub>1.00s</sub></td>
<td align="right"><sub>p=0.315 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>16.69s (± 0.43%)</sub></td>
<td align="right"><sub>16.63s (± 0.57%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>16.50s</sub></td>
<td align="right"><sub>16.72s</sub></td>
<td align="right"><sub>p=0.336 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>0.00s (± 0.00%)</sub></td>
<td align="right"><sub>0.00s (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.00s</sub></td>
<td align="right"><sub>0.00s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>20.25s (± 0.38%)</sub></td>
<td align="right"><sub>20.20s (± 0.54%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>20.05s</sub></td>
<td align="right"><sub>20.31s</sub></td>
<td align="right"><sub>p=0.520 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>xstate - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>512,694k (± 0.01%)</sub></td>
<td align="right"><sub>512,674k (± 0.02%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>512,573k</sub></td>
<td align="right"><sub>512,767k</sub></td>
<td align="right"><sub>p=0.936 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>3.27s (± 0.12%)</sub></td>
<td align="right"><sub>3.27s (± 0.42%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>3.25s</sub></td>
<td align="right"><sub>3.29s</sub></td>
<td align="right"><sub>p=0.257 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>1.55s (± 0.41%)</sub></td>
<td align="right"><sub>1.54s (± 0.35%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1.54s</sub></td>
<td align="right"><sub>1.55s</sub></td>
<td align="right"><sub>p=0.201 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>2.85s (± 0.59%)</sub></td>
<td align="right"><sub>2.84s (± 0.62%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.81s</sub></td>
<td align="right"><sub>2.86s</sub></td>
<td align="right"><sub>p=0.331 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>0.08s (± 4.99%)</sub></td>
<td align="right"><sub>0.08s (± 5.21%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.07s</sub></td>
<td align="right"><sub>0.08s</sub></td>
<td align="right"><sub>p=0.218 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>7.75s (± 0.19%)</sub></td>
<td align="right"><sub>7.73s (± 0.30%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>7.70s</sub></td>
<td align="right"><sub>7.76s</sub></td>
<td align="right"><sub>p=0.165 n=6</sub></td>
</tr>
</tbody>
</table>
<div dir="auto">
<b>System info unknown</b>
</div>
<div dir="auto">
<b>Hosts</b>
<ul dir="auto">
<li>node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<b>Scenarios</b>
<ul dir="auto">
<li>Angular - node (v18.15.0, x64)</li>
<li>Compiler-Unions - node (v18.15.0, x64)</li>
<li>Monaco - node (v18.15.0, x64)</li>
<li>TFS - node (v18.15.0, x64)</li>
<li>material-ui - node (v18.15.0, x64)</li>
<li>xstate - node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<table cellspacing="0" cellpadding="0" border="0" role="table">
<tbody><tr>
<th align="left"><sub>Benchmark</sub></th>
<th align="left"><sub>Name</sub></th>
<th align="left"><sub>Iterations</sub></th>
</tr>
<tr>
<td><sub>Current</sub></td>
<td><sub>pr</sub></td>
<td><sub>6</sub></td>
</tr>
<tr>
<td><sub>Baseline</sub></td>
<td><sub>baseline</sub></td>
<td><sub>6</sub></td>
</tr>
</tbody></table>
</div>
<p dir="auto"></p>
<details><summary>Developer Information:</summary><p dir="auto"><a href="https://typescript.visualstudio.com/TypeScript/_build/results?buildId=158420&amp;view=artifacts" rel="nofollow">Download Benchmarks</a></p></details>
</details></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788100373"><span title="10/31/2023 3:04:14 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a> Here are the results of running the user test suite comparing <code class="notranslate">main</code> and <code class="notranslate">refs/pull/56280/merge</code>:</p>
<p dir="auto">There were infrastructure failures potentially unrelated to your change:</p>
<ul dir="auto">
<li>3 instances of "Package install failed"</li>
</ul>
<p dir="auto">Otherwise...</p>
<p dir="auto">Everything looks good!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788132966"><span title="10/31/2023 3:41:03 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto">Hey <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>, the results of running the DT tests are ready.<br>
Everything looks the same!<br>
<a href="https://typescript.visualstudio.com/TypeScript/_build/index?buildId=158417&amp;_a=summary" rel="nofollow">You can check the log here</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788137888"><span title="10/31/2023 3:46:47 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a> Here are the results of running the top-repos suite comparing <code class="notranslate">main</code> and <code class="notranslate">refs/pull/56280/merge</code>:</p>
<p dir="auto">Everything looks good!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/pull/56280#issuecomment-1788989489"><span title="11/1/2023 6:49:06 AM">8 hours ago</span></a></span><div class="comment-body"><p dir="auto">Tests and performance all look good.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/55941"><span class="OPEN">∏</span> <span class="number-ref">#55941</span></a> Fixed an issue with reverse mapped types inference when single type variable is left after inferring from matching types</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="11/1/2023 6:22:40 AM">8 hours ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> assigned <span class="timestamp"><span title="11/1/2023 6:29:47 AM">8 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/17510"><span class="CLOSED">⊚</span> <span class="number-ref">#17510</span></a> No signature help description when JSDoc appears on variable declarations instead of signatures</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#3178c6;">Help Wanted</span><span class="label" style="background-color:#207de5;">Effort: Moderate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="3/7/2019 1:42:30 PM">on 3/7/2019</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Alphapage.png?size=40"/>@Alphapage</span> closed <span class="timestamp"><span title="11/1/2023 2:24:30 AM">12 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56283"><span class="OPEN">⊚</span> <span class="number-ref">#56283</span></a> Typescript development problem: Is specialized knowledge required to solve fourslash errors?</h1><span class="label" style="background-color:#d4c5f9;color:black;">Question</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56283#issuecomment-1788530535"><span title="11/1/2023 12:29:25 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">If you read the test case, you'll see it mention <code class="notranslate">globalTypesPlus</code>, which depends on </p><div class="Box Box--condensed my-2">
  <div class="Box-header f6">
    <p class="mb-0 text-bold">
      <a href="https://github.com/microsoft/TypeScript/blob/73bc0eba5fd35c3a31cc9a4e6d28d3e89564ce6f/src/harness/fourslashInterfaceImpl.ts#L1108">TypeScript/src/harness/fourslashInterfaceImpl.ts</a>
    </p>
    <p class="mb-0 color-fg-muted">
         Line 1108
      in
      <a data-pjax="true" class="commit-tease-sha Link--inTextBlock" href="/microsoft/TypeScript/commit/73bc0eba5fd35c3a31cc9a4e6d28d3e89564ce6f">73bc0eb</a>
    </p>
  </div>
  <div itemprop="text" class="Box-body p-0 blob-wrapper blob-wrapper-embedded data">
    <table class="highlight tab-size mb-0 js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">

        <tbody><tr class="border-0">
          <td id="L1108" class="blob-num border-0 px-3 py-0 color-bg-default" data-line-number="1108"></td>
          <td id="LC1108" class="blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line"> <span class="pl-k">const</span> <span class="pl-s1">globalTypeDecls</span>: <span class="pl-k">readonly</span> <span class="pl-smi">ExpectedCompletionEntryObject</span><span class="pl-kos">[</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span> </td>
        </tr>
    </tbody></table>
  </div>
</div>
 and would need to be updated. Most (nearly all) PRs do not modify the globals in such a way that this hardcoded list changes.<p></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56283#issuecomment-1788531977"><span title="11/1/2023 12:30:57 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">However, needing to modify this may indicate that something is wrong with the PR (which I have not read; I am not sure anything has changed to make <code class="notranslate">filter(Boolean)</code> any more acceptable than before).</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#d4c5f9;color:black;">Question</span> <span class="timestamp"><span title="11/1/2023 9:38:16 AM">5 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56274"><span class="OPEN">∏</span> <span class="number-ref">#56274</span></a> [Reference] feat: switched Node to a discriminated union</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/31/2023 8:13:17 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Jack-Works.png?size=40"/>@Jack-Works</span> <a href="https://github.com/microsoft/TypeScript/pull/56274#issuecomment-1788519649"><span title="11/1/2023 12:16:52 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">If you're interested, we have discussed this in the engine262 repo. <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1779877150" data-permission-text="Title is private" data-url="https://github.com/engine262/engine262/issues/215" data-hovercard-type="pull_request" data-hovercard-url="/engine262/engine262/pull/215/hovercard?comment_id=1246023457&amp;comment_type=review_comment" href="https://github.com/engine262/engine262/pull/215#discussion_r1246023457">engine262/engine262#215 (comment)</a></p>
<p dir="auto">I really hope this can land, but I think there might be performance pushback.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56274#issuecomment-1788524561"><span title="11/1/2023 12:22:32 AM">14 hours ago</span></a></span><div class="comment-body"><p dir="auto">Yes; the previous iteration caused check time to triple: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1697133361" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/54148" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/54148/hovercard" href="https://github.com/microsoft/TypeScript/pull/54148">#54148</a></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/51011"><span class="OPEN">⊚</span> <span class="number-ref">#51011</span></a> Allow circular constraints</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">4</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/brad-jones.png?size=40"/>@brad-jones</span> <a href="https://github.com/microsoft/TypeScript/issues/51011#issuecomment-1754634794"><span title="10/10/2023 1:04:49 AM">on 10/10/2023</span></a></span><div class="comment-body"><p dir="auto">If I'm totally honest the type algebra in TypeScript is hard for me to understand sometimes so I'm not sure if I have a similar use case or not, feel free to send me elsewhere if I'm off the mark with this. Anyway here goes, I'd like to do something like this:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyCustomDagDSL {
  jobs: Record&lt;string, Job&gt;
}

interface Job {
  needs?: JobName[];
  action: () =&gt; void
}

const dag: MyCustomDagDSL = {
  jobs: {
    foo: {
      action: () =&gt; console.log(&quot;foo did some work&quot;)
    },
    bar: {
      needs: [&quot;foo&quot;], // can I define JobName such that this array is typesafe?
      action: () =&gt; console.log(&quot;bar did some work&quot;)
    },
  },
});"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyCustomDagDSL</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-smi">Job</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Job</span> <span class="pl-kos">{</span>
  <span class="pl-c1">needs</span>?: <span class="pl-smi">JobName</span><span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-c1">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>
<span class="pl-kos">}</span>

<span class="pl-k">const</span> <span class="pl-s1">dag</span>: <span class="pl-smi">MyCustomDagDSL</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-kos">{</span>
      <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some work"</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">bar</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"foo"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-c">// can I define JobName such that this array is typesafe?</span>
      <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"bar did some work"</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Doing something like:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyCustomDagDSL {
  jobs: Record&lt;string, Job&lt;MyCustomDagDSL&gt;&gt;
}

interface Job&lt;T extends MyCustomDagDSL&gt; {
  needs?: (keyof T[&quot;jobs&quot;])[];
  action: () =&gt; void
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyCustomDagDSL</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">MyCustomDagDSL</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Job</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">MyCustomDagDSL</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">needs</span>?: <span class="pl-kos">(</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-c1">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Still just gives me <code class="notranslate">string</code>.</p>
<p dir="auto">And then the next thing I tried was:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyCustomDagDSL {
  jobs: Record&lt;keyof MyCustomDagDSL[&quot;jobs&quot;], Job&lt;MyCustomDagDSL&gt;&gt;
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyCustomDagDSL</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">MyCustomDagDSL</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">MyCustomDagDSL</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Which gives: <code class="notranslate">'jobs' is referenced directly or indirectly in its own type annotation</code><br>
After a little more messing about I ended up with:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface DagDSL&lt;Self&gt; {
  jobs: Record&lt;keyof Self[&quot;jobs&quot; &amp; keyof Self], Job&lt;DagDSL&lt;Self&gt;&gt;&gt;;
}

interface Job&lt;T extends DagDSL&lt;T&gt;&gt; {
  needs?: (keyof T[&quot;jobs&quot;])[];
  action: () =&gt; void;
}

class Dagfile&lt;T extends DagDSL&lt;T&gt;&gt; {
  constructor(d: T) {
  }
}

new Dagfile({
  jobs: {
    foo: {
      action: () =&gt; console.log(&quot;foo did some work&quot;),
    },
    bar: {
      needs: [&quot;foo&quot;], // yay this is now type safe
      action: () =&gt; console.log(&quot;bar did some work&quot;),
    },
  },
});"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">DagDSL</span><span class="pl-c1">&lt;</span><span class="pl-smi">Self</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">Self</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span> <span class="pl-c1">&amp;</span> <span class="pl-k">keyof</span> <span class="pl-smi">Self</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Job</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">needs</span>?: <span class="pl-kos">(</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-c1">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">Dagfile</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">constructor</span><span class="pl-kos">(</span><span class="pl-s1">d</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">new</span> <span class="pl-smi">Dagfile</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-kos">{</span>
      <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">bar</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"foo"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-c">// yay this is now type safe</span>
      <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"bar did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">But then I wanted to have 2nd level in my DSL, like this:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface DagDSL&lt;Self&gt; {
  jobs: Record&lt;keyof Self[&quot;jobs&quot; &amp; keyof Self], Job&lt;DagDSL&lt;Self&gt;&gt;&gt;;
}

interface Job&lt;T extends DagDSL&lt;T&gt;&gt; {
  needs?: (keyof T[&quot;jobs&quot;])[];
  steps: Record&lt;keyof T[&quot;steps&quot; &amp; keyof T], Step&lt;Job&lt;DagDSL&lt;T&gt;&gt;&gt;&gt;;
}

interface Step&lt;T extends Job&lt;DagDSL&lt;T&gt;&gt;&gt; {
  needs?: (keyof T[&quot;steps&quot;])[];
  action: () =&gt; void;
}

class Dagfile&lt;T extends DagDSL&lt;T&gt;&gt; {
  constructor(d: T) {
  }
}

new Dagfile({
  jobs: {
    foo: {
      steps: {
        step1: {
          action: () =&gt; console.log(&quot;foo did some work&quot;),
        },
        step2: {
          needs: [&quot;step1&quot;], // not type-safe :(
          action: () =&gt; console.log(&quot;foo did some more work&quot;),
        },
      },
    },
    bar: {
      needs: [&quot;foo&quot;],
      steps: {
        step1: {
          action: () =&gt; console.log(&quot;bar did some work&quot;),
        },
      },
    },
  },
});"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">DagDSL</span><span class="pl-c1">&lt;</span><span class="pl-smi">Self</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">Self</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span> <span class="pl-c1">&amp;</span> <span class="pl-k">keyof</span> <span class="pl-smi">Self</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Job</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">needs</span>?: <span class="pl-kos">(</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-s">"jobs"</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-c1">steps</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-s">"steps"</span> <span class="pl-c1">&amp;</span> <span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">Step</span><span class="pl-kos">&lt;</span><span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Step</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">Job</span><span class="pl-kos">&lt;</span><span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">needs</span>?: <span class="pl-kos">(</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-s">"steps"</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
  <span class="pl-c1">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">Dagfile</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">constructor</span><span class="pl-kos">(</span><span class="pl-s1">d</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">new</span> <span class="pl-smi">Dagfile</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">steps</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">step1</span>: <span class="pl-kos">{</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-c1">step2</span>: <span class="pl-kos">{</span>
          <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"step1"</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-c">// not type-safe :(</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some more work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">bar</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"foo"</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
      <span class="pl-c1">steps</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">step1</span>: <span class="pl-kos">{</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"bar did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/devanshj.png?size=40"/>@devanshj</span> <a href="https://github.com/microsoft/TypeScript/issues/51011#issuecomment-1788481941"><span title="10/31/2023 11:30:59 PM">15 hours ago</span></a></span><div class="comment-body"><p dir="auto">I guess what you want is something like this...</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Dagfile&lt;T extends DagDSL&lt;T&gt;&gt;{
  constructor(d: T){}
}

new Dagfile({
  jobs: {
    foo: {
      steps: {
        step1: {
          action: () =&gt; console.log(&quot;foo did some work&quot;),
        },
        step2: {
          needs: [&quot;step1&quot;],
          action: () =&gt; console.log(&quot;foo did some more work&quot;),
        },
      },
    },
    bar: {
      needs: [&quot;foo&quot;],
      steps: {
        step1: {
          action: () =&gt; console.log(&quot;bar did some work&quot;),
        },
      },
    },
  },
});

type DagDSL&lt;Self&gt; =
  { jobs:
      { [J in keyof Prop&lt;Self, &quot;jobs&quot;&gt;]:
          { needs?: Exclude&lt;keyof Prop&lt;Self, &quot;jobs&quot;&gt;, J&gt;[]
          , steps:
              { [S in keyof Prop&lt;Prop&lt;Prop&lt;Self, &quot;jobs&quot;&gt;, J&gt;, &quot;steps&quot;&gt;]:
                  { needs?: Exclude&lt;keyof Prop&lt;Prop&lt;Prop&lt;Self, &quot;jobs&quot;&gt;, J&gt;, &quot;steps&quot;&gt;, S&gt;[]
                  , action: () =&gt; void
                  }
              }
          }
      }
  }

type Prop&lt;T, K&gt; = K extends keyof T ? T[K] : never"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Dagfile</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">DagDSL</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span><span class="pl-kos">{</span>
  <span class="pl-en">constructor</span><span class="pl-kos">(</span><span class="pl-s1">d</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span><span class="pl-kos">{</span><span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">new</span> <span class="pl-smi">Dagfile</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">jobs</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">steps</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">step1</span>: <span class="pl-kos">{</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-c1">step2</span>: <span class="pl-kos">{</span>
          <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"step1"</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"foo did some more work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">bar</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">needs</span>: <span class="pl-kos">[</span><span class="pl-s">"foo"</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
      <span class="pl-c1">steps</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">step1</span>: <span class="pl-kos">{</span>
          <span class="pl-en">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"bar did some work"</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">DagDSL</span><span class="pl-c1">&lt;</span><span class="pl-smi">Self</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span>
  <span class="pl-kos">{</span> <span class="pl-c1">jobs</span>:
      <span class="pl-kos">{</span> <span class="pl-kos">[</span><span class="pl-smi">J</span> <span class="pl-k">in</span> <span class="pl-k">keyof</span> <span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">,</span> <span class="pl-s">"jobs"</span><span class="pl-kos">&gt;</span><span class="pl-kos">]</span>:
          <span class="pl-kos">{</span> <span class="pl-c1">needs</span>?: <span class="pl-smi">Exclude</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">,</span> <span class="pl-s">"jobs"</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">J</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-kos">]</span>
          <span class="pl-kos">,</span> <span class="pl-c1">steps</span>:
              <span class="pl-kos">{</span> <span class="pl-kos">[</span><span class="pl-smi">S</span> <span class="pl-k">in</span> <span class="pl-k">keyof</span> <span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">,</span> <span class="pl-s">"jobs"</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">J</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-s">"steps"</span><span class="pl-kos">&gt;</span><span class="pl-kos">]</span>:
                  <span class="pl-kos">{</span> <span class="pl-c1">needs</span>?: <span class="pl-smi">Exclude</span><span class="pl-kos">&lt;</span><span class="pl-k">keyof</span> <span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Prop</span><span class="pl-kos">&lt;</span><span class="pl-smi">Self</span><span class="pl-kos">,</span> <span class="pl-s">"jobs"</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">J</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-s">"steps"</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">S</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-kos">]</span>
                  <span class="pl-kos">,</span> <span class="pl-c1">action</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>
                  <span class="pl-kos">}</span>
              <span class="pl-kos">}</span>
          <span class="pl-kos">}</span>
      <span class="pl-kos">}</span>
  <span class="pl-kos">}</span>

<span class="pl-k">type</span> <span class="pl-smi">Prop</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-smi">K</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">K</span> <span class="pl-k">extends</span> <span class="pl-k">keyof</span> <span class="pl-smi">T</span> ? <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-smi">K</span><span class="pl-kos">]</span> : <span class="pl-smi">never</span></pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/12561"><span class="OPEN">⊚</span> <span class="number-ref">#12561</span></a> Standard package.json key for .ts files</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#bfe5cf;color:black;">Community Tooling</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">11</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/trusktr.png?size=40"/>@trusktr</span> <a href="https://github.com/microsoft/TypeScript/issues/12561#issuecomment-640093847"><span title="6/6/2020 10:33:33 AM">on 6/6/2020</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/mhegazy/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mhegazy">@mhegazy</a> Sharing sources is the only way to get around the problems listed in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="541363850" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/35822" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/35822/hovercard" href="https://github.com/microsoft/TypeScript/issues/35822">#35822</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/appsforartists.png?size=40"/>@appsforartists</span> <a href="https://github.com/microsoft/TypeScript/issues/12561#issuecomment-1786533105"><span title="10/30/2023 11:31:58 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I'm looking at adding Vite to my workflow, and once again this seems like a good solution.</p>
<p dir="auto">Here's the problem: Vite shortcircuits typechecking to make UI iteration faster.  To do that, it needs to know what sources you have under control, so it can watch them for changes without waiting for <code class="notranslate">tsc</code> to run.  I still want <code class="notranslate">tsc</code> to do typechecking, I just don't want it on the critical path for experimenting with UI.  My current setup has gotten slow enough that I find myself waiting for <code class="notranslate">tsc</code> when I'm testing visual changes.</p>
<p dir="auto">It appears Vite has a <a href="https://vitejs.dev/config/shared-options.html#resolve-mainfields" rel="nofollow"><code class="notranslate">resolve: mainFields: []</code></a> setting to control which part of <code class="notranslate">package.json</code> it uses for resolution.  If I add something like <code class="notranslate">"typescript": "src/index.ts"</code> to my <code class="notranslate">package.json</code>s (and to my Vite config), I can tell Vite how to navigate the source in my monorepo, while still leaving <code class="notranslate">"module": "dist/index.js"</code> for TypeScript to generate for downstream consumers.</p>
<p dir="auto">cc <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/yyx990803/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/yyx990803">@yyx990803</a> <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/patak-dev/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/patak-dev">@patak-dev</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/appsforartists.png?size=40"/>@appsforartists</span> <a href="https://github.com/microsoft/TypeScript/issues/12561#issuecomment-1788463214"><span title="10/31/2023 11:08:40 PM">16 hours ago</span></a></span><div class="comment-body"><p dir="auto">That's how I ended up adding Vite to my monorepo.</p>
<ul dir="auto">
<li><code class="notranslate">src/index.html</code> points to <code class="notranslate">./mount.tsx</code>.</li>
<li><code class="notranslate">dist/index.html</code> points to <code class="notranslate">./mount.js</code>.  (<code class="notranslate">dist</code> is generated by <code class="notranslate">tsc</code> and <code class="notranslate">sed</code>.)</li>
</ul>
<p dir="auto">When <code class="notranslate">vite serve</code> is running, I include <code class="notranslate">typescript</code> in <code class="notranslate">mainFields</code>, and I've added a <code class="notranslate">"typescript": "src/index.ts"</code> entry to the <code class="notranslate">package json</code>s in the monorepo.  That puts all the JS I've authored on the Vite fast path during development, but keeps <code class="notranslate">tsc</code> in the loop to typecheck before publishing.</p>
<p dir="auto"><a href="https://github.com/material-foundation/trapeze/commit/3897c1f21cdb6e4c8b1f886a1dd1789b33df6af6">Here's an example</a>.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56282"><span class="OPEN">⊚</span> <span class="number-ref">#56282</span></a> TS2322: Type  () => void  is not assignable to type  Function in Typescript 5.2.2</h1><span class="label" style="background-color:#556b75;">Needs More Info</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👎</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/appsforartists.png?size=40"/>@appsforartists</span> <a href="https://github.com/microsoft/TypeScript/issues/56282#issuecomment-1788453679"><span title="10/31/2023 10:57:11 PM">16 hours ago</span></a></span><div class="comment-body"><p dir="auto">works fine:</p>
<p dir="auto"><a href="https://www.typescriptlang.org/play?#code/DYUwLgBAxgXBBiBXAdlMBLA9siBeCAFAJR4B8EA3gL4DcAsAFBTYDOmoAdMJgOYFREaQA" rel="nofollow">https://www.typescriptlang.org/play?#code/DYUwLgBAxgXBBiBXAdlMBLA9siBeCAFAJR4B8EA3gL4DcAsAFBTYDOmoAdMJgOYFREaQA</a></p>
<p dir="auto">(btw, that's why there's a playground - so you can share examples with people)</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">2</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556b75;">Needs More Info</span> <span class="timestamp"><span title="11/1/2023 9:40:32 AM">5 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56208"><span class="CLOSED">⊚</span> <span class="number-ref">#56208</span></a> Unable to widen &quot;this&quot; with an index signature (but a class instance works)</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/HolgerJeromin.png?size=40"/>@HolgerJeromin</span> closed <span class="timestamp"><span title="10/25/2023 1:10:09 AM">on 10/25/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fatcerberus.png?size=40"/>@fatcerberus</span> <a href="https://github.com/microsoft/TypeScript/issues/56208#issuecomment-1788417766"><span title="10/31/2023 10:09:50 PM">17 hours ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I have no insight why <code class="notranslate">this</code> is treated as an arbitrary subtype of <code class="notranslate">MyClass</code></p>
</blockquote>
<p dir="auto">Let's say you have a class that derives from <code class="notranslate">MyClass</code>.  If <code class="notranslate">addHack</code> is called through an instance of <em>that</em> class, <code class="notranslate">this</code> will then refer to instance of said derived class at runtime, <em>not</em> of <code class="notranslate">MyClass</code>.  Thus the type of <code class="notranslate">this</code> is implicitly generic because you can't know whether someone else is going to make subclasses based on your class.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56208#issuecomment-1789318860"><span title="11/1/2023 9:59:39 AM">5 hours ago</span></a></span><div class="comment-body"><p dir="auto">Demo of why <code class="notranslate">this</code> is an arbitrary subtype:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Foo {
    getMe(): this {
        return new Foo();
        // ^ must error, because...
    }
}
class Bar extends Foo {
    doBarThing() {
        console.log('hi');
    }
}

// ... this crashes
(new Bar()).getMe().doBarThing();"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Foo</span> <span class="pl-kos">{</span>
    <span class="pl-en">getMe</span><span class="pl-kos">(</span><span class="pl-kos">)</span>: this <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Foo</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-c">// ^ must error, because...</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>
<span class="pl-k">class</span> <span class="pl-smi">Bar</span> <span class="pl-k">extends</span> <span class="pl-smi">Foo</span> <span class="pl-kos">{</span>
    <span class="pl-en">doBarThing</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'hi'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-c">// ... this crashes</span>
<span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">Bar</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">getMe</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">doBarThing</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56231"><span class="OPEN">⊚</span> <span class="number-ref">#56231</span></a> VS Code Autocomplete takes a lot of time to load</h1><span class="label" style="background-color:#d4c5f9;color:black;">Question</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#d4c5f9;color:black;">Question</span> <span class="timestamp"><span title="10/27/2023 12:48:05 PM">6 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/grenganathan-atlassian.png?size=40"/>@grenganathan-atlassian</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1783703076"><span title="10/27/2023 10:01:57 PM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">This is 5 million lines of code under analysis; even sublinear algorithms produce big numbers when inputs are that large. The only way forward here is some reduction of the amount of scope TS server has to consider, which is a user-space configuration problem.</p>
</blockquote>
<p dir="auto">But in leaf packages (packages which do not depend on other packages in the repo) the time is pretty fast. Would you know why would that happen? Also in another repo, which is ~2x the size the autocomplete is fast.</p>
<blockquote>
<p dir="auto">Have you turned on disableSourceOfProjectReferenceRedirect?<br>
Yes. This doesn't seem to help.</p>
</blockquote>
<p dir="auto">I compared the <code class="notranslate">--extendedDiagnostics</code> with the other repo which is much larger and found this difference</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Files:                         93334
Files:                         49660

Lines of Library:              28452
Lines of Library:              29122

Lines of Definitions:         781691
Lines of Definitions:        1721305"><pre class="notranslate"><code class="notranslate">Files:                         93334
Files:                         49660

Lines of Library:              28452
Lines of Library:              29122

Lines of Definitions:         781691
Lines of Definitions:        1721305
</code></pre></div>
<p dir="auto">The 'Lines of Definitions' is ~3x more in the smaller repository. Could this be the issue?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1785698214"><span title="10/30/2023 10:17:40 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">FWIW 50,000 files is still way too many if you want fast editor interactivity. This would generally indicate a misconfiguration unless your project is absolutely enormous.</p>
<blockquote>
<p dir="auto">Could this be the issue?</p>
</blockquote>
<p dir="auto">Absolutely. I'd recommend running <code class="notranslate">tsc --explainFiles</code> to see what the difference is and see if you can scope out some of the larger files.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/en-yash.png?size=40"/>@en-yash</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1786999364"><span title="10/31/2023 4:08:10 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> we do have 50k files in our repository. What we see in the above trace is <code class="notranslate">updateGraph</code> takes a lot of time. Can you guide us as to what the underlying issues could be?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1787914711"><span title="10/31/2023 12:36:31 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I think the first step would be to run <code class="notranslate">tsc --explainFiles</code>, identify a file that <em>shouldn't</em> be in the list, and work backwards from there to figure out how it's getting in. Repeat as many times as necessary until the file list matches what you think it should.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/en-yash.png?size=40"/>@en-yash</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1788412995"><span title="10/31/2023 10:02:53 PM">17 hours ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> here are a few entries from the log:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="  Library referenced via 'es5' from file '../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2015.d.ts'
  Library 'lib.es5.d.ts' specified in compilerOptions
../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2015.d.ts
  Library referenced via 'es2015' from file '../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2016.d.ts'
  Library referenced via 'es2015' from file 'node_modules/terser/tools/terser.d.ts'
../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2016.d.ts
  Library referenced via 'es2016' from file '../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2017.d.ts'
../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2017.d.ts
  Library referenced via 'es2017' from file '../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2018.d.ts'
../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2018.d.ts
  Library referenced via 'es2018' from file '../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2019.d.ts'
../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2019.d.ts
typings/jest-in-case.d.ts
  Part of 'files' list in tsconfig.json
node_modules/csstype/index.d.ts
  Imported via 'csstype' from file 'node_modules/@compiled/jest/dist/types.d.ts' with packageId 'csstype/index.d.ts@3.1.2'
  Imported via 'csstype' from file 'node_modules/@types/react/index.d.ts' with packageId 'csstype/index.d.ts@3.1.2'
  Imported via 'csstype' from file 'node_modules/@emotion/serialize/types/index.d.ts' with packageId 'csstype/index.d.ts@3.1.2'
  Imported via 'csstype' from file 'node_modules/@types/styled-components/index.d.ts' with packageId 'csstype/index.d.ts@3.1.2'
node_modules/@compiled/jest/dist/types.d.ts
  Imported via './types' from file 'node_modules/@compiled/jest/dist/index.d.ts' with packageId '@compiled/jest/dist/types.d.ts@0.9.0'
  Imported via './types' from file 'node_modules/@compiled/jest/dist/matchers.d.ts' with packageId '@compiled/jest/dist/types.d.ts@0.9.0'
node_modules/jest-diff/build/cleanupSemantic.d.ts
  Imported via './cleanupSemantic' from file 'node_modules/jest-diff/build/index.d.ts' with packageId 'jest-diff/build/cleanupSemantic.d.ts@26.6.2'
  Imported via './cleanupSemantic' from file 'node_modules/jest-diff/build/diffLines.d.ts' with packageId 'jest-diff/build/cleanupSemantic.d.ts@26.6.2'
  Imported via './cleanupSemantic' from file 'node_modules/jest-diff/build/printDiffs.d.ts' with packageId 'jest-diff/build/cleanupSemantic.d.ts@26.6.2'
node_modules/jest-diff/build/types.d.ts
  Imported via './types' from file 'node_modules/jest-diff/build/diffLines.d.ts' with packageId 'jest-diff/build/types.d.ts@26.6.2'
  Imported via './types' from file 'node_modules/jest-diff/build/printDiffs.d.ts' with packageId 'jest-diff/build/types.d.ts@26.6.2'
  Imported via './types' from file 'node_modules/jest-diff/build/index.d.ts' with packageId 'jest-diff/build/types.d.ts@26.6.2'
  Imported via './types' from file 'node_modules/jest-diff/build/index.d.ts' with packageId 'jest-diff/build/types.d.ts@26.6.2'
node_modules/jest-diff/build/diffLines.d.ts"><pre class="notranslate">  <span class="pl-smi">Library</span> <span class="pl-s1">referenced</span> <span class="pl-s1">via</span> <span class="pl-s">'es5'</span> <span class="pl-s1">from</span> <span class="pl-s1">file</span> <span class="pl-s">'../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2015.d.ts'</span>
  <span class="pl-smi">Library</span><span class="pl-kos"></span> <span class="pl-s">'lib.es5.d.ts'</span> <span class="pl-s1">specified</span> <span class="pl-k">in</span> <span class="pl-s1">compilerOptions</span>
<span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-c1">nvm</span><span class="pl-c1">/</span><span class="pl-s1">versions</span><span class="pl-c1">/</span><span class="pl-s1">node</span><span class="pl-c1">/</span><span class="pl-s1">v16</span><span class="pl-c1">.15</span><span class="pl-c1">.0</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">typescript</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-kos">.</span><span class="pl-c1">es2015</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>
  <span class="pl-smi">Library</span> <span class="pl-s1">referenced</span> <span class="pl-s1">via</span> <span class="pl-s">'es2015'</span> <span class="pl-s1">from</span> <span class="pl-s1">file</span><span class="pl-kos"></span> <span class="pl-s">'../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2016.d.ts'</span>
  <span class="pl-smi">Library</span> <span class="pl-s1">referenced</span> <span class="pl-s1">via</span> <span class="pl-s">'es2015'</span> <span class="pl-s1">from</span> <span class="pl-s1">file</span> '<span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">terser</span><span class="pl-c1">/</span><span class="pl-s1">tools</span><span class="pl-c1">/</span><span class="pl-s1">terser</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">'</span>
<span class="pl-s">../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2016.d.ts</span>
<span class="pl-s">  Library referenced via '</span><span class="pl-s1">es2016</span><span class="pl-s">' from file '</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-c1">nvm</span><span class="pl-c1">/</span><span class="pl-s1">versions</span><span class="pl-c1">/</span><span class="pl-s1">node</span><span class="pl-c1">/</span><span class="pl-s1">v16</span><span class="pl-c1">.15</span><span class="pl-c1">.0</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">typescript</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-kos">.</span><span class="pl-c1">es2017</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">'</span>
<span class="pl-s">../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2017.d.ts</span>
<span class="pl-s">  Library referenced via '</span><span class="pl-s1">es2017</span><span class="pl-s">' from file '</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-c1">nvm</span><span class="pl-c1">/</span><span class="pl-s1">versions</span><span class="pl-c1">/</span><span class="pl-s1">node</span><span class="pl-c1">/</span><span class="pl-s1">v16</span><span class="pl-c1">.15</span><span class="pl-c1">.0</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">typescript</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-kos">.</span><span class="pl-c1">es2018</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">'</span>
<span class="pl-s">../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2018.d.ts</span>
<span class="pl-s">  Library referenced via '</span><span class="pl-s1">es2018</span><span class="pl-s">' from file '</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-kos">.</span><span class="pl-c1">nvm</span><span class="pl-c1">/</span><span class="pl-s1">versions</span><span class="pl-c1">/</span><span class="pl-s1">node</span><span class="pl-c1">/</span><span class="pl-s1">v16</span><span class="pl-c1">.15</span><span class="pl-c1">.0</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">typescript</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-c1">/</span><span class="pl-s1">lib</span><span class="pl-kos">.</span><span class="pl-c1">es2019</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">'</span>
<span class="pl-s">../../../.nvm/versions/node/v16.15.0/lib/node_modules/typescript/lib/lib.es2019.d.ts</span>
<span class="pl-s">typings/jest-in-case.d.ts</span>
<span class="pl-s">  Part of '</span><span class="pl-s1">files</span><span class="pl-s">' list in tsconfig.json</span>
<span class="pl-s">node_modules/csstype/index.d.ts</span>
<span class="pl-s">  Imported via '</span><span class="pl-s1">csstype</span><span class="pl-s">' from file '</span><span class="pl-kos"></span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">compiled</span><span class="pl-pds"><span class="pl-c1">/</span>jest<span class="pl-c1">/</span>dist</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">csstype</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">3.1</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-s1">csstype</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">types</span><span class="pl-pds"><span class="pl-c1">/</span>react<span class="pl-c1">/</span>index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">csstype</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">3.1</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-s1">csstype</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">emotion</span><span class="pl-pds"><span class="pl-c1">/</span>serialize<span class="pl-c1">/</span>types</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">csstype</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">3.1</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-s1">csstype</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">types</span><span class="pl-pds"><span class="pl-c1">/</span>styled-components<span class="pl-c1">/</span>index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">csstype</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">3.1</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">node_modules/@compiled/jest/dist/types.d.ts</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">compiled</span><span class="pl-pds"><span class="pl-c1">/</span>jest<span class="pl-c1">/</span>dist</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span>@<span class="pl-s1">compiled</span><span class="pl-pds"><span class="pl-c1">/</span>jest<span class="pl-c1">/</span>dist</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">0.9</span><span class="pl-c1">.0</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span>@<span class="pl-s1">compiled</span><span class="pl-pds"><span class="pl-c1">/</span>jest<span class="pl-c1">/</span>dist</span><span class="pl-c1">/</span><span class="pl-s1">matchers</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">' with packageId '</span>@<span class="pl-s1">compiled</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">/</span><span class="pl-s1">dist</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">0.9</span><span class="pl-c1">.0</span><span class="pl-s">'</span>
<span class="pl-s">node_modules/jest-diff/build/cleanupSemantic.d.ts</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos"></span><span class="pl-s">' from file '</span><span class="pl-kos"></span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos"></span><span class="pl-s">' from file '</span><span class="pl-kos"></span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">diffLines</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos"></span><span class="pl-s">' from file '</span><span class="pl-kos"></span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">printDiffs</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">cleanupSemantic</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">node_modules/jest-diff/build/types.d.ts</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">diffLines</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">printDiffs</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-kos"></span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span><span class="pl-s">'</span>
<span class="pl-s">  Imported via '</span><span class="pl-kos">.</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-s">' from file '</span><span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">index</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span><span class="pl-s">' with packageId '</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">types</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span>@<span class="pl-c1">26.6</span><span class="pl-c1">.2</span>'
<span class="pl-s1">node_modules</span><span class="pl-c1">/</span><span class="pl-s1">jest</span><span class="pl-c1">-</span><span class="pl-s1">diff</span><span class="pl-c1">/</span><span class="pl-s1">build</span><span class="pl-c1">/</span><span class="pl-s1">diffLines</span><span class="pl-kos">.</span><span class="pl-c1">d</span><span class="pl-kos">.</span><span class="pl-c1">ts</span></pre></div>
<p dir="auto">I don't see anything odd as it contains all the declaration files from <code class="notranslate">node_modules</code>. Do you see something odd here?<br>
Also curious to know does the output of <code class="notranslate">tsc --explainFiles</code> relates to autocomplete time</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56231#issuecomment-1789349858"><span title="11/1/2023 10:19:51 AM">4 hours ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Also curious to know does the output of tsc --explainFiles relates to autocomplete time</p>
</blockquote>
<p dir="auto">You pay a very small but nonzero penalty on incremental edit for every file in the project, since it requires a small but nonzero amount of work to verify the file is up-to-date, redo a small amount of work related to the file's exports, and so on.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/35554"><span class="OPEN">⊚</span> <span class="number-ref">#35554</span></a> Add a visibility mechanism similar to `friend` or `InternalsVisibleTo`</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">15</span></span><span class="reaction-group"><span class="emoji">👎</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/hinell.png?size=40"/>@hinell</span> <a href="https://github.com/microsoft/TypeScript/issues/35554#issuecomment-1019403578"><span title="1/22/2022 7:15:44 PM">on 1/22/2022</span></a></span><div class="comment-body"><p dir="auto">No need for this madness.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👎</span><span class="count">12</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/TurboEncabulator9000.png?size=40"/>@TurboEncabulator9000</span> <a href="https://github.com/microsoft/TypeScript/issues/35554#issuecomment-1788299395"><span title="10/31/2023 7:24:44 PM">19 hours ago</span></a></span><div class="comment-body"><p dir="auto">It would be nice to have this available for either module- or class-style development.</p>
<p dir="auto">Maybe someone who never wrote a line of code until one day they went to a boot camp, and came out the other end a JS developer, and never wrote a single line in another language, thinks classes are dumb. However, a lot of us come from developing in various different OOP languages, and don't want to write blobs of functions with global variables floating around. We already have years/decades of experience before we start messing with JS/TS. We don't want to throw that away and lose all of the value it brings, and which TS <em>already</em> works quite hard to give us. (Really, what experienced OOP developer would want to write anything serious in plain JS if they didn't have to, and if TS wasn't around?)</p>
<p dir="auto">If JS is going to be the "eight ways of doing everything" language, and if those who maintain it don't care to constrain it from that, and now there are essentially two distinct development methodologies, then why say only one should get this feature?</p>
<p dir="auto">The more preeminent proposal is the <code class="notranslate">internal</code> keyword, but this doesn't prevent someone working <em>within</em> a repo who doesn't understand the intended architecture from misusing a method that's only <code class="notranslate">public</code> <em>for want of a better mechanism.</em></p>
<p dir="auto">For example, suppose I have these layers:</p>
<ul dir="auto">
<li>Controller</li>
<li>Service (called by Controller)</li>
<li>Adapter (factoried by the Service)</li>
</ul>
<p dir="auto">Nice and clean, easy to test, SOLID-compliant.</p>
<p dir="auto">Service supplies some methods that would be useful by the Adapter, but it would be totally wrong for the Controller to call those methods. Therefore, only code "below" the Service (that is, in the Adapters) should call it.</p>
<p dir="auto">However, suppose you have some developers who can't understand that. They see a new use case, and want to tack on some conditionals in the Controller that reach into the Service and call public methods intended only for the Adapters, thereby usurping their responsibilities. You can't control what they do because they don't all send their PRs to you, and those who will review those PRs don't get the layered design either.</p>
<p dir="auto">You <em>want</em> to express this intended design using a "friend" mechanism, but you can't. Next option is <code class="notranslate">internal</code>, which is irrelevant to the problem at hand.</p>
<p dir="auto">What are your alternatives? Either make the Service an abstract class which would be extended by an Adapter (in which case it becomes quite sprawling, and violates the Single Responsibility Principle), or you make several of its methods public and tolerate the risk that someone is going to do something goofy with them from a Controller.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56225"><span class="OPEN">⊚</span> <span class="number-ref">#56225</span></a> Class parameter incorrectly treated as bivariant</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#3178c6;">Help Wanted</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/issues/56225#issuecomment-1782115949"><span title="10/26/2023 5:32:37 PM">6 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto"><code class="notranslate">InstanceOf</code> is treated as covariant correctly here.</p>
</blockquote>
<p dir="auto">Right, what's going on here is that <code class="notranslate">InstanceOf&lt;AbstractableConstructor&gt;</code> and <code class="notranslate">InstanceOf&lt;typeof Foo&gt;</code> are resolved to <code class="notranslate">{}</code> and <code class="notranslate">Foo</code> respectably before the conditional type is evaluated. So, it's like writing <code class="notranslate">{} extends Foo ? true : false</code>, and at that point we don't even consult the variance computed for <code class="notranslate">InstanceOf</code>.</p>
<p dir="auto">But in the case of relating two instances of <code class="notranslate">Proto</code> we <em>do</em> consult the variance information, and, since it claims bivariance, we consider the <code class="notranslate">Proto&lt;AbstractableConstructor&gt;</code> and <code class="notranslate">Proto&lt;typeof Foo&gt;</code> to be related in both directions. You can see the difference by forcing a structural comparison:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Proto2&lt;proto extends AbstractableConstructor = AbstractableConstructor&gt; {
	declare instance: InstanceOf&lt;proto&gt;
}

type Z2 = Proto extends Proto2&lt;typeof Foo&gt; ? true : false
//   ^? false"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Proto2</span><span class="pl-c1">&lt;</span><span class="pl-smi">proto</span> <span class="pl-k">extends</span> <span class="pl-smi">AbstractableConstructor</span> <span class="pl-c1">=</span> <span class="pl-smi">AbstractableConstructor</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
	<span class="pl-k">declare</span> <span class="pl-c1">instance</span>: <span class="pl-smi">InstanceOf</span><span class="pl-kos">&lt;</span><span class="pl-smi">proto</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span>

<span class="pl-k">type</span> <span class="pl-smi">Z2</span> <span class="pl-c1">=</span> <span class="pl-smi">Proto</span> <span class="pl-k">extends</span> <span class="pl-smi">Proto2</span><span class="pl-kos">&lt;</span><span class="pl-k">typeof</span> <span class="pl-smi">Foo</span><span class="pl-kos">&gt;</span> ? <span class="pl-c1">true</span> : <span class="pl-c1">false</span>
<span class="pl-c">//   ^? false</span></pre></div>
<p dir="auto">Ideally we'd detect when conditional type variance is unmeasurable and instead force structural comparisons, but we've tried that in the past with pretty disastrous results for performance.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ethanresnick.png?size=40"/>@ethanresnick</span> <a href="https://github.com/microsoft/TypeScript/issues/56225#issuecomment-1788217243"><span title="10/31/2023 5:29:30 PM">21 hours ago</span></a></span><div class="comment-body"><p dir="auto">I found this a bit hard to understand, so put together a simpler repro. Figured I'd post it here in case it helps someone else:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type Id&lt;T = {}&gt; = T

type ConditionalId&lt;T&gt; = T extends Id&lt;infer Value&gt; ? Value : never

class Box&lt;B&gt; {
  declare value: ConditionalId&lt;B&gt;
}

// Ok
type A = Box&lt;{}&gt;[&quot;value&quot;]
//   ^? {}

// Ok
type B = Box&lt;{ foo: true }&gt;[&quot;value&quot;]
//   ^? { foo: true }

// Ok
type C = A extends B ? true : false
//   ^? false

// This should be false
type Z = Box&lt;{}&gt; extends Box&lt;{ foo: true }&gt; ? true : false
//   ^? true"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">Id</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">T</span>

<span class="pl-k">type</span> <span class="pl-smi">ConditionalId</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">Id</span><span class="pl-kos">&lt;</span>infer <span class="pl-smi">Value</span><span class="pl-kos">&gt;</span> ? <span class="pl-smi">Value</span> : <span class="pl-smi">never</span>

<span class="pl-k">class</span> <span class="pl-smi">Box</span><span class="pl-c1">&lt;</span><span class="pl-smi">B</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-k">declare</span> <span class="pl-c1">value</span>: <span class="pl-smi">ConditionalId</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span>

<span class="pl-c">// Ok</span>
<span class="pl-k">type</span> <span class="pl-smi">A</span> <span class="pl-c1">=</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-s">"value"</span><span class="pl-kos">]</span>
<span class="pl-c">//   ^? {}</span>

<span class="pl-c">// Ok</span>
<span class="pl-k">type</span> <span class="pl-smi">B</span> <span class="pl-c1">=</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-s">"value"</span><span class="pl-kos">]</span>
<span class="pl-c">//   ^? { foo: true }</span>

<span class="pl-c">// Ok</span>
<span class="pl-k">type</span> <span class="pl-smi">C</span> <span class="pl-c1">=</span> <span class="pl-smi">A</span> <span class="pl-k">extends</span> <span class="pl-smi">B</span> ? <span class="pl-c1">true</span> : <span class="pl-c1">false</span>
<span class="pl-c">//   ^? false</span>

<span class="pl-c">// This should be false</span>
<span class="pl-k">type</span> <span class="pl-smi">Z</span> <span class="pl-c1">=</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">&gt;</span> <span class="pl-k">extends</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">&gt;</span> ? <span class="pl-c1">true</span> : <span class="pl-c1">false</span>
<span class="pl-c">//   ^? true</span></pre></div></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56278"><span class="CLOSED">⊚</span> <span class="number-ref">#56278</span></a> Generics are inferred wrong in a union</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span> <span class="timestamp"><span title="10/31/2023 2:06:27 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/awerlogus.png?size=40"/>@awerlogus</span> closed <span class="timestamp"><span title="10/31/2023 4:07:27 PM">23 hours ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/45809"><span class="OPEN">⊚</span> <span class="number-ref">#45809</span></a> Incorrect generic inference inside a discriminated union</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#5319e7;">Rescheduled</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="2/1/2023 11:03:19 AM">on 2/1/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/awerlogus.png?size=40"/>@awerlogus</span> <a href="https://github.com/microsoft/TypeScript/issues/45809#issuecomment-1788156508"><span title="10/31/2023 4:07:20 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto">The simplest repro:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="declare const a: &lt;E, T&gt;(either: [false, E] | [true, T]) =&gt; void

declare const b: [false, string] | [true, number]

// now:      const a: &lt;string, string&gt;(either: [false, string] | [true, string]) =&gt; void
// expected: const a: &lt;string, number&gt;(either: [false, string] | [true, number]) =&gt; void
a(b)"><pre class="notranslate"><span class="pl-k">declare</span> <span class="pl-k">const</span> <span class="pl-s1">a</span>: <span class="pl-c1">&lt;</span><span class="pl-smi">E</span><span class="pl-kos">,</span> <span class="pl-smi">T</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">either</span>: <span class="pl-kos">[</span><span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-smi">E</span><span class="pl-kos">]</span> <span class="pl-c1">|</span> <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-smi">T</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>

<span class="pl-k">declare</span> <span class="pl-k">const</span> <span class="pl-s1">b</span>: <span class="pl-kos">[</span><span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-smi">string</span><span class="pl-kos">]</span> <span class="pl-c1">|</span> <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-smi">number</span><span class="pl-kos">]</span>

<span class="pl-c">// now:      const a: &lt;string, string&gt;(either: [false, string] | [true, string]) =&gt; void</span>
<span class="pl-c">// expected: const a: &lt;string, number&gt;(either: [false, string] | [true, number]) =&gt; void</span>
<span class="pl-en">a</span><span class="pl-kos">(</span><span class="pl-s1">b</span><span class="pl-kos">)</span></pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55919"><span class="OPEN">⊚</span> <span class="number-ref">#55919</span></a> JSDoc `@overload`s on constructors don't capture class type parameters, can dictate their return type</h1><span class="label" style="background-color:#c5def5;color:black;">Domain: JSDoc</span><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><span class="label" style="background-color:#3074a5;">checkJs</span><span class="label" style="background-color:#f0db4f;color:black;">Domain: JavaScript</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> <a href="https://github.com/microsoft/TypeScript/issues/55919#issuecomment-1781567489"><span title="10/26/2023 10:47:56 AM">on 10/26/2023</span></a></span><div class="comment-body"><p dir="auto">(1) and (2) need to be tested in the fix for this bug.</p>
<p dir="auto">Your thoughts on generic constructors would be good to have on <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="696949269" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/40451" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/40451/hovercard" href="https://github.com/microsoft/TypeScript/issues/40451">#40451</a>; JS isn't supposed to support generic constructors until TS does.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/55919#issuecomment-1786027189"><span title="10/30/2023 1:56:44 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sandersn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sandersn">@sandersn</a> For clarity, do you mean my thoughts on <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="696949269" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/40451" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/40451/hovercard" href="https://github.com/microsoft/TypeScript/issues/40451">#40451</a> or <code class="notranslate">@DanielRosenwasser</code>'s?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/55919#issuecomment-1788150128"><span title="10/31/2023 4:00:14 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto">Added a comment to that issue just in case. I have time to write comments down now so I figured I'd just take advantage of the opportunity if that was the desire. 😅</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/40451"><span class="OPEN">⊚</span> <span class="number-ref">#40451</span></a> Constructor generic types and `this` parameter (TS1092, TS2681)</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">23</span></span><span class="reaction-group"><span class="emoji">🚀</span><span class="count">2</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sayandcode.png?size=40"/>@sayandcode</span> <a href="https://github.com/microsoft/TypeScript/issues/40451#issuecomment-1445928238"><span title="2/27/2023 12:49:42 AM">on 2/27/2023</span></a></span><div class="comment-body"><p dir="auto">Might I suggest an alternative "Alternative to get this working now"? Instead of using never on the constructor, you could just make it a private constructor</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/40451#issuecomment-1788149320"><span title="10/31/2023 3:59:32 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto">Pinging <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sandersn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sandersn">@sandersn</a> from <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1919836715" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/55919" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/55919/hovercard" href="https://github.com/microsoft/TypeScript/issues/55919">#55919</a>. (I couldn't tell if you were asking me to provide my thoughts here or <code class="notranslate">@DanielRosenwasser</code>. But just in case you were asking me, I'm providing thoughts now because I have the time to provide them right now.)</p>
<blockquote>
<p dir="auto">There are situations where generics are only necessary during initialization and become redundant afterwards. In these situations the types are not inherently tied to the overall class, so they should ideally be defined separately.</p>
</blockquote>
<p dir="auto">This is actually my exact use case.</p>
<h2 dir="auto">The Use Case</h2>
<p dir="auto">I'm working on a utility that will allow developers to run sophisticated logic with event listeners. Let's call it the <code class="notranslate">ElementObserver</code>. (I will be providing a reduced, overly-simplified version of the use case here. So for now, <em>please</em> just trust that <code class="notranslate">document.addEventListener</code> and <code class="notranslate">document.removeEventListener</code> are insufficient, and that something like this class is needed.) This observer will basically register/unregister event handlers for an "observed" element as needed. Multiple elements can be observed at a time.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class ElementObserver {
  observe(element: HTMLElement): void {
    // Register Listeners
  }

  unobserve(element: HTMLElement): void {
    // Unregister Listeners
  }

  disconnect(): void {
    // `unobserve` everything
  }
};"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">ElementObserver</span> <span class="pl-kos">{</span>
  <span class="pl-en">observe</span><span class="pl-kos">(</span><span class="pl-s1">element</span>: <span class="pl-smi">HTMLElement</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
    <span class="pl-c">// Register Listeners</span>
  <span class="pl-kos">}</span>

  <span class="pl-en">unobserve</span><span class="pl-kos">(</span><span class="pl-s1">element</span>: <span class="pl-smi">HTMLElement</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
    <span class="pl-c">// Unregister Listeners</span>
  <span class="pl-kos">}</span>

  <span class="pl-en">disconnect</span><span class="pl-kos">(</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
    <span class="pl-c">// `unobserve` everything</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">I want the class to be able to support different kinds of setup. In one situation, the user might just want to run sophisticated logic whenever a <em>specific</em> event is emitted. In another situation, users might want to run this logic when any one of <em>multiple</em> events are emitted. Separately, they might want to run one listener for one event and another listener for another event. To manage these scenarios, the constructor needs a declaration like this</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type EventType = keyof DocumentEventMap;

class ElementObserver {
  /** `listener` will be called when `T` is emitted (during observation) */
  constructor&lt;T extends EventType&gt;(type: T, listener: (event: DocumentEventMap[T]) =&gt; unknown);

  /** `listener` will be called when any one of the events listed in `T` is emitted (during observation) */
  constructor&lt;T extends ReadonlyArray&lt;EventType&gt;&gt;(types: T, listener: (event: DocumentEventMap[T[number]]) =&gt; unknown);

  /** `listener[0]` will be called when `T[0]` is emitted, and so on (during observation) */
  constructor&lt;T extends ReadonlyArray&lt;EventType&gt;&gt;(types: T, listeners: TYPE_CONVERTING_T_TO_ARRAY_OF_LISTENERS);
  // ...
}"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">EventType</span> <span class="pl-c1">=</span> <span class="pl-k">keyof</span> <span class="pl-smi">DocumentEventMap</span><span class="pl-kos">;</span>

<span class="pl-k">class</span> <span class="pl-smi">ElementObserver</span> <span class="pl-kos">{</span>
  <span class="pl-c">/** `listener` will be called when `T` is emitted (during observation) */</span>
  <span class="pl-c1">constructor</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">EventType</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">type</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">listener</span>: <span class="pl-kos">(</span><span class="pl-s1">event</span>: <span class="pl-smi">DocumentEventMap</span><span class="pl-kos">[</span><span class="pl-smi">T</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">unknown</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

  <span class="pl-c">/** `listener` will be called when any one of the events listed in `T` is emitted (during observation) */</span>
  <span class="pl-c1">constructor</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">ReadonlyArray</span><span class="pl-kos">&lt;</span><span class="pl-smi">EventType</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">types</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">listener</span>: <span class="pl-kos">(</span><span class="pl-s1">event</span>: <span class="pl-smi">DocumentEventMap</span><span class="pl-kos">[</span><span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-smi">number</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">unknown</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

  <span class="pl-c">/** `listener[0]` will be called when `T[0]` is emitted, and so on (during observation) */</span>
  <span class="pl-c1">constructor</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">ReadonlyArray</span><span class="pl-kos">&lt;</span><span class="pl-smi">EventType</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">types</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">listeners</span>: <span class="pl-smi">TYPE_CONVERTING_T_TO_ARRAY_OF_LISTENERS</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-c">// ...</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">If I implement the constructor properly, the actual <em>interface</em> exposed to my users (<code class="notranslate">observe</code>/<code class="notranslate">unobserve</code>/<code class="notranslate">disconnect</code>) never has to change, and everything functions predictably. So it would be inappropriate to make the class generic. (In fact, using a generic class instead of a generic constructor would cause things to break.)</p>
<p dir="auto">Instead, the <em>constructor</em> needs to be generic. This is because the type of <code class="notranslate">Event</code> expected by the <code class="notranslate">listener</code>(s) argument <em>must</em> be chosen based on the kind of <code class="notranslate">EventType</code> being listened for. Without this feature, the project that I'm working on will provide an inferior user experience. (I'm using JSDocs. And within that domain, there are workarounds to "get generic constructors". But each workaround has some kind of disadvantage, depending on what's used. I can go into more detail if needed.)</p>
<h2 dir="auto">Limitations of the <a href="https://stackoverflow.com/questions/64228054/overload-class-type-definition-in-typescript/64229224#64229224" rel="nofollow">Interface + Class Expression Approach</a></h2>
<p dir="auto">I know that generic constructors can be "simulated" by using an <code class="notranslate">interface</code> together with a <code class="notranslate">class expression</code>, but there are several limitations to this. Here are 3:</p>
<h3 dir="auto">1) Separation of Documentation and Implementation</h3>
<p dir="auto">The nice thing about class definitions is that you can type a method <em>and</em> document it in the same area. This makes it easy for developers to know what a method (or its overloads) is intended to do.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class MyClass {
    /**
     * Does something with strings
     * @param arg A string
     */
    method(arg: string): void;
    /**
     * Does something with numbers
     * @param arg A number
     */
    method(arg: number): void;
    method(arg: string | number): void {
        /* ... */
    }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">MyClass</span> <span class="pl-kos">{</span>
    <span class="pl-c">/**</span>
<span class="pl-c">     * Does something with strings</span>
<span class="pl-c">     * <span class="pl-k">@param</span> arg A string</span>
<span class="pl-c">     */</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-c">/**</span>
<span class="pl-c">     * Does something with numbers</span>
<span class="pl-c">     * <span class="pl-k">@param</span> arg A number</span>
<span class="pl-c">     */</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span> <span class="pl-c1">|</span> <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
        <span class="pl-c">/* ... */</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">When the <code class="notranslate">interface + class expression</code> approach is used, the documentation is separated from the implementation. This is because the documentation <em>cannot</em> be supplied by the methods inside the class definition. (Trying such a thing does nothing.) Instead, <em>all</em> of the documentation is only acknowledged/preserved when it is provided by the <code class="notranslate">interface</code>.</p>
<p dir="auto">This isn't the end of the world, but it does make maintenance more difficult because the developer has to look <em>somewhere else</em> (besides the class definition) to understand what all the methods are intended to do.</p>
<h3 dir="auto">2) Unsafe Types for Overloads</h3>
<p dir="auto">The following is allowed by TypeScript</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyInterface {
    method(arg: string): void;
    method(arg: number): void;
}

class MyClass implements MyInterface {
    method(arg: string | number): void {
        /* ... */
    }
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">MyClass</span> <span class="pl-k">implements</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span>
    <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span> <span class="pl-c1">|</span> <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
        <span class="pl-c">/* ... */</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">This is technically valid when it comes to the pure <code class="notranslate">implements</code> clause. But when it comes to <code class="notranslate">interface</code>s that define a class with a generic constructor, this is actually unsafe. As far as a class with a generic constructor is concerned, it wants to state that the argument to <code class="notranslate">method</code> must exclusively be a <code class="notranslate">string</code>, <em>or</em> it must exclusively be a <code class="notranslate">number</code>. It cannot be a union of the two. But when <code class="notranslate">MyClass</code> implements <code class="notranslate">MyInterface</code>, everything checks out to TypeScript. If someone accidentally provides this method declaration within their class definition, they can end up writing code that runs on invalid assumptions without being warned -- resulting in bugs.</p>
<p dir="auto">Classes that get to define their own types and their own documentation do not have this problem. But if classes with generic constructors are forbidden, then the risk that I just described remains for developers relying on the <code class="notranslate">interface + class expression</code> approach.</p>
<h3 dir="auto">3) Duplication of Type Information</h3>
<p dir="auto">In order to avoid the aforementioned problem, you must <em>rewrite</em> the overloads that were already defined on the interface.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class MyClass implements MyInterface {
    method(arg: string): void;
    method(arg: number): void;
    method(arg: string | number): void {
        /* ... */
    }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">MyClass</span> <span class="pl-k">implements</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span> <span class="pl-c1">|</span> <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
        <span class="pl-c">/* ... */</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Besides being inconvenient, it still leaves the door open for some unexpected behavior. (You never know what kind of accidents can happen when a class's documentation and method declarations are separated from their "true definitions" in the class expression.)</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class MyClass implements MyInterface {
    method(arg: string): void;
    method(arg: number): void;
    method(arg: boolean): void;
    method(arg: string | number | boolean): void {
        /* ... */
    }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">MyClass</span> <span class="pl-k">implements</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">boolean</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">;</span>
    <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">string</span> <span class="pl-c1">|</span> <span class="pl-smi">number</span> <span class="pl-c1">|</span> <span class="pl-smi">boolean</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span>
        <span class="pl-c">/* ... */</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<h2 dir="auto">Addressing <a href="https://github.com/microsoft/TypeScript/issues/10860#issuecomment-246456721" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/10860/hovercard">Implementation Concerns</a></h2>
<p dir="auto">One of the concerns mentioned by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> was that it would be difficult for consumers to supply type parameters for generic constructors. However, since generic constructors are a feature that would be useful for different scenarios (such as the one described above), I think it would be safe enough to "kick the can of prohibition" down the road. That is, instead of forbidding the <em>use</em> of generic constructors, simply forbid consumers from <em>providing</em> type arguments for generic constructors. (Consumers should still be able to provide type arguments for the <em>class's</em> generic types.) It still leaves some dissonance between how functions/methods work and how constructors work (in terms of type arguments), but I think the end result will be better (since it opens more opportunities to developers without taking anything away).</p>
<p dir="auto">My assumption is that this should be safe to do. Because a generic constructor type, <code class="notranslate">U</code>, would be inferred from the arguments to the constructor, it will never really be necessary for consumers to supply the type arguments for generic constructors anyway. If the generic type is so unimportant that the argument using it is optional, then the class author can provide a default type value instead (or let the type default to <code class="notranslate">unknown</code> by itself).</p>
<p dir="auto">I'll provide some additional justification. We'll be using the following as a point of reference:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class MyClass&lt;T&gt; {
  constructor&lt;U&gt;(x: T, y: U) { /* ... */ }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">MyClass</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">constructor</span><span class="pl-c1">&lt;</span><span class="pl-smi">U</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">x</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">y</span>: <span class="pl-smi">U</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<h3 dir="auto">Only the Constructor Needs to Know the Generic Type</h3>
<p dir="auto">In situations where the <em>constructor</em> is truly generic and not the class, then only the constructor needs to be aware of the type, <em>not</em> the class. This still holds even when the physical class itself is generic.</p>
<p dir="auto">Think of a method belonging to a class. We know that it can define its own type parameters:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class MyClass&lt;T&gt; {
  constructor&lt;U&gt;(x: T, y: U) { }

  method&lt;S&gt;(arg: S): void { /* ... */ }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">MyClass</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">constructor</span><span class="pl-c1">&lt;</span><span class="pl-smi">U</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">x</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">y</span>: <span class="pl-smi">U</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-kos">}</span>

  <span class="pl-en">method</span><span class="pl-c1">&lt;</span><span class="pl-smi">S</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">S</span><span class="pl-kos">)</span>: <span class="pl-smi"><span class="pl-k">void</span></span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">The type parameter <code class="notranslate">S</code>, only belongs to <code class="notranslate">method</code>. It is irrelevant to the rest of the class, and it should not be accessible to the rest of the class. In the same way, the constructor type parameter, <code class="notranslate">U</code>, is only relevant for the constructor. Consequently, the rest of <code class="notranslate">MyClass</code>'s methods and fields should not be able to access <code class="notranslate">U</code>. (Just like the rest of the class can't access <code class="notranslate">S</code>.)</p>
<p dir="auto">If this logic holds, then it's also true that consumers have no need to specify <code class="notranslate">U</code> as a type parameter. How so? Because the consumer gains nothing from specifying <code class="notranslate">U</code>. Immediately after the consumer specifies the type parameter, they no longer need it because the type parameter has no impact on the class's actual interface. If they choose to specify the type, it will only be relevant for the argument that they provide for the constructor. But <code class="notranslate">U</code> is already <em>inferred</em> from the arguments anyway.</p>
<h3 dir="auto">User-Provided Type Arguments Are Only Relevant When the Author Can't Predict the Outcome</h3>
<p dir="auto">I know that functions/methods allow type parameters to be specified when they're called. But in practice, I've only seen this to be useful in situations where the author can't possibly know what the consumer needs. For example, <code class="notranslate">document.querySelector</code> can only anticipate the returned <code class="notranslate">HTMLElement</code> type if the <code class="notranslate">string</code> provided to it is a raw tag name recognized by the web spec. Otherwise, the best that the method can do is default to <code class="notranslate">HTMLElement</code>. It <strong><em>is</em></strong> possible that <code class="notranslate">document.querySelector(".my-class")</code> should produce an <code class="notranslate">HTMLSpanElement</code>, but the author could never know that. A similar story goes for the Testing Library's <code class="notranslate">getByRole</code> query.</p>
<p dir="auto">But we aren't dealing with the wild unpredictability of the DOM. We're talking about classes with explicitly-defined behavior. More specifically, we're talking about class <em>constructors</em> with explicitly-defined behavior. It's hard for me to imagine a scenario where the author of a class constructor wouldn't be able to predict its outcome. It's even harder for me to imagine a scenario where a consumer would need to specify the type parameter, because realistically they wouldn't be able to use it after the class is instantiated.</p>
<h3 dir="auto">Extra Notes</h3>
<p dir="auto">Because a literal, ES6 constructor is distinguished from a regular function that behaves like a constructor in TypeScript (and rightly so), such regular functions do not need to share these restrictions. They can keep working as normal.</p>
<p dir="auto">Separately, if there are any situations where an author really wants a <em>generic</em> constructor to impact a <em>generic</em> class's interface, they should probably just create two separate generics: <code class="notranslate">T</code> for the class and <code class="notranslate">U</code> for the constructor. Then, they can try to set things up such that <code class="notranslate">T</code> is derived from <code class="notranslate">U</code> in some way. However, I'm not sure how reasonable, practical, or common this use case would be. So I don't think it should be a concern that impacts the decision on this matter.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55486"><span class="OPEN">⊚</span> <span class="number-ref">#55486</span></a> TypeScript 5.3 Iteration Plan</h1><span class="label" style="background-color:#4770b7;">Planning</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">24</span></span><span class="reaction-group"><span class="emoji">🎉</span><span class="count">36</span></span><span class="reaction-group"><span class="emoji">❤️</span><span class="count">7</span></span><span class="reaction-group"><span class="emoji">🚀</span><span class="count">11</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">4</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zedryas.png?size=40"/>@zedryas</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1778995656"><span title="10/25/2023 3:47:23 AM">on 10/25/2023</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a> is <a href="https://github.com/microsoft/TypeScript/wiki/Roadmap">roadmap</a> no longer to be edited ?<br>
I use to love it as it is more readable for non season programmers like me ;)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/DanielRosenwasser.png?size=40"/>@DanielRosenwasser</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1786207185"><span title="10/30/2023 4:35:06 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I have not been able to give the roadmap page the love it deserves recently - I think our release  blog posts try to give the best high-level overview of improvements, and they all contain an sort of table-of-contents at the beginning.</p>
<p dir="auto">In the future, I'll try to get the roadmap page up to date (or others can contribute via a PR to <a href="https://github.com/microsoft/TypeScript-wiki">https://github.com/microsoft/TypeScript-wiki</a>).</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">❤️</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/mrazauskas.png?size=40"/>@mrazauskas</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1786553949"><span title="10/30/2023 11:54:58 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Thanks for keeping Releases section up to date.</p>
<p dir="auto">Just a detail. 5.3 Beta should have 'Pre-release' label instead of 'Latest release'.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1786844779"><span title="10/31/2023 2:35:49 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Oops, sorry, that was my fault. Should be fixed now.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/DanielRosenwasser.png?size=40"/>@DanielRosenwasser</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1787644086"><span title="10/31/2023 10:15:00 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> sync release-5.3</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1787644263"><span title="10/31/2023 10:15:07 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a>, I've started to sync <code class="notranslate">release-5.3</code> with main for you. <a href="https://github.com/microsoft/TypeScript/actions/runs/6358420654">Here's the link to my best guess at the log</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/DanielRosenwasser.png?size=40"/>@DanielRosenwasser</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1787670759"><span title="10/31/2023 10:31:37 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> bump release-5.3</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1787670933"><span title="10/31/2023 10:31:43 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a>, I've started to update the version number on <code class="notranslate">release-5.3</code> to <code class="notranslate">5.3.1-rc</code> for you. <a href="https://github.com/microsoft/TypeScript/actions/runs/6710121036">Here's the link to my best guess at the log</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/DanielRosenwasser.png?size=40"/>@DanielRosenwasser</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1788132279"><span title="10/31/2023 3:40:18 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> sync release-5.3</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/issues/55486#issuecomment-1788132403"><span title="10/31/2023 3:40:26 PM">23 hours ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a>, I've started to sync <code class="notranslate">release-5.3</code> with main for you. <a href="https://github.com/microsoft/TypeScript/actions/runs/6710326995">Here's the link to my best guess at the log</a>.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/25600"><span class="OPEN">⊚</span> <span class="number-ref">#25600</span></a> tsc --build / Project References Feedback &amp; Discussion</h1><span class="label" style="background-color:#5319e7;">Discussion</span><span class="label" style="background-color:#f93fdb;">Scenario: Monorepos &amp; Cross-Project References</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">35</span></span><span class="reaction-group"><span class="emoji">❤️</span><span class="count">6</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sheetalkamat.png?size=40"/>@sheetalkamat</span> <a href="https://github.com/microsoft/TypeScript/issues/25600#issuecomment-1783320901"><span title="10/27/2023 11:15:59 AM">6 days ago</span></a></span><div class="comment-body"><p dir="auto"><a href="https://www.typescriptlang.org/tsconfig#maxNodeModuleJsDepth" rel="nofollow">https://www.typescriptlang.org/tsconfig#maxNodeModuleJsDepth</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/eabrouwer3.png?size=40"/>@eabrouwer3</span> <a href="https://github.com/microsoft/TypeScript/issues/25600#issuecomment-1787434062"><span title="10/31/2023 8:19:07 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Hey all! I tried searching through GitHub issues to see if there's a reason this wouldn't work or hasn't been done, but I've got a project with 8 libs and 3 apps using project references. It follows this basic structure:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="tsconfig.base.json
workspaces/
  apps/
    app-1/
      tsconfig.json
    app-2/
      tsconfig.json
    .../
  libs/
    lib-1/
      tsconfig.json
    lib-2/
      tsconfig.json
    .../"><pre class="notranslate"><code class="notranslate">tsconfig.base.json
workspaces/
  apps/
    app-1/
      tsconfig.json
    app-2/
      tsconfig.json
    .../
  libs/
    lib-1/
      tsconfig.json
    lib-2/
      tsconfig.json
    .../
</code></pre></div>
<p dir="auto">There's a little more complexity, but that's the basic idea. However, I have a ton of repetition between all my <code class="notranslate">tsconfig.json</code> files that basically all look like this:</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;extends&quot;: [&quot;../../../tsconfig.base.json&quot;],
  &quot;references&quot;: [
    {
      &quot;path&quot;: &quot;../../libs/lib-1&quot;
    },
    {
      &quot;path&quot;: &quot;../../libs/lib-2&quot;
    },
    // ...
  ]
}"><pre class="notranslate">{
  <span class="pl-ent">"extends"</span>: [<span class="pl-s"><span class="pl-pds">"</span>../../../tsconfig.base.json<span class="pl-pds">"</span></span>],
  <span class="pl-ent">"references"</span>: [
    {
      <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>../../libs/lib-1<span class="pl-pds">"</span></span>
    },
    {
      <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>../../libs/lib-2<span class="pl-pds">"</span></span>
    },
    <span class="pl-ii">// ...</span>
  ]
}</pre></div>
<p dir="auto">It would be super nice if we could use a wildcard/glob in situations like <a href="https://github.com/microsoft/TypeScript/issues/25376#issuecomment-402302343" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/25376/hovercard">this</a>, where I could simply have all of my <code class="notranslate">tsconfig.json</code> files look like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{
  &quot;extends&quot;: [&quot;../../../tsconfig.base.json&quot;],
  &quot;references&quot;: [&quot;../../libs/*&quot;]
}"><pre class="notranslate"><code class="notranslate">{
  "extends": ["../../../tsconfig.base.json"],
  "references": ["../../libs/*"]
}
</code></pre></div>
<p dir="auto">It also makes it way easier to add new libs/apps in the future to the monorepo. Also, I did try this and it does indeed not work:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="error TS5083: Cannot read file '/Users/ebrouwer.dev/source/taxbit/belt/workspaces/libs/*/tsconfig.json'."><pre class="notranslate"><code class="notranslate">error TS5083: Cannot read file '/Users/ebrouwer.dev/source/taxbit/belt/workspaces/libs/*/tsconfig.json'.
</code></pre></div>
<p dir="auto">I'm happy to try and write a PR if people think this is possible and useful! Also happy to make a separate issue for this specifically, but this seemed like a fairly active ticket and the right place to start the discussion. Thanks!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/25600#issuecomment-1787909644"><span title="10/31/2023 12:34:31 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/eabrouwer3/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/eabrouwer3">@eabrouwer3</a> yes, a separate issue on that would be great. Thanks!</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/eabrouwer3.png?size=40"/>@eabrouwer3</span> <a href="https://github.com/microsoft/TypeScript/issues/25600#issuecomment-1788092630"><span title="10/31/2023 2:56:30 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto"><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1971192648" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56279" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56279/hovercard" href="https://github.com/microsoft/TypeScript/issues/56279">#56279</a> in case anyone's interested.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/41745"><span class="OPEN">⊚</span> <span class="number-ref">#41745</span></a> Parameters required by default when generating modules from JavaScript files</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/41745#issuecomment-737588485"><span title="12/2/2020 4:54:59 PM">on 12/2/2020</span></a></span><div class="comment-body"><p dir="auto">This is the intended behavior (<em>most</em> parameters are required) but some configurability might be something that a lot of people want, if there's evidence for that.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/41745#issuecomment-1787972198"><span title="10/31/2023 1:18:30 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I don't understand the <a href="https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html#function-parameters-are-optional-by-default" rel="nofollow">decision to make all parameters optional in js</a> (even with ts-check and latest target), and the inconsistency that is shown there (in-ide typechecking vs generated .d.ts). IMO params should be required by default even in js since you can just write <code class="notranslate">a = undefined</code> in parameter</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/41745#issuecomment-1788072003"><span title="10/31/2023 2:37:32 PM">1 day ago</span></a></span><div class="comment-body"><p dir="auto">The goal of JS inference is to infer behavior from <em>existing</em> code that was written without knowledge of TypeScript. Since <code class="notranslate">= undefined</code> was not (and is not) idiomatic JS for indicating an optional parameter, we went with the more permissive rule. With the default parameter type being <code class="notranslate">any</code>, it also doesn't really make sense to allow <code class="notranslate">f(3, undefined)</code> but not <code class="notranslate">f(3)</code> - those are for all intents and purposes the same call. If you want more accurate info, JS Doc is there.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56220"><span class="OPEN">∏</span> <span class="number-ref">#56220</span></a> Better completion for property access of computed properties</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="10/25/2023 12:22:06 PM">on 10/25/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gabritto.png?size=40"/>@gabritto</span> <a href="https://github.com/microsoft/TypeScript/pull/56220#issuecomment-1787778194"><span title="10/31/2023 11:36:40 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> pack this</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56220#issuecomment-1787778314"><span title="10/31/2023 11:36:43 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/gabritto/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gabritto">@gabritto</a>, I've started to run the tarball bundle task on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/825f71be6ec841529baa1db5a70494529443ad7e/hovercard" href="https://github.com/microsoft/TypeScript/commit/825f71be6ec841529baa1db5a70494529443ad7e"><tt>825f71b</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158414" rel="nofollow">here</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56220#issuecomment-1787783006"><span title="10/31/2023 11:38:49 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Hey <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/gabritto/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gabritto">@gabritto</a>, I've packed this into <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158414/artifacts?artifactName=tgz&amp;fileId=2A45EB82B73EAB8E3099A28A01A1A3B9CAFBCE7179BC1A2BDC4B6A53301F59AA02&amp;fileName=/typescript-5.3.0-insiders.20231031.tgz" rel="nofollow">an installable tgz</a>. You can install it for testing by referencing it in your <code class="notranslate">package.json</code> like so:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{
    &quot;devDependencies&quot;: {
        &quot;typescript&quot;: &quot;https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158414/artifacts?artifactName=tgz&amp;fileId=2A45EB82B73EAB8E3099A28A01A1A3B9CAFBCE7179BC1A2BDC4B6A53301F59AA02&amp;fileName=/typescript-5.3.0-insiders.20231031.tgz&quot;
    }
}"><pre class="notranslate"><code class="notranslate">{
    "devDependencies": {
        "typescript": "https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_apis/build/builds/158414/artifacts?artifactName=tgz&amp;fileId=2A45EB82B73EAB8E3099A28A01A1A3B9CAFBCE7179BC1A2BDC4B6A53301F59AA02&amp;fileName=/typescript-5.3.0-insiders.20231031.tgz"
    }
}
</code></pre></div>
<p dir="auto">and then running <code class="notranslate">npm install</code>.</p>
<hr>
<p dir="auto">There is also a playground <a href="https://www.staging-typescript.org/play?ts=5.3.0-pr-56220-2" rel="nofollow">for this build</a> and an <a href="https://www.npmjs.com/package/@typescript-deploys/pr-build/v/5.3.0-pr-56220-2" rel="nofollow">npm</a> module you can use via <code class="notranslate">"typescript": "npm:@typescript-deploys/pr-build@5.3.0-pr-56220-2"</code>.;</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gabritto.png?size=40"/>@gabritto</span> <a href="https://github.com/microsoft/TypeScript/pull/56220#issuecomment-1787931944"><span title="10/31/2023 12:46:40 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Improvement suggestion:<br>
My understanding is that, with this PR, if we can't find an already-imported way to offer the computed property, we won't offer it in this new way and will default to the old way instead. Now, the old way already supports auto-importing symbols when possible. Could we make the new way also auto-import symbols?</p>
<p dir="auto">Example:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// @filename: ex.ts
export type T = {
    [Sym.sym]: number;
}
export namespace Sym {
    export const sym = Symbol(&quot;unique!&quot;);
}
// @filename: index.ts
import { T } from &quot;./ex&quot;;

declare const obj: T;
obj.|"><pre class="notranslate"><span class="pl-c">// <span class="pl-k">@filename</span>: ex.ts</span>
<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">T</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-kos">[</span><span class="pl-smi">Sym</span><span class="pl-kos">.</span><span class="pl-c1">sym</span><span class="pl-kos">]</span>: <span class="pl-smi">number</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>
<span class="pl-k">export</span> <span class="pl-k">namespace</span> <span class="pl-smi">Sym</span> <span class="pl-kos">{</span>
    <span class="pl-k">export</span> <span class="pl-k">const</span> <span class="pl-s1">sym</span> <span class="pl-c1">=</span> <span class="pl-smi">Symbol</span><span class="pl-kos">(</span><span class="pl-s">"unique!"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>
<span class="pl-c">// <span class="pl-k">@filename</span>: index.ts</span>
<span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">T</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"./ex"</span><span class="pl-kos">;</span>

<span class="pl-k">declare</span> <span class="pl-k">const</span> <span class="pl-s1">obj</span>: <span class="pl-smi">T</span><span class="pl-kos">;</span>
<span class="pl-s1">obj</span><span class="pl-kos">.</span><span class="pl-c1">|</span></pre></div>
<p dir="auto">Since we don't have <code class="notranslate">Sym</code> imported from <code class="notranslate">"ex.ts"</code>, we will default to offering a completion for <code class="notranslate">Sym</code> and auto-importing it.<br>
We could, I imagine, suggest the new completion for <code class="notranslate">Sym.sym</code> and auto-import <code class="notranslate">Sym</code>.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/49220"><span class="OPEN">⊚</span> <span class="number-ref">#49220</span></a> Proposal: JSDoc tag to specify preferred type</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">22</span></span><span class="reaction-group"><span class="emoji">🎉</span><span class="count">4</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">7</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gabritto.png?size=40"/>@gabritto</span> <a href="https://github.com/microsoft/TypeScript/issues/49220#issuecomment-1736041492"><span title="9/26/2023 11:11:17 AM">on 9/26/2023</span></a></span><div class="comment-body"><p dir="auto">Thanks for the example. I think we're inclined to go with a non-JSDoc approach, one of the main reasons being that we would need to support type parameter instantiation. So if/when we come up with an alternative, we'd probably want to stop supporting <code class="notranslate">string &amp; {}</code> at some point, but we'd make sure the existing use cases are supported.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/nmay231.png?size=40"/>@nmay231</span> <a href="https://github.com/microsoft/TypeScript/issues/49220#issuecomment-1787861379"><span title="10/31/2023 12:13:30 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Not certain if this comparison has been made in other threads, but there is already a way to get 'suggested' values on the <strong>inside</strong> of functions using generics. Autocomplete doesn't work outside of the function, unfortunately. And it's a little quirky as to the types you get inside.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="function funky&lt;K extends &quot;a&quot; | &quot;b&quot;&gt;(arg: K | string) {
	if (arg === &quot;a&quot;) { // arg autocompletes to &quot;a&quot; | &quot;b&quot;
		arg;
		//^?(parameter) arg: &quot;a&quot; | K
		onlyA(arg); // Still works though
	} else if (arg === &quot;b&quot;) {
		arg;
		//^?(parameter) arg: &quot;b&quot; | K
	} else {
		arg;
		//^?(parameter) arg: string | K
	}
}

function onlyA(arg: &quot;a&quot;) {console.log(&quot;AAAAAAAAAAAAAA&quot;)}

funky(&quot;&quot;) // No intellisense here though... :("><pre class="notranslate"><span class="pl-k">function</span> <span class="pl-en">funky</span><span class="pl-c1">&lt;</span><span class="pl-smi">K</span> <span class="pl-k">extends</span> <span class="pl-s">"a"</span> <span class="pl-c1">|</span> <span class="pl-s">"b"</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-smi">K</span> <span class="pl-c1">|</span> <span class="pl-smi">string</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
	<span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">arg</span> <span class="pl-c1">===</span> <span class="pl-s">"a"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-c">// arg autocompletes to "a" | "b"</span>
		<span class="pl-s1">arg</span><span class="pl-kos">;</span>
		<span class="pl-c">//^?(parameter) arg: "a" | K</span>
		<span class="pl-en">onlyA</span><span class="pl-kos">(</span><span class="pl-s1">arg</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Still works though</span>
	<span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">arg</span> <span class="pl-c1">===</span> <span class="pl-s">"b"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
		<span class="pl-s1">arg</span><span class="pl-kos">;</span>
		<span class="pl-c">//^?(parameter) arg: "b" | K</span>
	<span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
		<span class="pl-s1">arg</span><span class="pl-kos">;</span>
		<span class="pl-c">//^?(parameter) arg: string | K</span>
	<span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">function</span> <span class="pl-en">onlyA</span><span class="pl-kos">(</span><span class="pl-s1">arg</span>: <span class="pl-s">"a"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"AAAAAAAAAAAAAA"</span><span class="pl-kos">)</span><span class="pl-kos">}</span>

<span class="pl-en">funky</span><span class="pl-kos">(</span><span class="pl-s">""</span><span class="pl-kos">)</span> <span class="pl-c">// No intellisense here though... :(</span></pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/55558"><span class="MERGED">∏</span> <span class="number-ref">#55558</span></a> Allow of in `await using` declarations in for-of loops</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="8/29/2023 1:13:26 PM">on 8/29/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> closed <span class="timestamp"><span title="10/31/2023 12:06:37 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/55558#issuecomment-1787854467"><span title="10/31/2023 12:10:23 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Note that 5.3 is cut; not sure if you intended for this to be in 5.3 or not.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55555"><span class="CLOSED">⊚</span> <span class="number-ref">#55555</span></a> Parsing error for `for (await using of of of) {}`</h1><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">😕</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="8/29/2023 1:13:27 PM">on 8/29/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> <a href="https://github.com/microsoft/TypeScript/issues/55555#issuecomment-1785905004"><span title="10/30/2023 12:30:40 PM">3 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Does this ever happen with real code, or is it just an attempt to intentionally <em>break</em> the parser?</p>
</blockquote>
<p dir="auto">It's a spec conformance issue. The spec specifically forbids <code class="notranslate">for (using of of</code> since that can be ambiguous (<code class="notranslate">using</code> could be an identifier like <code class="notranslate">x</code> in <code class="notranslate">for (x of of</code>, or <code class="notranslate">of</code> could be either an identifier or a keyword), while <code class="notranslate">for (await using of of</code> is unambiguous (<code class="notranslate">await using</code> can only imply the declaration, thus <code class="notranslate">await using of</code> must declare an identifier).</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> closed <span class="timestamp"><span title="10/31/2023 12:06:39 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/42877"><span class="OPEN">⊚</span> <span class="number-ref">#42877</span></a> Extending @typedefs by adding additional properties doesn't seem to work?</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">Needs Proposal</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> <a href="https://github.com/microsoft/TypeScript/issues/42877#issuecomment-1781890424"><span title="10/26/2023 2:02:45 PM">on 10/26/2023</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">But pretty much any existing codebase that defines an interface and uses interface Child extends Parent would arguably be evidence for this use case.</p>
</blockquote>
<p dir="auto">I think you're better off specifying an <code class="notranslate">@interface</code> tag since <code class="notranslate">@typedef</code> is the equivalent of Typescript type aliases, which do not support inheritance. <code class="notranslate">@interface</code> is tracked by <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="750017492" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/41675" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/41675/hovercard" href="https://github.com/microsoft/TypeScript/issues/41675">#41675</a></p>
<p dir="auto">Of course on that issue you'll need to discuss "Why not .d.ts files". Feel free to ping me on that; my quick opinion is that dividing <code class="notranslate">import/import</code> type is a <em>good</em> thing. But I'd like to understand the build problems for library maintainers better.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/42877#issuecomment-1786048043"><span title="10/30/2023 2:08:19 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Thanks for referencing that issue! I'll add some comments tomorrow -- Lord wiling.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/42877#issuecomment-1787837660"><span title="10/31/2023 12:02:46 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Added.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/41675"><span class="OPEN">⊚</span> <span class="number-ref">#41675</span></a> JSDoc : support @interface and @implements (and more)</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">5</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Binote.png?size=40"/>@Binote</span> <a href="https://github.com/microsoft/TypeScript/issues/41675#issuecomment-990004473"><span title="12/9/2021 8:19:43 AM">on 12/9/2021</span></a></span><div class="comment-body"><p dir="auto">I also really need '<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/interface/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/interface">@interface</a>' support, I expect to use type federation in JS to support multiple type merges (based on JSDoc)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ITenthusiasm.png?size=40"/>@ITenthusiasm</span> <a href="https://github.com/microsoft/TypeScript/issues/41675#issuecomment-1787814780"><span title="10/31/2023 11:52:46 AM">2 days ago</span></a></span><div class="comment-body"><h1 dir="auto">Potential Use Cases for <code class="notranslate">Interface</code>s in JSDocs</h1>
<p dir="auto">Pinging <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sandersn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sandersn">@sandersn</a> as requested in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="811899514" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/42877" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/42877/hovercard" href="https://github.com/microsoft/TypeScript/issues/42877">#42877</a>.</p>
<h2 dir="auto">Extending Interfaces That an Application or Library <em>Does Not Own</em></h2>
<p dir="auto">Currently, I'm working on a JS library that will work in all JS applications. Let's call it, <code class="notranslate">@my-scope/core</code>. For the sake of developer experience, I'm also releasing framework-specific integrations of this package. These packages make adoption of the <code class="notranslate">core</code> library easier by making the tool more ergonomic in the framework where it's used.  This means I have packages like <code class="notranslate">@my-scope/svelte</code>, <code class="notranslate">@my-scope/react</code>, etc.</p>
<p dir="auto">All of these packages are intended to use regular JS Files. (There are no TypeScript files, except when <code class="notranslate">.d.ts</code> is necessary to get the features that are lacking in JSDocs.) All of the framework-integration packages <em>build on top of</em> the <code class="notranslate">core</code>. In part, this means that some of the types in the <code class="notranslate">core</code> get reused in a framework integration. Such reuse may look something like the following (<em>if</em> I was using TypeScript):</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Somewhere `@my-scope/core`
interface CoreInterface {
  common-prop: string;
  overridable-prop: HTMLElement;
}

// Somewhere in `@my-scope/react`
interface ReactInterface extends Pick&lt;CoreInterface, &quot;common-prop&quot;&gt; {
  overridable-prop: React.ReactElement;
}"><pre class="notranslate"><span class="pl-c">// Somewhere `@my-scope/core`</span>
<span class="pl-k">interface</span> <span class="pl-smi">CoreInterface</span> <span class="pl-kos">{</span>
  <span class="pl-c1">common</span><span class="pl-c1">-</span><span class="pl-c1">prop</span>: <span class="pl-smi">string</span><span class="pl-kos">;</span>
  <span class="pl-c1">overridable</span><span class="pl-c1">-</span><span class="pl-c1">prop</span>: <span class="pl-smi">HTMLElement</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-c">// Somewhere in `@my-scope/react`</span>
<span class="pl-k">interface</span> <span class="pl-smi">ReactInterface</span> <span class="pl-k">extends</span> <span class="pl-smi">Pick</span><span class="pl-kos">&lt;</span><span class="pl-smi">CoreInterface</span><span class="pl-kos">,</span> <span class="pl-s">"common-prop"</span><span class="pl-kos">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">overridable</span><span class="pl-c1">-</span><span class="pl-c1">prop</span>: <span class="pl-smi">React</span><span class="pl-kos">.</span><span class="pl-smi">ReactElement</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">The biggest benefit of <code class="notranslate">interface</code> + <code class="notranslate">extends</code> here is reuse. Currently, I have a <code class="notranslate">core</code> and 4 supported JS Frameworks. It would be difficult, tedious, and (worst of all) error prone to try to repeat + synchronize the common prop names, prop types, and <em>especially</em> the prop documentations across 5 different libraries. If <code class="notranslate">@interface</code> existed with support for <code class="notranslate">@extends</code>, I could reuse my types and documentation as desired.</p>
<p dir="auto"><strong>Currently, my <code class="notranslate">core</code> package defines <code class="notranslate">@typedef</code>s, not <code class="notranslate">interface</code>s</strong>. But since there's no way to extend these types with JSDocs, I have to create <code class="notranslate">.d.ts</code> files in the framework packages. This means I end up creating a separate file for an augmented type that will <em>only</em> be used in a single JS file in a given framework package. This is undesirable because the maintainer has to leave their context (the <code class="notranslate">.js</code> file or the <code class="notranslate">.d.ts</code> file) to get the "full story" for a certain piece of functionality. Users of <code class="notranslate">.ts</code> files do not have this problem.</p>
<h2 dir="auto">Extensive Documentation for Methods on an Interface</h2>
<p dir="auto">Currently, it's possible to document all of the details of a method defined on an interface. This includes overloads.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyInterface {
  /**
   * Does something really cool
   * @param a Some string that does some stuff
   * @param b Some number that isn't interesting
   * @returns `true` or `false`
   */
  method(a: string, b: number): boolean;

  /**
   * Does something that isn't as interesting as the first overload
   * @param a You can choose `true` or `false`
   * @param b Your coolest object
   * @returns Our opinion about your parameters
   */
  method(a: boolean, b: object): string;
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span>
  <span class="pl-c">/**</span>
<span class="pl-c">   * Does something really cool</span>
<span class="pl-c">   * <span class="pl-k">@param</span> a Some string that does some stuff</span>
<span class="pl-c">   * <span class="pl-k">@param</span> b Some number that isn't interesting</span>
<span class="pl-c">   * <span class="pl-k">@returns</span> `true` or `false`</span>
<span class="pl-c">   */</span>
  <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">a</span>: <span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-s1">b</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi">boolean</span><span class="pl-kos">;</span>

  <span class="pl-c">/**</span>
<span class="pl-c">   * Does something that isn't as interesting as the first overload</span>
<span class="pl-c">   * <span class="pl-k">@param</span> a You can choose `true` or `false`</span>
<span class="pl-c">   * <span class="pl-k">@param</span> b Your coolest object</span>
<span class="pl-c">   * <span class="pl-k">@returns</span> Our opinion about your parameters</span>
<span class="pl-c">   */</span>
  <span class="pl-c1">method</span><span class="pl-kos">(</span><span class="pl-s1">a</span>: <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-s1">b</span>: <span class="pl-smi">object</span><span class="pl-kos">)</span>: <span class="pl-smi">string</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Unfortunately, none of this is possible with <code class="notranslate">@typedef</code> (to my knowledge). You can certainly document a <em>property</em> that behaves like a function:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="/**
 * @typedef {Object} MyInterface
 * @property {((a: string, b: number) =&gt; boolean) | ((a: boolean, b: object) =&gt; string)} Uh... 
 * This does something depending on how you use it. Take your best guess?
 */"><pre class="notranslate"><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@typedef</span> {Object} MyInterface</span>
<span class="pl-c"> * <span class="pl-k">@property</span> {<span class="pl-smi">((a: string, b: number) =&gt; boolean) | ((a: boolean, b: object) =&gt; string)</span>} Uh... </span>
<span class="pl-c"> * This does something depending on how you use it. Take your best guess?</span>
<span class="pl-c"> */</span></pre></div>
<p dir="auto">But you can't provide <em>proper documentation</em> for parameters, return values, overloads, and the like. You could try to write the documentation for <em>everything</em> on a single property. But it's obvious how that could get verbose, overwhelming, and unhelpful very quickly.</p>
<p dir="auto">As you could guess, I also need this for the package that I mentioned earlier. Without it, I have to defer to <code class="notranslate">.d.ts</code> files again. But I don't want to reach for <code class="notranslate">.d.ts</code> files as a maintainer.</p>
<h2 dir="auto">What's Wrong with <code class="notranslate">.d.ts</code> Files?</h2>
<p dir="auto">Nothing! I like them! But for projects where JSDocs are being used, I'd like to stay in JSDocs land as much as possible. I think that what's coming out in issues like these is that developers would like a "Consistent TypeScript Experience" whether they're using JSDocs or TypeScript files. Part of that consistent experience is being able to collocate types with logic. (If that isn't interesting to the team, that might be worth documenting somewhere for clarity -- though it would be unfortunate. 😭) In TypeScript, I could write</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export function myFunction(a: string, b: number): MyInterface { /* ... */ }
export interface MyInterface { /* ... */ }"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">function</span> <span class="pl-en">myFunction</span><span class="pl-kos">(</span><span class="pl-s1">a</span>: <span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-s1">b</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span>
<span class="pl-k">export</span> <span class="pl-k">interface</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span></pre></div>
<p dir="auto">This approach has two benefits. <strong>First</strong>, <em>users</em> can import my tools <em>with</em> their related types from the same place. This makes it clearer where everything is located.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import { myFunction } from &quot;my-library&quot;;
import type { MyInterface } from &quot;my-library&quot;;"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">myFunction</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"my-library"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-k">type</span> <span class="pl-kos">{</span> <span class="pl-smi">MyInterface</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"my-library"</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><strong>Second</strong>,  <em>developers/maintainers</em> never have to change context to understand what's going on. There's no jumping to another file to understand a type that <em>only</em> relates to this single file. In other words, there's no need for something like this</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import type { MyInterfaceOnlyRelatedToMyFunction } from &quot;./filename-types.d.ts&quot;;
export function myFunction(a: string, b: number): MyInterfaceOnlyRelatedToMyFunction { /* ... */ }"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-k">type</span> <span class="pl-kos">{</span> <span class="pl-smi">MyInterfaceOnlyRelatedToMyFunction</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"./filename-types.d.ts"</span><span class="pl-kos">;</span>
<span class="pl-k">export</span> <span class="pl-k">function</span> <span class="pl-en">myFunction</span><span class="pl-kos">(</span><span class="pl-s1">a</span>: <span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-s1">b</span>: <span class="pl-smi">number</span><span class="pl-kos">)</span>: <span class="pl-smi">MyInterfaceOnlyRelatedToMyFunction</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span></pre></div>
<p dir="auto">Instead, everything is defined in the same place. So it's easier for the developer to know what's going on. This also saves users from having to search around to know where a type related to a specific file is located. The following is undesirable:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import { myFunction } from &quot;my-library&quot;;
import type { MyInterfaceOnlyRelatedToMyFunction } from &quot;my-library/where-do-i-go-for-this-type&quot;;"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">myFunction</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"my-library"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-k">type</span> <span class="pl-kos">{</span> <span class="pl-smi">MyInterfaceOnlyRelatedToMyFunction</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">"my-library/where-do-i-go-for-this-type"</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">As a library maintainer using JSDocs, I would like for my users to have a consistent experience. That is, I want <em>related</em> function/class definitions and type definitions to be importable from the same location. I think that's natural, and React Components do this all the time; it would be weird if you had to import <code class="notranslate">MyComponent</code> from one place and <code class="notranslate">MyComponentProps</code> from another place. (If there are <em>general</em> types that are used <em>across</em> the project, I think <code class="notranslate">.d.ts</code> files make more sense than <code class="notranslate">.js</code> files. This creates a central place where <em>common, reusable</em> types exist, and it prevents library bundles from getting littered with useless <code class="notranslate">export {}</code> JS files. However, I'm not talking about general/common types right now.)</p>
<p dir="auto">But here's the problem I run into... Let's saying I'm creating a JS file with types created via JSDocs:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// my-file.js

/**
 * @typedef {Object} MyType
 * @property {string} first-prop
 */

/**
 * Does something
 * @param {MyType} first A parameter that does stuff
 * @returns {void}
 */
function someFunction(first) { /* ... */ }"><pre class="notranslate"><span class="pl-c">// my-file.js</span>

<span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@typedef</span> {Object} MyType</span>
<span class="pl-c"> * <span class="pl-k">@property</span> {<span class="pl-smi">string</span>} first-prop</span>
<span class="pl-c"> */</span>

<span class="pl-c">/**</span>
<span class="pl-c"> * Does something</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {<span class="pl-smi">MyType</span>} first A parameter that does stuff</span>
<span class="pl-c"> * <span class="pl-k">@returns</span> {<span class="pl-smi">void</span>}</span>
<span class="pl-c"> */</span>
<span class="pl-k">function</span> <span class="pl-en">someFunction</span><span class="pl-kos">(</span><span class="pl-s1">first</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-c">/* ... */</span> <span class="pl-kos">}</span></pre></div>
<p dir="auto">Then I realize some time later that my file needs an interface that adds good documentation for methods. Well, I can't add add that to my JS file. So I have to define it in a separate <code class="notranslate">.d.ts</code> file. Where do I place it? It's not a general type belonging to the entire project. It's a type that only belongs to the JS file, and a type that would only be exported <em>from</em> that file if I was using regular TS. So the type doesn't belong in a "General Library Types" <code class="notranslate">.d.ts</code> file. I can't place the type in <code class="notranslate">my-file.d.ts</code> because the compiler would get confused. And it's too much effort to try to join the types together manually post-build. So I create <code class="notranslate">my-file-types.d.ts</code> instead. But there are problems that come with this:</p>
<h3 dir="auto">Inconsistent User Experience</h3>
<p dir="auto">Now, consumers of the project start seeing inconsistencies throughout it. There are some files that export <em>all</em> of their types and <em>all</em> of their logic from one place because the types are simple enough to be supported by JSDocs alone. Then, because JSDoc <code class="notranslate">@typedef</code>s will always be exported, there are other parts of the library where the JS file only exports a <em>subset</em> of the available types, and the remainder of the types must be found in a separate file. Will this file be easy for consumers to find?</p>
<h3 dir="auto">File Structure Bloat for Maintainers</h3>
<p dir="auto">For every JS file that can't be typed with JSDocs alone, a new file has to get added to the project. Extendable <code class="notranslate">interface</code>s are a basic TypeScript feature. So if a project is sufficiently sized, it won't take too long for the file structure of the project to become more and more bloated. Naming conventions could be created in the project to prevent this from causing chaos, but to me this shouldn't be necessary.</p>
<h3 dir="auto"><code class="notranslate">package.json</code> Bloat for Maintainers</h3>
<p dir="auto">The project that I'm working on is mainly intended for the frontend. But the JS Framework integration packages require some server side rendering logic. Some SSR frameworks are used with CJS, so I need to support both ESM <em>and</em> CJS. Unfortunately, this means that <em>for each JS file</em> that requires an extra <code class="notranslate">.d.ts</code> file to compensate for JSDocs, the <code class="notranslate">package.json</code> file increases in bulk. What would ideally be the following</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;type&quot;: &quot;module&quot;,
  &quot;exports&quot;: {
    &quot;./filename&quot;: {
      &quot;require&quot;: {
        &quot;types&quot;: &quot;./filename.d.cts&quot;,
        &quot;default&quot;: &quot;./filename.cjs&quot;
      },
      &quot;types&quot;: &quot;./filename.d.ts&quot;
      &quot;default&quot;: &quot;./filename.js&quot;
    }
}"><pre class="notranslate">{
  <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>module<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"exports"</span>: {
    <span class="pl-ent">"./filename"</span>: {
      <span class="pl-ent">"require"</span>: {
        <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.d.cts<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"default"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.cjs<span class="pl-pds">"</span></span>
      },
      <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.d.ts<span class="pl-pds">"</span></span>
      <span class="pl-ent">"default"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.js<span class="pl-pds">"</span></span>
    }
}</pre></div>
<p dir="auto">is unpleasantly expanded to</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
  &quot;type&quot;: &quot;module&quot;,
  &quot;exports&quot;: {
    &quot;./filename&quot;: {
      &quot;require&quot;: {
        &quot;types&quot;: &quot;./filename.d.cts&quot;,
        &quot;default&quot;: &quot;./filename.cjs&quot;
      },
      &quot;types&quot;: &quot;./filename.d.ts&quot;
      &quot;default&quot;: &quot;./filename.js&quot;
    },
    &quot;./filename-types&quot;: {
      &quot;require&quot;: {
        &quot;types&quot;: &quot;./filename-types.d.cts&quot;
      },
      &quot;types&quot;: &quot;./filename-types.d.ts&quot;
    }
}"><pre class="notranslate">{
  <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>module<span class="pl-pds">"</span></span>,
  <span class="pl-ent">"exports"</span>: {
    <span class="pl-ent">"./filename"</span>: {
      <span class="pl-ent">"require"</span>: {
        <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.d.cts<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"default"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.cjs<span class="pl-pds">"</span></span>
      },
      <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.d.ts<span class="pl-pds">"</span></span>
      <span class="pl-ent">"default"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename.js<span class="pl-pds">"</span></span>
    },
    <span class="pl-ent">"./filename-types"</span>: {
      <span class="pl-ent">"require"</span>: {
        <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename-types.d.cts<span class="pl-pds">"</span></span>
      },
      <span class="pl-ent">"types"</span>: <span class="pl-s"><span class="pl-pds">"</span>./filename-types.d.ts<span class="pl-pds">"</span></span>
    }
}</pre></div>
<p dir="auto">which is inconvenient for obvious reasons. Again, this happens for <em>every</em> JS file that can't be typed with JSDocs alone.</p>
<h2 dir="auto">Additional Comments</h2>
<p dir="auto">In the issue that I <a href="https://github.com/microsoft/TypeScript/issues/42877" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/42877/hovercard">referenced</a>, I referred to struggles with the build step for maintainers. I don't know if that was the correct terminology, per se. The lack of <code class="notranslate">interface</code> support in JSDocs does cause difficulties for library authors, as described above. But there are no hiccups in the TypeScript <em>compilation</em> step.</p>
<p dir="auto">Let me know if greater clarity is needed for what's been said or coded.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55427"><span class="OPEN">⊚</span> <span class="number-ref">#55427</span></a> Support per volume case sensitivity</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sheetalkamat.png?size=40"/>@sheetalkamat</span> <a href="https://github.com/microsoft/TypeScript/issues/55427#issuecomment-1724301210"><span title="9/18/2023 1:13:16 PM">on 9/18/2023</span></a></span><div class="comment-body"><p dir="auto">I have added few more search terms and probably will keep on eye on issues reported esp on Mac os for this and link them to this one for awareness.</p>
<p dir="auto">In the meantime, do you mind sharing tsserver log from this so that I can see if we can somehow unblock it a little bit easily without having to work on the whole thing. It would give inconsistent errors probably and things might not work as is but at least hoping that some of the places we are using "canonical paths" for existence/read checking can be moved to "file names" queried.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gluxon.png?size=40"/>@gluxon</span> <a href="https://github.com/microsoft/TypeScript/issues/55427#issuecomment-1787781845"><span title="10/31/2023 11:38:19 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Thanks Sheetal. I appreciate the help adding search terms and making this easier for others to find in the future. 🙂</p>
<blockquote>
<p dir="auto">In the meantime, do you mind sharing tsserver log from this so that I can see if we can somehow unblock it a little bit easily without having to work on the whole thing. It would give inconsistent errors probably and things might not work as is but at least hoping that some of the places we are using "canonical paths" for existence/read checking can be moved to "file names" queried.</p>
</blockquote>
<p dir="auto">Can do! I generated this <code class="notranslate">tsserver.log</code> from</p>
<ol dir="auto">
<li>Cloning <a href="https://github.com/gluxon/tsserver-new-file-intellisense-bug">https://github.com/gluxon/tsserver-new-file-intellisense-bug</a> to <code class="notranslate">/Volumes/git</code>.</li>
<li>I created a new <code class="notranslate">Bar.ts</code> file and attempted to import the <code class="notranslate">foo</code> identifier.</li>
</ol>
<p dir="auto">This works when using the project's <code class="notranslate">typescript.tsdk</code> instance, but fails when using VS Code's tsserver instance since the later is on a different volume. The log is using VS Code's tsserver.</p>
<p dir="auto"><a href="https://github.com/gluxon/tsserver-new-file-intellisense-bug/blob/main/sample-logs/2023-10-31%20tsserver.log">https://github.com/gluxon/tsserver-new-file-intellisense-bug/blob/main/sample-logs/2023-10-31%20tsserver.log</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/31/2023 12:30:50 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> removed <span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span> <span class="timestamp"><span title="10/31/2023 12:30:54 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56272"><span class="OPEN">⊚</span> <span class="number-ref">#56272</span></a> Infinities as number literal types</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jcalz.png?size=40"/>@jcalz</span> <a href="https://github.com/microsoft/TypeScript/issues/56272#issuecomment-1787736513"><span title="10/31/2023 11:13:05 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Cross-linking <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="464856984" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/32277" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/32277/hovercard" href="https://github.com/microsoft/TypeScript/issues/32277">#32277</a> and <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="451814728" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/31752" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/31752/hovercard" href="https://github.com/microsoft/TypeScript/issues/31752">#31752</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/31/2023 2:10:32 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556b75;">In Discussion</span> <span class="timestamp"><span title="10/31/2023 2:10:32 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/39133"><span class="OPEN">⊚</span> <span class="number-ref">#39133</span></a> Fails type check for type unions as keys to the Map constructor</h1><span class="label" style="background-color:#e11d21;">Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">5</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Twipped.png?size=40"/>@Twipped</span> <a href="https://github.com/microsoft/TypeScript/issues/39133#issuecomment-1536948811"><span title="5/5/2023 5:54:36 PM">on 5/5/2023</span></a></span><div class="comment-body"><p dir="auto">Related to this, I can't seem to use constructors as keys when defining a new Map. <a href="https://www.typescriptlang.org/play?filetype=js#code/MYewdgzgLgBGIgA4wLwwBQEpUD4YG8BfAbgChSB6AKipgAEoBPRAUwIFkBDRAHk7EYAaGE1YgAZnASIchGFQqlQkWAEkAygH0AMgHldAaQCqABVRwWAdxhdE6UjEcwA2g6fvnAQQBO3zkKkkAF1BN3dHZ10AIwArFmAoYXhg0PCnZwA5AFcAWyiWbyTpELDw53UobwBLMABzIpTSjwAhBAAbFn4GxBK0iNtu3r7ylkTAntThgBFOKBZBybTnACUWWoBRAA9EBab0rLAAExZxGpZD3b6XSqz58aGl8U42iDvkntKg0kwyIA" rel="nofollow">Playground</a></p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="/** @type {Map&lt;any, typeof noop&gt;} */
const IS_LOOKUP = new Map([
    [Array, noop],
    [Object, noop],
    [Number, noop],
    [String, noop],
    [Boolean, noop],
    [Map, noop],
    [Set, noop],
    [Date, noop],
    [RegExp, noop],
    [undefined, noop],
    [true, noop],
    [false, noop]
]);"><pre class="notranslate"><span class="pl-c">/** <span class="pl-k">@type</span> {Map&lt;any, typeof noop&gt;} */</span>
<span class="pl-k">const</span> <span class="pl-c1">IS_LOOKUP</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Map</span><span class="pl-kos">(</span><span class="pl-kos">[</span>
    <span class="pl-kos">[</span><span class="pl-v">Array</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Object</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Number</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">String</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Boolean</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Map</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Set</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">Date</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-v">RegExp</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-c1">undefined</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-s1">noop</span><span class="pl-kos">]</span>
<span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This only happens in annotated JS, though, <a href="https://www.typescriptlang.org/play?&amp;filetype=ts#code/MYewdgzgLgBGIgA4wLwwBQEpUD4YG8BfAbgChTRJYBJAZQH0AZAeWYGkBVABVTgFMA7jACyAQ0QAeUWACeAGhhQZiPiABmcBIhzpSMfTADaeg6cMBBAE6XR8zUgC6ck6f2HmAIwBWfYFAXwjs6uBoYAcgCuALYefJYBWk4uroa0UJYAlmAA5glByWYAQggANnzSeYhJIW5iiJXVNal8-vZVwU0AIqJQfA0dIYYASnzZAKIAHvVtDsmzmGRAA" rel="nofollow">it works fine if I do it in TS</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jonahallibone.png?size=40"/>@jonahallibone</span> <a href="https://github.com/microsoft/TypeScript/issues/39133#issuecomment-1787461084"><span title="10/31/2023 8:32:04 AM">2 days ago</span></a></span><div class="comment-body"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/8886318/279429985-c9413744-0abd-4b6b-b781-bd40b78363f3.png"><img width="558" alt="Screenshot 2023-10-31 at 11 31 46 AM" src="https://user-images.githubusercontent.com/8886318/279429985-c9413744-0abd-4b6b-b781-bd40b78363f3.png" style="max-width: 100%;"></a>
<p dir="auto">This yields</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="No overload matches this call.
  Overload 1 of 4, '(iterable?: Iterable&lt;readonly [string, string]&gt; | null | undefined): Map&lt;string, string&gt;', gave the following error.
    Argument of type 'string[]' is not assignable to parameter of type 'Iterable&lt;readonly [string, string]&gt;'.
      The types returned by '[Symbol.iterator]().next(...)' are incompatible between these types.
        Type 'IteratorResult&lt;string, any&gt;' is not assignable to type 'IteratorResult&lt;readonly [string, string], any&gt;'.
          Type 'IteratorYieldResult&lt;string&gt;' is not assignable to type 'IteratorResult&lt;readonly [string, string], any&gt;'.
            Type 'IteratorYieldResult&lt;string&gt;' is not assignable to type 'IteratorYieldResult&lt;readonly [string, string]&gt;'.
              Type 'string' is not assignable to type 'readonly [string, string]'.ts(2769)"><pre class="notranslate"><code class="notranslate">No overload matches this call.
  Overload 1 of 4, '(iterable?: Iterable&lt;readonly [string, string]&gt; | null | undefined): Map&lt;string, string&gt;', gave the following error.
    Argument of type 'string[]' is not assignable to parameter of type 'Iterable&lt;readonly [string, string]&gt;'.
      The types returned by '[Symbol.iterator]().next(...)' are incompatible between these types.
        Type 'IteratorResult&lt;string, any&gt;' is not assignable to type 'IteratorResult&lt;readonly [string, string], any&gt;'.
          Type 'IteratorYieldResult&lt;string&gt;' is not assignable to type 'IteratorResult&lt;readonly [string, string], any&gt;'.
            Type 'IteratorYieldResult&lt;string&gt;' is not assignable to type 'IteratorYieldResult&lt;readonly [string, string]&gt;'.
              Type 'string' is not assignable to type 'readonly [string, string]'.ts(2769)
</code></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/runarberg.png?size=40"/>@runarberg</span> <a href="https://github.com/microsoft/TypeScript/issues/39133#issuecomment-1787654132"><span title="10/31/2023 10:21:14 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jonahallibone/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jonahallibone">@jonahallibone</a> I think you are missing the array around your tuble:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="- const colSizes = new Map&lt;string, string&gt;([&quot;--table-width-total&quot;, &quot;96px&quot;]);
+ const colSizes = new Map&lt;string, string&gt;([[&quot;--table-width-total&quot;, &quot;96px&quot;]]);"><pre class="notranslate"><span class="pl-md"><span class="pl-md">-</span> const colSizes = new Map&lt;string, string&gt;(["--table-width-total", "96px"]);</span>
<span class="pl-mi1"><span class="pl-mi1">+</span> const colSizes = new Map&lt;string, string&gt;([["--table-width-total", "96px"]]);</span></pre></div></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👀</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jonahallibone.png?size=40"/>@jonahallibone</span> <a href="https://github.com/microsoft/TypeScript/issues/39133#issuecomment-1787669167"><span title="10/31/2023 10:30:36 AM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jonahallibone/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jonahallibone">@jonahallibone</a> I think you are missing the array around your tuble:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="- const colSizes = new Map&lt;string, string&gt;([&quot;--table-width-total&quot;, &quot;96px&quot;]);
+ const colSizes = new Map&lt;string, string&gt;([[&quot;--table-width-total&quot;, &quot;96px&quot;]]);"><pre class="notranslate"><span class="pl-md"><span class="pl-md">-</span> const colSizes = new Map&lt;string, string&gt;(["--table-width-total", "96px"]);</span>
<span class="pl-mi1"><span class="pl-mi1">+</span> const colSizes = new Map&lt;string, string&gt;([["--table-width-total", "96px"]]);</span></pre></div>
</blockquote>
<p dir="auto">lol you would be correct! Thanks for that. Had a bit tunnel vision</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55593"><span class="OPEN">⊚</span> <span class="number-ref">#55593</span></a> Go-to-definition on interfaces shadowed by namespaces opens a selection dialog instead of going to the interface, when used as one.</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">3</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/55593#issuecomment-1703548497"><span title="9/1/2023 5:18:18 PM">on 9/1/2023</span></a></span><div class="comment-body"><p dir="auto">I think that might be fine. In my experience, it’s hard to predict how much this kind of change will impact people. Hence “awaiting more feedback.” If the feedback is positive I think we could try it.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rattrayalex.png?size=40"/>@rattrayalex</span> <a href="https://github.com/microsoft/TypeScript/issues/55593#issuecomment-1787569258"><span title="10/31/2023 9:29:45 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Hey, this keeps coming up, and I'd be interested in funding someone to put up a PR with this behavior to try out and see if you like it. Would that be welcome?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/55593#issuecomment-1787659018"><span title="10/31/2023 10:24:14 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Putting up an experimental PR is always fine, with the caveat that having the work done doesn’t make the suggestion more likely to be accepted; there’s a risk of doing the work and having it go unmerged. But if you’re ok with that, go ahead! I can create an experimental playground / npm build from it.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/54254"><span class="OPEN">⊚</span> <span class="number-ref">#54254</span></a> Named/keyed type parameters</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">23</span></span><span class="reaction-group"><span class="emoji">🎉</span><span class="count">11</span></span><span class="reaction-group"><span class="emoji">❤️</span><span class="count">24</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">8</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/so1ve.png?size=40"/>@so1ve</span> <a href="https://github.com/microsoft/TypeScript/issues/54254#issuecomment-1702940510"><span title="9/1/2023 8:33:37 AM">on 9/1/2023</span></a></span><div class="comment-body"><p dir="auto">This feature is pretty useful! However, I would like to oppose the current proposed syntax, since it is ambiguous. Using <code class="notranslate">&lt;T = 1, U = 2&gt;</code> is not a good idea IMO - This syntax is more like <code class="notranslate">named parameters</code> in python, but js itself doesn't have such syntax, which causes inconsistency.</p>
<p dir="auto">Not a blocker! Just some suggestions. Since typescript itself has already introduced many non-js syntaxes to its Turing-complete type system, it won't be an issue if ts has introduced such python-like syntax to it.</p>
<p dir="auto">Any thoughts?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kronodeus.png?size=40"/>@kronodeus</span> <a href="https://github.com/microsoft/TypeScript/issues/54254#issuecomment-1787658283"><span title="10/31/2023 10:23:46 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Our library relies heavily on rich generic type parameters and this feature would be tremendously helpful to us. Anxiously watching this!</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56275"><span class="OPEN">⊚</span> <span class="number-ref">#56275</span></a> Replace Node interface with discriminated unions</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#ebff56;color:black;">Experimentation Needed</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56275#issuecomment-1787429247"><span title="10/31/2023 8:16:35 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/weswigham/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/weswigham">@weswigham</a> I know you were working on this somewhat recently too</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/issues/56275#issuecomment-1787501318"><span title="10/31/2023 8:53:27 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">For reference: Wes' PR can be found <a href="https://github.com/microsoft/TypeScript/pull/54148" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/54148/hovercard">here</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/weswigham.png?size=40"/>@weswigham</span> <a href="https://github.com/microsoft/TypeScript/issues/56275#issuecomment-1787637246"><span title="10/31/2023 10:10:45 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Yeah, I have a recentish branch there, the 2.7x slowdown in compilation time and editor performance hurts though. Personally, I'm of the opinion that we should just eat the difference and use the worsened conditions as a forcing function for self-improvement, but that order of operations isn't a popular one :P</p>
<p dir="auto">So... we <em>probably</em> can't take the change until we get the perf closer, which means looking into those traces <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a> took and trying to optimize those cases.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56275#issuecomment-1787652920"><span title="10/31/2023 10:20:31 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">It really goes to show how bad my memory is to not remember that there already was a PR, and also I reviewed it.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">😆</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/31/2023 2:06:50 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#ebff56;color:black;">Experimentation Needed</span> <span class="timestamp"><span title="10/31/2023 2:06:50 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56277"><span class="OPEN">∏</span> <span class="number-ref">#56277</span></a> Add more nodes for inlay hints</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/31/2023 9:21:53 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/joj.png?size=40"/>@joj</span> <a href="https://github.com/microsoft/TypeScript/pull/56277#issuecomment-1787615759"><span title="10/31/2023 9:57:34 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Fixes <a href="https://github.com/microsoft/tsserverfuzzer/issues/457">https://github.com/microsoft/tsserverfuzzer/issues/457</a></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56276"><span class="OPEN">⊚</span> <span class="number-ref">#56276</span></a> Support more nodes for inlay hints</h1><span class="label" style="background-color:#393022;">Old-Crawler-Detected</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/PranavSenthilnathan.png?size=40"/>@PranavSenthilnathan</span> added <span class="label" style="background-color:#393022;">Old-Crawler-Detected</span> <span class="timestamp"><span title="10/31/2023 9:14:42 AM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/PranavSenthilnathan.png?size=40"/>@PranavSenthilnathan</span> assigned <span class="timestamp"><span title="10/31/2023 9:14:42 AM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/43329"><span class="CLOSED">⊚</span> <span class="number-ref">#43329</span></a> Add flag to not transpile dynamic `import()` when module is `CommonJS`</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">74</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">5</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fcano-ut.png?size=40"/>@fcano-ut</span> <a href="https://github.com/microsoft/TypeScript/issues/43329#issuecomment-1775324116"><span title="10/23/2023 7:25:04 AM">on 10/23/2023</span></a></span><div class="comment-body"><p dir="auto">Unfortunately, on our use case none of the proposed workarounds work, because they are incompatible with a strict <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" rel="nofollow">Content Security Policy</a>. We cannot add <code class="notranslate">unsafe-eval</code> to the CSP policies due to client requirements, so doing <code class="notranslate">await eval</code> or <code class="notranslate">new Function('')</code> is not possible for us.</p>
<p dir="auto">If you are asking why would I transpile to CJS even though I'm using the module in the browser: a) I'm already using webpack so I don't care about module formats, and b) Jest doesn't support ESM and I don't want my users to be messing up with Jest and babel transforms just to run some tests.</p>
<p dir="auto">Is there any workaround that doesn't require to eval code, or is there a flag planned to solve this issue? Thanks</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kth-tw.png?size=40"/>@kth-tw</span> <a href="https://github.com/microsoft/TypeScript/issues/43329#issuecomment-1787442049"><span title="10/31/2023 8:22:44 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">It is work for me after set tsconfig.json <code class="notranslate">compilerOptions</code> to <code class="notranslate">node16</code></p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" &quot;compilerOptions&quot;: {
   &quot;moduleResolution&quot;: &quot;node16&quot;,
 }"><pre class="notranslate"> <span class="pl-ent">"compilerOptions"</span>: {
   <span class="pl-ent">"moduleResolution"</span>: <span class="pl-s"><span class="pl-pds">"</span>node16<span class="pl-pds">"</span></span>,
 }</pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56273"><span class="OPEN">⊚</span> <span class="number-ref">#56273</span></a> Array with option allof in definition to tell TS that all options must be implemented from that array</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/nmain.png?size=40"/>@nmain</span> <a href="https://github.com/microsoft/TypeScript/issues/56273#issuecomment-1787425855"><span title="10/31/2023 8:14:55 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Typescript provides enough infrastructure for you to build this yourself, if you want it:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import { AssertTrue, IsExact } from 'conditional-type-checks';

type LanguageLocale = &quot;en-gb&quot; | &quot;de&quot; | &quot;fr&quot; | &quot;nl-nl&quot; | &quot;nb-NO&quot;

const foo = [
  { id: 'en-gb', name: 'EN' },
  { id: 'de', name: 'DE' },
  { id: 'fr', name: 'FR' },
  { id: 'nl-nl', name: 'NL' },
]  as const;

type ActualLanguageLocale = (typeof foo)[number][&quot;id&quot;];
//   ^?

type _ = AssertTrue&lt;IsExact&lt;LanguageLocale, ActualLanguageLocale&gt;&gt;;
"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-smi">AssertTrue</span><span class="pl-kos">,</span> <span class="pl-smi">IsExact</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'conditional-type-checks'</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">LanguageLocale</span> <span class="pl-c1">=</span> <span class="pl-s">"en-gb"</span> <span class="pl-c1">|</span> <span class="pl-s">"de"</span> <span class="pl-c1">|</span> <span class="pl-s">"fr"</span> <span class="pl-c1">|</span> <span class="pl-s">"nl-nl"</span> <span class="pl-c1">|</span> <span class="pl-s">"nb-NO"</span>

<span class="pl-k">const</span> <span class="pl-s1">foo</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span>
  <span class="pl-kos">{</span> <span class="pl-c1">id</span>: <span class="pl-s">'en-gb'</span><span class="pl-kos">,</span> <span class="pl-c1">name</span>: <span class="pl-s">'EN'</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">{</span> <span class="pl-c1">id</span>: <span class="pl-s">'de'</span><span class="pl-kos">,</span> <span class="pl-c1">name</span>: <span class="pl-s">'DE'</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">{</span> <span class="pl-c1">id</span>: <span class="pl-s">'fr'</span><span class="pl-kos">,</span> <span class="pl-c1">name</span>: <span class="pl-s">'FR'</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">{</span> <span class="pl-c1">id</span>: <span class="pl-s">'nl-nl'</span><span class="pl-kos">,</span> <span class="pl-c1">name</span>: <span class="pl-s">'NL'</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">]</span>  <span class="pl-k">as</span> <span class="pl-smi">const</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">ActualLanguageLocale</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-k">typeof</span> <span class="pl-s1">foo</span><span class="pl-kos">)</span><span class="pl-kos">[</span><span class="pl-smi">number</span><span class="pl-kos">]</span><span class="pl-kos">[</span><span class="pl-s">"id"</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
<span class="pl-c">//   ^?</span>

<span class="pl-k">type</span> <span class="pl-smi">_</span> <span class="pl-c1">=</span> <span class="pl-smi">AssertTrue</span><span class="pl-kos">&lt;</span><span class="pl-smi">IsExact</span><span class="pl-kos">&lt;</span><span class="pl-smi">LanguageLocale</span><span class="pl-kos">,</span> <span class="pl-smi">ActualLanguageLocale</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><a href="https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAbzgQQM6oKawCpQK4YA0cAkqgKIAeAhgMbwC+cAZlBCHAOS0QB2AJsBjA+1ADYBaGAE8wGCbQAWGWgGtUnANwAobTLlwAMtV4BzPNVMZDEWuIxwAvHABEGXhNMAjF3AA+rvwYvgEurCGuvJJRES68XhIAcgDyLro8vKjwzBAQTnAA2tpwiHDA-ABcXO6eXpzEvNQgGFWc5ImccAyExaXlrUH1cI3NrQAi5J3dvUj9XKxDIy1cAGIASlM9JbOVXFESUYtNy5yJhpvaALol1KhwGVk6erIOyPQWYsZmFlY2dmIOZwACn0GAgzBYuQAlAVeHgQF4sJcCi5yi5LjoAPSYkpwAB6AH5dKC4AB9fJoTA4fAYAA8ZCodBgtK+5ks1ls9mIbxgH1ZPw5-wwAD5hTogA" rel="nofollow">Playground</a></p>
<p dir="auto">Perhaps a bit long-winded, but you can easily tweak the implementation as needed.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">❤️</span><span class="count">2</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56273#issuecomment-1787870432"><span title="10/31/2023 12:17:48 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Previously discussed at <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1616218748" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/53171" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/53171/hovercard" href="https://github.com/microsoft/TypeScript/issues/53171">#53171</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/31/2023 12:28:24 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556677;">Awaiting More Feedback</span> <span class="timestamp"><span title="10/31/2023 12:28:25 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56264"><span class="OPEN">⊚</span> <span class="number-ref">#56264</span></a> Optional chaining should narrow union types too</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="10/30/2023 1:26:14 PM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ahejlsberg.png?size=40"/>@ahejlsberg</span> <a href="https://github.com/microsoft/TypeScript/issues/56264#issuecomment-1786107802"><span title="10/30/2023 2:54:57 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Write the type like this instead:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type Foo = { a: { b: string } } | { a?: undefined, c: number }"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">Foo</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-kos">{</span> <span class="pl-c1">b</span>: <span class="pl-smi">string</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span> <span class="pl-c1">|</span> <span class="pl-kos">{</span> <span class="pl-c1">a</span>?: <span class="pl-c1">undefined</span><span class="pl-kos">,</span> <span class="pl-c1">c</span>: <span class="pl-smi">number</span> <span class="pl-kos">}</span></pre></div>
<p dir="auto">Your scenario then works because you're ensuring that <code class="notranslate">a</code> will either be <code class="notranslate">{ b: string }</code> or <code class="notranslate">undefined</code>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56264#issuecomment-1786169966"><span title="10/30/2023 3:52:17 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a> Technically <code class="notranslate">a</code> can still be of an arbitrary type because it's optional in the second version.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/mon-jai.png?size=40"/>@mon-jai</span> <a href="https://github.com/microsoft/TypeScript/issues/56264#issuecomment-1787301607"><span title="10/31/2023 7:12:47 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Maybe this could be resolved if <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="195716702" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/12936" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/12936/hovercard" href="https://github.com/microsoft/TypeScript/issues/12936">#12936</a> is implemented (some day).</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56249"><span class="CLOSED">⊚</span> <span class="number-ref">#56249</span></a> ts.createSourceFile adds parent to nodes when asked not to</h1><span class="label" style="background-color:#fbca04;color:black;">Not a Defect</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56249#issuecomment-1785510934"><span title="10/30/2023 8:50:12 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Setting this param to true causes a second pass of the tree to fix up any parent pointers <em>not</em> set in the first pass. It's not a guarantee that there won't be any parent pointers (I'm not sure what anyone would do with that invariant in the first place) - the same way some nodes are constructed, the parent is already available.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kungfooman.png?size=40"/>@kungfooman</span> <a href="https://github.com/microsoft/TypeScript/issues/56249#issuecomment-1785521387"><span title="10/30/2023 8:55:18 AM">3 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I'm not sure what anyone would do with that invariant in the first place</p>
</blockquote>
<p dir="auto">It happens to be nice for <code class="notranslate">JSON.stringify</code> (preventing circular references).</p>
<p dir="auto">The naming is confusing, so it should have been <code class="notranslate">ensureParentNodes</code>?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56249#issuecomment-1785656241"><span title="10/30/2023 9:53:55 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">I don't think it's confusing; this is this first anyone has ever asked about it in ~9 years of existence. There are many many more problems you'll have trying to <code class="notranslate">JSON.stringify</code> the AST nodes.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> closed <span class="timestamp"><span title="10/30/2023 9:53:55 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kungfooman.png?size=40"/>@kungfooman</span> <a href="https://github.com/microsoft/TypeScript/issues/56249#issuecomment-1787231592"><span title="10/31/2023 6:34:42 AM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">There are many many more problems you'll have trying to <code class="notranslate">JSON.stringify</code> the AST nodes.</p>
</blockquote>
<p dir="auto">Not really, I tested with giant TS files and this works perfectly:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="  const ast = ts.createSourceFile('repl.ts', str, ts.ScriptTarget.Latest, false /*setParentNodes*/);
  const out = JSON.stringify(ast, function(name, val) {
    if (name === &quot;parent&quot;) {
      return undefined; // remove
    }
    return val; // keep
  }, 2);"><pre class="notranslate">  <span class="pl-k">const</span> <span class="pl-s1">ast</span> <span class="pl-c1">=</span> <span class="pl-s1">ts</span><span class="pl-kos">.</span><span class="pl-en">createSourceFile</span><span class="pl-kos">(</span><span class="pl-s">'repl.ts'</span><span class="pl-kos">,</span> <span class="pl-s1">str</span><span class="pl-kos">,</span> <span class="pl-s1">ts</span><span class="pl-kos">.</span><span class="pl-c1">ScriptTarget</span><span class="pl-kos">.</span><span class="pl-c1">Latest</span><span class="pl-kos">,</span> <span class="pl-c1">false</span> <span class="pl-c">/*setParentNodes*/</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">const</span> <span class="pl-s1">out</span> <span class="pl-c1">=</span> <span class="pl-c1">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-s1">ast</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">name</span><span class="pl-kos">,</span> <span class="pl-s1">val</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">name</span> <span class="pl-c1">===</span> <span class="pl-s">"parent"</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
      <span class="pl-k">return</span> <span class="pl-c1">undefined</span><span class="pl-kos">;</span> <span class="pl-c">// remove</span>
    <span class="pl-kos">}</span>
    <span class="pl-k">return</span> <span class="pl-s1">val</span><span class="pl-kos">;</span> <span class="pl-c">// keep</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">But yes, <em>nvm</em>.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/46532"><span class="OPEN">⊚</span> <span class="number-ref">#46532</span></a> support &quot;star projections&quot; in generics</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">3</span></span><span class="reaction-group"><span class="emoji">😕</span><span class="count">2</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/wakaztahir.png?size=40"/>@wakaztahir</span> <a href="https://github.com/microsoft/TypeScript/issues/46532#issuecomment-1659893745"><span title="8/1/2023 2:07:02 AM">on 8/1/2023</span></a></span><div class="comment-body"><div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface BlockModel {
  
}

interface Block&lt;T extends BlockModel&gt; {
    type : string
}

interface ParagraphModel extends BlockModel {

}

interface Paragraph extends Block&lt;ParagraphModel&gt; {

}

interface ListModel extends BlockModel {

}

interface List extends Block&lt;ListModel&gt; {

}

class DefaultParagraph implements Paragraph {
    type = &quot;paragraph&quot;
}

class DefaultList implements List {
    type = &quot;list&quot;
}

type BlockType&lt;K extends BlockModel,T extends Block&lt;K&gt;&gt; = T

type Blocks = {
    [K : string] : BlockType&lt;*,*&gt;
}

const blocks : Blocks = {
    &quot;paragraph&quot; : new DefaultParagraph(),
    &quot;list&quot; : new DefaultList()
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">BlockModel</span> <span class="pl-kos">{</span>
  
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Block</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">BlockModel</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-c1">type</span> : <span class="pl-smi">string</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">ParagraphModel</span> <span class="pl-k">extends</span> <span class="pl-smi">BlockModel</span> <span class="pl-kos">{</span>

<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">Paragraph</span> <span class="pl-k">extends</span> <span class="pl-smi">Block</span><span class="pl-kos">&lt;</span><span class="pl-smi">ParagraphModel</span><span class="pl-kos">&gt;</span> <span class="pl-kos">{</span>

<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">ListModel</span> <span class="pl-k">extends</span> <span class="pl-smi">BlockModel</span> <span class="pl-kos">{</span>

<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">List</span> <span class="pl-k">extends</span> <span class="pl-smi">Block</span><span class="pl-kos">&lt;</span><span class="pl-smi">ListModel</span><span class="pl-kos">&gt;</span> <span class="pl-kos">{</span>

<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">DefaultParagraph</span> <span class="pl-k">implements</span> <span class="pl-smi">Paragraph</span> <span class="pl-kos">{</span>
    <span class="pl-c1">type</span> <span class="pl-c1">=</span> <span class="pl-s">"paragraph"</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">DefaultList</span> <span class="pl-k">implements</span> <span class="pl-smi">List</span> <span class="pl-kos">{</span>
    <span class="pl-c1">type</span> <span class="pl-c1">=</span> <span class="pl-s">"list"</span>
<span class="pl-kos">}</span>

<span class="pl-k">type</span> <span class="pl-smi">BlockType</span><span class="pl-c1">&lt;</span><span class="pl-smi">K</span> <span class="pl-k">extends</span> <span class="pl-smi">BlockModel</span><span class="pl-kos">,</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">Block</span><span class="pl-kos">&lt;</span><span class="pl-smi">K</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">T</span>

<span class="pl-k">type</span> <span class="pl-smi">Blocks</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-kos">[</span><span class="pl-smi">K</span> : <span class="pl-smi">string</span><span class="pl-kos">]</span> : <span class="pl-smi">BlockType</span><span class="pl-kos">&lt;</span><span class="pl-c1">*</span><span class="pl-kos">,</span><span class="pl-c1">*</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">}</span>

<span class="pl-k">const</span> <span class="pl-s1">blocks</span> : <span class="pl-smi">Blocks</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-s">"paragraph"</span> : <span class="pl-k">new</span> <span class="pl-smi">DefaultParagraph</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-s">"list"</span> : <span class="pl-k">new</span> <span class="pl-smi">DefaultList</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Schahen.png?size=40"/>@Schahen</span> <a href="https://github.com/microsoft/TypeScript/issues/46532#issuecomment-1787127427"><span title="10/31/2023 5:30:46 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Here's another example where this might be useful.<br>
Consider following code:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface Box&lt;T&gt; {
  getItem(): T;
}

interface BoxWrapper&lt;T, B extends Box&lt;T&gt;&gt; {
   getBox(): B
}

interface BoxWrapperFactory {
    create&lt;T&gt;(): BoxWrapper&lt;T, Box&lt;T&gt;&gt;;
}

class Something {
    ping() {}

    static fromBox(factory: BoxWrapperFactory) {
        factory.create&lt;Something&gt;().getBox().getItem().ping();
    }
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">Box</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c1">getItem</span><span class="pl-kos">(</span><span class="pl-kos">)</span>: <span class="pl-smi">T</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">BoxWrapper</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-smi">B</span> <span class="pl-k">extends</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span>
   <span class="pl-c1">getBox</span><span class="pl-kos">(</span><span class="pl-kos">)</span>: <span class="pl-smi">B</span>
<span class="pl-kos">}</span>

<span class="pl-k">interface</span> <span class="pl-smi">BoxWrapperFactory</span> <span class="pl-kos">{</span>
    <span class="pl-c1">create</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span>: <span class="pl-smi">BoxWrapper</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-smi">Box</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">class</span> <span class="pl-smi">Something</span> <span class="pl-kos">{</span>
    <span class="pl-en">ping</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>

    <span class="pl-k">static</span> <span class="pl-en">fromBox</span><span class="pl-kos">(</span><span class="pl-s1">factory</span>: <span class="pl-smi">BoxWrapperFactory</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-s1">factory</span><span class="pl-kos">.</span><span class="pl-en">create</span><span class="pl-kos">&lt;</span><span class="pl-smi">Something</span><span class="pl-kos">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">getBox</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">getItem</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ping</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">We have to explicitly mention define Box either like it's done in code, at line <code class="notranslate">create&lt;T&gt;(): BoxWrapper&lt;T, Box&lt;T&gt;&gt;</code> or we can add default param to the BoxWrapper definition itself (that is, we can write <code class="notranslate">interface BoxWrapper&lt;T, B extends Box&lt;T&gt; = Box&lt;T&gt;&gt; {</code></p>
<p dir="auto">Both of constructions feels like slightly redundant. I can imagine that star syntax can come in handy.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/34933"><span class="OPEN">⊚</span> <span class="number-ref">#34933</span></a> “Type instantiation is excessively deep and possibly infinite” but only in a large codebase</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><span class="label" style="background-color:#a17bf2;color:black;">Domain: Big Unions</span><span class="label" style="background-color:#5319e7;">Rescheduled</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">106</span></span><span class="reaction-group"><span class="emoji">❤️</span><span class="count">4</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">8</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andelkocvjetkovic.png?size=40"/>@andelkocvjetkovic</span> <a href="https://github.com/microsoft/TypeScript/issues/34933#issuecomment-1772787785"><span title="10/20/2023 6:56:28 AM">on 10/20/2023</span></a></span><div class="comment-body"><p dir="auto">I had similar issue with zod, instead using z.merge or z.extend I used spread operators</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export const addNewProspectSchema = z.object({
  ...generalSchema.shape,
  ...landSchema.shape,
  ...pvResourceSchema.shape,
  ...windResourceSchema.shape,
  ...productionSchema.shape,
  ...gridSchema.shape,
  ...
});

type AddNewProspectSchema = z.infer&lt;typeof addNewProspectSchema&gt;;
"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">const</span> <span class="pl-s1">addNewProspectSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-c1">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  ...<span class="pl-s1">generalSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">landSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">pvResourceSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">windResourceSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">productionSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">gridSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">AddNewProspectSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-c1">infer</span><span class="pl-kos">&lt;</span><span class="pl-k">typeof</span> <span class="pl-s1">addNewProspectSchema</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This solved the issue, at least for now. :)</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">2</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ryan-williams.png?size=40"/>@ryan-williams</span> <a href="https://github.com/microsoft/TypeScript/issues/34933#issuecomment-1786366787"><span title="10/30/2023 8:06:33 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">In case it helps someone, I think I was triggering this error attempting to combine some <code class="notranslate">Promise&lt;JSX.Element&gt;</code>s with <code class="notranslate">Promise&lt;ReactNode&gt;</code>s in one array:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const elems: Promise&lt;JSX.Element&gt;[] = []
const nodes: Promise&lt;ReactNode&gt;[] = []
const all = Promise.all([ ...elems, ...nodes ])"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-s1">elems</span>: <span class="pl-smi">Promise</span><span class="pl-kos">&lt;</span><span class="pl-smi">JSX</span><span class="pl-kos">.</span><span class="pl-smi">Element</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">]</span>
<span class="pl-k">const</span> <span class="pl-s1">nodes</span>: <span class="pl-smi">Promise</span><span class="pl-kos">&lt;</span><span class="pl-smi">ReactNode</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-kos">]</span>
<span class="pl-k">const</span> <span class="pl-s1">all</span> <span class="pl-c1">=</span> <span class="pl-smi">Promise</span><span class="pl-kos">.</span><span class="pl-en">all</span><span class="pl-kos">(</span><span class="pl-kos">[</span> ...<span class="pl-s1">elems</span><span class="pl-kos">,</span> ...<span class="pl-s1">nodes</span> <span class="pl-kos">]</span><span class="pl-kos">)</span></pre></div>
<p dir="auto">This fails to compile:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Type error: Type instantiation is excessively deep and possibly infinite.

  112 |     const elems: Promise&lt;JSX.Element&gt;[] = []
  113 |     const nodes: Promise&lt;ReactNode&gt;[] = []
&gt; 114 |     const all = Promise.all([ ...elems, ...nodes ])
      |                 ^"><pre class="notranslate"><code class="notranslate">Type error: Type instantiation is excessively deep and possibly infinite.

  112 |     const elems: Promise&lt;JSX.Element&gt;[] = []
  113 |     const nodes: Promise&lt;ReactNode&gt;[] = []
&gt; 114 |     const all = Promise.all([ ...elems, ...nodes ])
      |                 ^
</code></pre></div>
<p dir="auto">In my case, both arrays could be refined to <code class="notranslate">Promise&lt;JSX.Element&gt;</code>s, and that fixed the error. but in general the other direction ("widening" <code class="notranslate">JSX.Element</code>s to <code class="notranslate">ReactNode</code>s) should always work.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Amorim33.png?size=40"/>@Amorim33</span> <a href="https://github.com/microsoft/TypeScript/issues/34933#issuecomment-1787120518"><span title="10/31/2023 5:26:20 AM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I had similar issue with zod, instead using z.merge or z.extend I used spread operators</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export const addNewProspectSchema = z.object({
  ...generalSchema.shape,
  ...landSchema.shape,
  ...pvResourceSchema.shape,
  ...windResourceSchema.shape,
  ...productionSchema.shape,
  ...gridSchema.shape,
  ...
});

type AddNewProspectSchema = z.infer&lt;typeof addNewProspectSchema&gt;;"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">const</span> <span class="pl-s1">addNewProspectSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-c1">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  ...<span class="pl-s1">generalSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">landSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">pvResourceSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">windResourceSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">productionSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...<span class="pl-s1">gridSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
  ...
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">AddNewProspectSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-c1">infer</span><span class="pl-kos">&lt;</span><span class="pl-k">typeof</span> <span class="pl-s1">addNewProspectSchema</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This solved the issue, at least for now. :)</p>
</blockquote>
<p dir="auto">Very nice!!</p>
<p dir="auto">I have a similar problem.</p>
<p dir="auto">I was using merge, pick and extend. After seeing your comment, I simplified the schema using the spread.<br>
However, the error continues to appear, probably the cause is now the pick method.</p>
<p dir="auto">Any ideas on how to resolve it?</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const getMonthlyInsuredItemSchema = monthlyInsuredItemSchema.pick({
  month: true,
  processedAt: true,
});

const getInsuredItemSchema = insuredItemSchema.pick({
  externalId: true,
  additionalAttributes: true,
  remainingInstallments: true,
  totalInstallments: true,
  installmentAmount: true,
});

const getInsuredPersonSchema = insuredPersonSchema.pick({
  name: true,
  cpf: true,
  birthdate: true,
  gender: true,
});

const getInsuredItemsResponse = z.array(
  z.object({
    ...getMonthlyInsuredItemSchema.shape,
    ...getInsuredItemSchema.shape,
    insuredPerson: getInsuredPersonSchema,
  }),
);"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-s1">getMonthlyInsuredItemSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">monthlyInsuredItemSchema</span><span class="pl-kos">.</span><span class="pl-en">pick</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">month</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">processedAt</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">getInsuredItemSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">insuredItemSchema</span><span class="pl-kos">.</span><span class="pl-en">pick</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">externalId</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">additionalAttributes</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">remainingInstallments</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">totalInstallments</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">installmentAmount</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">getInsuredPersonSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">insuredPersonSchema</span><span class="pl-kos">.</span><span class="pl-en">pick</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">name</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">cpf</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">birthdate</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
  <span class="pl-c1">gender</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">getInsuredItemsResponse</span> <span class="pl-c1">=</span> <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span>
  <span class="pl-s1">z</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    ...<span class="pl-s1">getMonthlyInsuredItemSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
    ...<span class="pl-s1">getInsuredItemSchema</span><span class="pl-kos">.</span><span class="pl-c1">shape</span><span class="pl-kos">,</span>
    <span class="pl-c1">insuredPerson</span>: <span class="pl-s1">getInsuredPersonSchema</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
<span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h2 dir="auto">Update</h2>
<p dir="auto">The problem was in <code class="notranslate">additionalAttributes</code> .</p>
<p dir="auto">I believe that what causes the error is the fact that the field is a jsonb in the database, receives a type transformation from <a href="https://github.com/drizzle-team/drizzle-orm/blob/main/drizzle-zod/README.md">drizzle-zod</a>, and is then extended in another schema, generating many recurring type instantiations.</p>
<p dir="auto">What I did was remove the additionalAttributes from the pick and redefine it explicitly in the <code class="notranslate">getInsuredItemsResponse</code> schema.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/51925"><span class="CLOSED">⊚</span> <span class="number-ref">#51925</span></a> Fails to propagate returned generic type as argument of another function</h1><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/dexx086.png?size=40"/>@dexx086</span> <a href="https://github.com/microsoft/TypeScript/issues/51925#issuecomment-1412991833"><span title="2/1/2023 4:55:14 PM">on 2/1/2023</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Same thing I said before: Someone needs to create a simplified example that more clearly demonstrates the problem...</p>
</blockquote>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> I tried to simplify even more my use case, I think this is the most basic situation I can come up with to demonstrate the issue.<br>
Do you think it is suitable now for an investigation?</p>
<p dir="auto">Here's the more simplified code: <a href="https://www.typescriptlang.org/play?ts=4.9.4#code/MYGwhgzhAEDKwAsCmBbMAeWAJAggBQFEA+aAbwF8BYAKFEhgFkwA7AVwDMxgAXVgJyR8yVWuCjQAwmCEUaNAPTzJAe2YA3Qd2hhodcd2VxEqDADpzeiOdMkARqy1gQIZQHcAlswDm0A9CQAHtxIzAAm0B7cCNqhoe7c7qpO0AAOfMopmu5IMK4I7ojQKKwQjiAQhrZI2kbIaOjWJNwAnpk0wKql-swJLQBMEMZo0AC80OgEAHIAKgCS0wCaADTQOAAia-OzAPKTsP5BIaEwAEpIHXyh6KV8nl4r8HUYLM1EJAA+0KxhSOyeSOExt9Qr9-qEiDRoFDoAAKEK9ZoALmgUzmixWYFi8USzAgAH5ketNnNdrAAJTIx4mCYzeYLaAAMlhRK2pIOwTCMGBoOYAOgeOE0EJG1ZezJJBGJDYzm0MBeAG5oPIAFT+FApFrQdzqkCoeFgBKqaDK+RyaiKaAAcW22zWukgSHanS0aDYnB4-EEVOGY3h8WaAyGYBhvNc0CYbq4vAEfBhZLJiot6AAtMnoKVlAJwp5oGppO4wLZddBZpNVmsAGo4SYSAhO3FaYDSADq8QQEY4Uc9fEtymUgO6CMDTxDSDDUljZJWpEh0NdnY9MeR8-d0a9QaVShTaettuRAHIV12Y-vUulMnxNWNvRgO6vuxDqOQE2aLQAhdb2iCO2jO+18VsojvY9BDfTFRkHf1hxMUdx2kONp1nKEj0XQRkT9fpBhHUNwxYBc10nMlN3GVNoA-NYDxQgjTzSDJNGaCCb3QF4SBhCAEGUVgQHCKpampYDUL4EgQHcABraocyiap913NZTybb8yRoZ95VfJQcDCXxkGgVQQAYuJ2HYQQQmAaoqm4VwkBCK0bTtFhwnIr9qiiA0tRgHNZKcrTqggMAUGqDCAywkx7RldwuW-cIonSVgvGiFh2T4KM+TzW5C11FY8ncYsc0chTnO03z-MgzCN3Yb4eBxNzQt1bNmBE3kgA" rel="nofollow">Playground link</a></p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Schema&lt;SHAPE&gt; {}
class Manufacturer {}
class Car {}

// Convert a class to Schema&lt;...class...&gt; but allowing to extend with additional properties which must also be a Schema&lt;...&gt; type
const entity2schema = &lt;ENTITY, ADDITIONS extends Record&lt;string, Schema&lt;any&gt;&gt; | undefined = undefined&gt;
    (entity: ENTITY, additions?: ADDITIONS): Schema&lt;ENTITY &amp; (ADDITIONS extends undefined ? {} : ADDITIONS)&gt; =&gt; null as any; /* empty implementation */

// GOOD case
const manufacturerSchema = entity2schema(new Manufacturer()); // &lt;-- stored in variable IN ADVANCE
const carWithManufacturerGood = entity2schema(new Car(), {
    manufacturer: manufacturerSchema // &lt;-- GOOD: 'manufacturer' property = Schema&lt;Manufacturer&gt;
});

// BAD case
const carWithManufacturerBad = entity2schema(new Car(), {
    manufacturer: entity2schema(new Manufacturer()) // &lt;-- BAD: 'manufacturer' property = Schema&lt;any&gt; (should be Schema&lt;Manufacturer&gt; like in the 'GOOD' case)
});

// And the only difference between GOOD and BAD case that is in GOOD case the same entity2schema call is used through an extracted variable, while in BAD case the same entity2schema function is called inline"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Schema</span><span class="pl-c1">&lt;</span><span class="pl-smi">SHAPE</span><span class="pl-c1">&gt;</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
<span class="pl-k">class</span> <span class="pl-smi">Manufacturer</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
<span class="pl-k">class</span> <span class="pl-smi">Car</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>

<span class="pl-c">// Convert a class to Schema&lt;...class...&gt; but allowing to extend with additional properties which must also be a Schema&lt;...&gt; type</span>
<span class="pl-k">const</span> <span class="pl-en">entity2schema</span> <span class="pl-c1">=</span> <span class="pl-c1">&lt;</span><span class="pl-smi">ENTITY</span><span class="pl-kos">,</span> <span class="pl-smi">ADDITIONS</span> <span class="pl-k">extends</span> <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-smi">Schema</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span> <span class="pl-c1">|</span> <span class="pl-c1">undefined</span> <span class="pl-c1">=</span> <span class="pl-c1">undefined</span><span class="pl-c1">&gt;</span>
    <span class="pl-kos">(</span><span class="pl-s1">entity</span>: <span class="pl-smi">ENTITY</span><span class="pl-kos">,</span> <span class="pl-s1">additions</span>?: <span class="pl-smi">ADDITIONS</span><span class="pl-kos">)</span>: <span class="pl-smi">Schema</span><span class="pl-kos">&lt;</span><span class="pl-smi">ENTITY</span> <span class="pl-c1">&amp;</span> <span class="pl-kos">(</span><span class="pl-smi">ADDITIONS</span> <span class="pl-k">extends</span> <span class="pl-c1">undefined</span> ? <span class="pl-kos">{</span><span class="pl-kos">}</span> : <span class="pl-smi">ADDITIONS</span><span class="pl-kos">)</span><span class="pl-kos">&gt;</span> <span class="pl-c1">=&gt;</span> <span class="pl-c1">null</span> <span class="pl-k">as</span> <span class="pl-smi">any</span><span class="pl-kos">;</span> <span class="pl-c">/* empty implementation */</span>

<span class="pl-c">// GOOD case</span>
<span class="pl-k">const</span> <span class="pl-s1">manufacturerSchema</span> <span class="pl-c1">=</span> <span class="pl-en">entity2schema</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">Manufacturer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// &lt;-- stored in variable IN ADVANCE</span>
<span class="pl-k">const</span> <span class="pl-s1">carWithManufacturerGood</span> <span class="pl-c1">=</span> <span class="pl-en">entity2schema</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">Car</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
    <span class="pl-c1">manufacturer</span>: <span class="pl-s1">manufacturerSchema</span> <span class="pl-c">// &lt;-- GOOD: 'manufacturer' property = Schema&lt;Manufacturer&gt;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// BAD case</span>
<span class="pl-k">const</span> <span class="pl-s1">carWithManufacturerBad</span> <span class="pl-c1">=</span> <span class="pl-en">entity2schema</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">Car</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
    <span class="pl-c1">manufacturer</span>: <span class="pl-en">entity2schema</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-smi">Manufacturer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-c">// &lt;-- BAD: 'manufacturer' property = Schema&lt;any&gt; (should be Schema&lt;Manufacturer&gt; like in the 'GOOD' case)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// And the only difference between GOOD and BAD case that is in GOOD case the same entity2schema call is used through an extracted variable, while in BAD case the same entity2schema function is called inline</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/dexx086.png?size=40"/>@dexx086</span> <a href="https://github.com/microsoft/TypeScript/issues/51925#issuecomment-1786685469"><span title="10/31/2023 12:54:06 AM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Meanwhile I figured out the source of the problem in my simplified example.</p>
<p dir="auto">I had to change <code class="notranslate">ADDITION extends undefined</code> to <code class="notranslate">undefined extends ADDITION</code> and now the "bad" case has <code class="notranslate">Schema&lt;Manufacturer&gt;</code> type as well!</p>
<p dir="auto">I still have some strange things going on with the code I created this simplified example from, but as for this example my issue is resolved.</p>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/TruffeCendree/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/TruffeCendree">@TruffeCendree</a>: if your case is resolved as well, you might close this ticket.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> closed <span class="timestamp"><span title="10/31/2023 12:39:09 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/42873"><span class="OPEN">⊚</span> <span class="number-ref">#42873</span></a> The inferred type of &quot;X&quot; cannot be named without a reference to &quot;Y&quot;. This is likely not portable. A type annotation is necessary.</h1><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><span class="label" style="background-color:#5319e7;">Rescheduled</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">143</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Nikola-Milovic.png?size=40"/>@Nikola-Milovic</span> <a href="https://github.com/microsoft/TypeScript/issues/42873#issuecomment-1777576917"><span title="10/24/2023 9:15:28 AM">on 10/24/2023</span></a></span><div class="comment-body"><p dir="auto">Same issue here</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import { create } from &quot;zustand&quot;;
import { devtools } from &quot;zustand/middleware&quot;;
import { immer } from &quot;zustand/middleware/immer&quot;;

...
export const useAppStore = create&lt;AppState &amp; AppActions&gt;()(
	immer(
		devtools((set) =&gt; ({
			user: null,
			setUser: (user) =&gt; set({ user }),
		})),
	),
);"><pre class="notranslate"><code class="notranslate">import { create } from "zustand";
import { devtools } from "zustand/middleware";
import { immer } from "zustand/middleware/immer";

...
export const useAppStore = create&lt;AppState &amp; AppActions&gt;()(
	immer(
		devtools((set) =&gt; ({
			user: null,
			setUser: (user) =&gt; set({ user }),
		})),
	),
);
</code></pre></div>
<p dir="auto"><code class="notranslate"> The inferred type of 'useAppStore' cannot be named without a reference to '.pnpm/immer@9.0.6/node_modules/immer/dist/internal'. This is likely not portable. A type annotation is necessary.</code></p>
<p dir="auto"><code class="notranslate">"typescript": "5.1.6"</code></p>
<p dir="auto">The tsconfig</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="/dashboard ➜ tsc --showConfig
{
    &quot;compilerOptions&quot;: {
        &quot;composite&quot;: false,
        &quot;declaration&quot;: true,
        &quot;declarationMap&quot;: true,
        &quot;esModuleInterop&quot;: true,
        &quot;forceConsistentCasingInFileNames&quot;: true,
        &quot;inlineSources&quot;: false,
        &quot;isolatedModules&quot;: true,
        &quot;preserveWatchOutput&quot;: true,
        &quot;strictNullChecks&quot;: true,
        &quot;skipLibCheck&quot;: true,
        &quot;strict&quot;: true,
        &quot;noUnusedLocals&quot;: true,
        &quot;noUnusedParameters&quot;: true,
        &quot;noFallthroughCasesInSwitch&quot;: true,
        &quot;target&quot;: &quot;es2020&quot;,
        &quot;useDefineForClassFields&quot;: true,
        &quot;lib&quot;: [
            &quot;es2020&quot;,
            &quot;dom&quot;,
            &quot;dom.iterable&quot;
        ],
        &quot;module&quot;: &quot;esnext&quot;,
        &quot;moduleResolution&quot;: &quot;bundler&quot;,
        &quot;allowImportingTsExtensions&quot;: true,
        &quot;noEmit&quot;: true,
        &quot;jsx&quot;: &quot;react-jsx&quot;,
        &quot;baseUrl&quot;: &quot;./&quot;,
        &quot;paths&quot;: {
            &quot;@dashboard/*&quot;: [
                &quot;./src/*&quot;
            ]
        }
    },
    &quot;references&quot;: [
        {
            &quot;path&quot;: &quot;./tsconfig.node.json&quot;
        }
    ],...
}

{
  &quot;compilerOptions&quot;: {
    &quot;composite&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;module&quot;: &quot;ESNext&quot;,
    &quot;moduleResolution&quot;: &quot;bundler&quot;,
    &quot;allowSyntheticDefaultImports&quot;: true
  },
  &quot;include&quot;: [&quot;vite.config.ts&quot;]
}"><pre class="notranslate"><span class="pl-ii">/dashboard ➜ tsc --showConfig</span>
{
    <span class="pl-ent">"compilerOptions"</span>: {
        <span class="pl-ent">"composite"</span>: <span class="pl-c1">false</span>,
        <span class="pl-ent">"declaration"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"declarationMap"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"esModuleInterop"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"forceConsistentCasingInFileNames"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"inlineSources"</span>: <span class="pl-c1">false</span>,
        <span class="pl-ent">"isolatedModules"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"preserveWatchOutput"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"strictNullChecks"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"skipLibCheck"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"strict"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"noUnusedLocals"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"noUnusedParameters"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"noFallthroughCasesInSwitch"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"target"</span>: <span class="pl-s"><span class="pl-pds">"</span>es2020<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"useDefineForClassFields"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"lib"</span>: [
            <span class="pl-s"><span class="pl-pds">"</span>es2020<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>dom<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>dom.iterable<span class="pl-pds">"</span></span>
        ],
        <span class="pl-ent">"module"</span>: <span class="pl-s"><span class="pl-pds">"</span>esnext<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"moduleResolution"</span>: <span class="pl-s"><span class="pl-pds">"</span>bundler<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"allowImportingTsExtensions"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"noEmit"</span>: <span class="pl-c1">true</span>,
        <span class="pl-ent">"jsx"</span>: <span class="pl-s"><span class="pl-pds">"</span>react-jsx<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"baseUrl"</span>: <span class="pl-s"><span class="pl-pds">"</span>./<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"paths"</span>: {
            <span class="pl-ent">"@dashboard/*"</span>: [
                <span class="pl-s"><span class="pl-pds">"</span>./src/*<span class="pl-pds">"</span></span>
            ]
        }
    },
    <span class="pl-ent">"references"</span>: [
        {
            <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>./tsconfig.node.json<span class="pl-pds">"</span></span>
        }
    ],<span class="pl-ii">...</span>
}

{
  <span class="pl-ent">"compilerOptions"</span>: {
    <span class="pl-ent">"composite"</span>: <span class="pl-c1">true</span>,
    <span class="pl-ent">"skipLibCheck"</span>: <span class="pl-c1">true</span>,
    <span class="pl-ent">"module"</span>: <span class="pl-s"><span class="pl-pds">"</span>ESNext<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"moduleResolution"</span>: <span class="pl-s"><span class="pl-pds">"</span>bundler<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"allowSyntheticDefaultImports"</span>: <span class="pl-c1">true</span>
  },
  <span class="pl-ent">"include"</span>: [<span class="pl-s"><span class="pl-pds">"</span>vite.config.ts<span class="pl-pds">"</span></span>]
}</pre></div>
<p dir="auto">This is the default vite tsconfig generated (with minor tweaks)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/mklueh.png?size=40"/>@mklueh</span> <a href="https://github.com/microsoft/TypeScript/issues/42873#issuecomment-1786505835"><span title="10/30/2023 11:04:34 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Suddenly had this problem with Nuxt 3.8.0 in the nuxt.config.ts.</p>
<p dir="auto">Not sure why, because I haven't changed the tsconfig.base.json.</p>
<p dir="auto">However, setting <code class="notranslate">"declaration": false</code> worked for me</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gajus.png?size=40"/>@gajus</span> <a href="https://github.com/microsoft/TypeScript/issues/42873#issuecomment-1786539133"><span title="10/30/2023 11:39:29 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Related problem <a href="https://stackoverflow.com/questions/43900035/ts4023-exported-variable-x-has-or-is-using-name-y-from-external-module-but/77390832#77390832" rel="nofollow">https://stackoverflow.com/questions/43900035/ts4023-exported-variable-x-has-or-is-using-name-y-from-external-module-but/77390832#77390832</a></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/37362"><span class="OPEN">⊚</span> <span class="number-ref">#37362</span></a> Order member intellisense by inheritance</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">9</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Vap0r1ze.png?size=40"/>@Vap0r1ze</span> <a href="https://github.com/microsoft/TypeScript/issues/37362#issuecomment-744493150"><span title="12/14/2020 6:53:22 AM">on 12/14/2020</span></a></span><div class="comment-body"><p dir="auto">+1 I would really love to see this happen.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/abecks.png?size=40"/>@abecks</span> <a href="https://github.com/microsoft/TypeScript/issues/37362#issuecomment-1786379451"><span title="10/30/2023 8:26:07 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">This would be insanely useful!</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56238"><span class="OPEN">⊚</span> <span class="number-ref">#56238</span></a> Using function overloads with an invalid type for the methods on the second param correctly infers the generic type as being nullable, but results in an error in which the same generic type is non nullable</h1><span class="label" style="background-color:#fbca04;color:black;">Not a Defect</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56238#issuecomment-1785488357"><span title="10/30/2023 8:39:16 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">I don't see a defect here. The equation <code class="notranslate">4 + 2 = 7</code> is wrong, and we can say that the <code class="notranslate">4</code> should be <code class="notranslate">3</code>, or the <code class="notranslate">7</code> should be <code class="notranslate">6</code>, etc, but no error has a claim to be the one correct error.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/loucadufault.png?size=40"/>@loucadufault</span> <a href="https://github.com/microsoft/TypeScript/issues/56238#issuecomment-1786349581"><span title="10/30/2023 7:43:06 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Even ignoring which error is chosen, the bug report is mainly about consistency with the types as inferred in the program. Is it not a defect for the program to choose one type, and the error message choose the other? My understanding is that compiler errors operate based on the existing inferred types as pre-conditions, otherwise I don't see how it is feasible to reason about such issues if the valid and error outputs of the compiler reflect distinct decisions for the program types?</p>
<p dir="auto">Regarding which error is the "correct" one. In your example the satisfiability of 4 in the equation is tied to that of 2, which explains how either error could be "correct". In the OP example however, it is not clear how there is any relation between the subject of the error and the actual source of the error. Namely, the value given for the first <code class="notranslate">cb</code> param is valid on its own, and there is no value given for the property <code class="notranslate">second</code> that would cause <code class="notranslate">cb</code> to no longer be valid. That the compiler handles a type error by flagging a completely unrelated and otherwise valid part of the program seems to me like a clear defect, no different from a more extreme case like:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="function bar&lt;T&gt;(a: T, b: string) {}

bar('abc', 123)
//  ^ hypothetical type error here"><pre class="notranslate"><span class="pl-k">function</span> <span class="pl-en">bar</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">a</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">b</span>: <span class="pl-smi">string</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>

<span class="pl-en">bar</span><span class="pl-kos">(</span><span class="pl-s">'abc'</span><span class="pl-kos">,</span> <span class="pl-c1">123</span><span class="pl-kos">)</span>
<span class="pl-c">//  ^ hypothetical type error here</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56238#issuecomment-1787945087"><span title="10/31/2023 12:56:50 PM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Is it not a defect for the program to choose one type, and the error message choose the other?</p>
</blockquote>
<p dir="auto">Not really. These are separable concerns; they can (and do) have different answers. There are definitely cases where it'd be better to unify these, but also cases where it wouldn't be. It's generally best to try to "contain" errors as much as we can so that a single problem doesn't result in a large chain of downstream errors. For example, let's say you had</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="declare function foo&lt;T extends string&gt;(x: T): T;
const m: string = foo(42);"><pre class="notranslate"><span class="pl-k">declare</span> <span class="pl-k">function</span> <span class="pl-s1">foo</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">string</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">x</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span>: <span class="pl-smi">T</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">m</span>: <span class="pl-smi">string</span> <span class="pl-c1">=</span> <span class="pl-en">foo</span><span class="pl-kos">(</span><span class="pl-c1">42</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This program has at least one error: the inferred type of <code class="notranslate">T</code> will not meet the constraint. Under a "the types must be the same" regime, this program now has two errors - the constraint violation <code class="notranslate">T: number</code>, and the illegal assignment of <code class="notranslate">number</code> to <code class="notranslate">m: string</code>. But the second error isn't one that you should action until you fix the first error (at which point the second error has gone away).</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56266"><span class="OPEN">⊚</span> <span class="number-ref">#56266</span></a> Unexpected error diagnostics in Typescript 5.2.2</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#d93f0b;">Crash</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56266#issuecomment-1786147068"><span title="10/30/2023 3:29:42 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">What I did:</p>
<ul dir="auto">
<li>git clone the repo</li>
<li>npm install typescript@5.2</li>
<li>code .</li>
<li>Open src\node\telemetryReporter.ts</li>
<li>No errors</li>
<li>🤷‍♂️</li>
</ul>
<p dir="auto">Repro steps please?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/lramos15.png?size=40"/>@lramos15</span> <a href="https://github.com/microsoft/TypeScript/issues/56266#issuecomment-1786153789"><span title="10/30/2023 3:36:34 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Remove <code class="notranslate">"applicationinsights": "^2.7.1"</code> from the package JSON and <code class="notranslate">npm install</code>. That seems to be what triggers it for me. I expect to see an error about application insights missing, but not an error regarding the built-in node packages.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56266#issuecomment-1786166836"><span title="10/30/2023 3:48:46 PM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">but not an error regarding the built-in node packages.</p>
</blockquote>
<p dir="auto">Regarding the error -- you explicitly have type directive searching disabled due to <code class="notranslate">typeRoots: []</code> in the tsconfig. I'm guessing <code class="notranslate">applicationinsights</code> got it brought in in a roundabout way, but TS is doing what you told it to.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;typeRoots&quot;: []"><pre class="notranslate"><span class="pl-s">"typeRoots"</span>: <span class="pl-kos">[</span><span class="pl-s1"></span><span class="pl-kos">]</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56266#issuecomment-1786167164"><span title="10/30/2023 3:49:09 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sheetalkamat/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sheetalkamat">@sheetalkamat</a> here's the error trace. <code class="notranslate">@types/node</code> is already in package.json under devdeps</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Err 280   [15:47:21.799] Exception on executing command {
  &quot;seq&quot;: 65,
  &quot;type&quot;: &quot;request&quot;,
  &quot;command&quot;: &quot;applyCodeActionCommand&quot;,
  &quot;arguments&quot;: {
    &quot;command&quot;: {
      &quot;type&quot;: &quot;install package&quot;,
      &quot;file&quot;: &quot;d:/Throwaway/vscode-extension-telemetry/src/node/telemetryReporter.ts&quot;,
      &quot;packageName&quot;: &quot;@types/node&quot;
    }
  }
}:

    Debug Failure. False expression.

    Error: Debug Failure. False expression.
        at _NodeTypingsInstaller.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:186191:13)
        at TypingsCache.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:175906:27)
        at ConfiguredProject2.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:176180:30)
        at applySingleCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:144424:39)
        at Object.applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:144419:96)
        at IpcIOSession.applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184567:36)
        at applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:182680:43)
        at c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184838:69
        at IpcIOSession.executeWithRequestId (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184830:14)
        at IpcIOSession.executeCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184838:29)
        at IpcIOSession.onMessage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184880:51)
        at process.&lt;anonymous&gt; (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:186461:14)
        at process.emit (node:events:513:28)
        at emit (node:internal/child_process:937:14)
        at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
Info 281  [15:47:21.799] response:
    {&quot;seq&quot;:0,&quot;type&quot;:&quot;response&quot;,&quot;command&quot;:&quot;applyCodeActionCommand&quot;,&quot;request_seq&quot;:65,&quot;success&quot;:false,&quot;message&quot;:&quot;Error processing request. Debug Failure. False expression.\nError: Debug Failure. False expression.\n    at _NodeTypingsInstaller.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:186191:13)\n    at TypingsCache.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:175906:27)\n    at ConfiguredProject2.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:176180:30)\n    at applySingleCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:144424:39)\n    at Object.applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:144419:96)\n    at IpcIOSession.applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184567:36)\n    at applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:182680:43)\n    at c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184838:69\n    at IpcIOSession.executeWithRequestId (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184830:14)\n    at IpcIOSession.executeCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184838:29)\n    at IpcIOSession.onMessage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184880:51)\n    at process.&lt;anonymous&gt; (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:186461:14)\n    at process.emit (node:events:513:28)\n    at emit (node:internal/child_process:937:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;}"><pre class="notranslate"><code class="notranslate">Err 280   [15:47:21.799] Exception on executing command {
  "seq": 65,
  "type": "request",
  "command": "applyCodeActionCommand",
  "arguments": {
    "command": {
      "type": "install package",
      "file": "d:/Throwaway/vscode-extension-telemetry/src/node/telemetryReporter.ts",
      "packageName": "@types/node"
    }
  }
}:

    Debug Failure. False expression.

    Error: Debug Failure. False expression.
        at _NodeTypingsInstaller.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:186191:13)
        at TypingsCache.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:175906:27)
        at ConfiguredProject2.installPackage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:176180:30)
        at applySingleCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:144424:39)
        at Object.applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:144419:96)
        at IpcIOSession.applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184567:36)
        at applyCodeActionCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:182680:43)
        at c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184838:69
        at IpcIOSession.executeWithRequestId (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184830:14)
        at IpcIOSession.executeCommand (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184838:29)
        at IpcIOSession.onMessage (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:184880:51)
        at process.&lt;anonymous&gt; (c:\Users\ryanca\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\node_modules\typescript\lib\tsserver.js:186461:14)
        at process.emit (node:events:513:28)
        at emit (node:internal/child_process:937:14)
        at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
Info 281  [15:47:21.799] response:
    {"seq":0,"type":"response","command":"applyCodeActionCommand","request_seq":65,"success":false,"message":"Error processing request. Debug Failure. False expression.\nError: Debug Failure. False expression.\n    at _NodeTypingsInstaller.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:186191:13)\n    at TypingsCache.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:175906:27)\n    at ConfiguredProject2.installPackage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:176180:30)\n    at applySingleCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:144424:39)\n    at Object.applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:144419:96)\n    at IpcIOSession.applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184567:36)\n    at applyCodeActionCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:182680:43)\n    at c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184838:69\n    at IpcIOSession.executeWithRequestId (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184830:14)\n    at IpcIOSession.executeCommand (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184838:29)\n    at IpcIOSession.onMessage (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:184880:51)\n    at process.&lt;anonymous&gt; (c:\\Users\\ryanca\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\node_modules\\typescript\\lib\\tsserver.js:186461:14)\n    at process.emit (node:events:513:28)\n    at emit (node:internal/child_process:937:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)"}
</code></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> assigned <span class="timestamp"><span title="10/30/2023 3:49:15 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> removed <span class="label" style="background-color:#556b75;">Needs More Info</span> <span class="timestamp"><span title="10/30/2023 3:49:22 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#e11d21;">Bug</span> <span class="timestamp"><span title="10/30/2023 3:49:22 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#d93f0b;">Crash</span> <span class="timestamp"><span title="10/30/2023 3:49:22 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="10/30/2023 3:49:24 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/lramos15.png?size=40"/>@lramos15</span> <a href="https://github.com/microsoft/TypeScript/issues/56266#issuecomment-1786330820"><span title="10/30/2023 7:18:51 PM">2 days ago</span></a></span><div class="comment-body"><blockquote>
<blockquote>
<p dir="auto">but not an error regarding the built-in node packages.</p>
</blockquote>
<p dir="auto">Regarding the error -- you explicitly have type directive searching disabled due to <code class="notranslate">typeRoots: []</code> in the tsconfig. I'm guessing <code class="notranslate">applicationinsights</code> got it brought in in a roundabout way, but TS is doing what you told it to.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;typeRoots&quot;: []"><pre class="notranslate"><span class="pl-s">"typeRoots"</span>: <span class="pl-kos">[</span><span class="pl-s1"></span><span class="pl-kos">]</span></pre></div>
</blockquote>
<p dir="auto">Thanks for the fix! Didn't realize I had those</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56174"><span class="OPEN">⊚</span> <span class="number-ref">#56174</span></a> [NewErrors] 5.3.0-dev.20231022 vs 5.2.2</h1><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56174#issuecomment-1775521734"><span title="10/23/2023 9:00:35 AM">on 10/23/2023</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/andrewbranch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/andrewbranch">@andrewbranch</a> can you check on the <code class="notranslate">vuejs/core</code> one? Looks odd</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> milestoned <span class="timestamp"><span title="10/30/2023 10:00:13 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/56174#issuecomment-1785794614"><span title="10/30/2023 11:16:56 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">That’s an instance of <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1943585589" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56107" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56107/hovercard" href="https://github.com/microsoft/TypeScript/issues/56107">#56107</a>, which surprised me when I saw it, so it makes sense to learn it’s a regression.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/56174#issuecomment-1786203510"><span title="10/30/2023 4:30:21 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Fix for vuejs/core landed in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1969268516" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56265" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56265/hovercard" href="https://github.com/microsoft/TypeScript/pull/56265">#56265</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <span title="10/30/2023 4:30:29 PM">2 days ago</span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56261"><span class="CLOSED">⊚</span> <span class="number-ref">#56261</span></a> &quot;Inferred type ... cannot be named&quot; after #55725</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span> <span class="timestamp"><span title="10/30/2023 11:24:45 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> removed <span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span> <span class="timestamp"><span title="10/30/2023 2:30:26 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> added <span class="label" style="background-color:#e11d21;">Bug</span> <span class="timestamp"><span title="10/30/2023 2:30:26 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> milestoned <span class="timestamp"><span title="10/30/2023 2:30:30 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="10/30/2023 2:39:45 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="10/30/2023 2:39:46 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> closed <span class="timestamp"><span title="10/30/2023 3:39:59 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56265"><span class="MERGED">∏</span> <span class="number-ref">#56265</span></a> Fix declaration emit in `--moduleResolution bundler` using wrong exports conditions</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="10/30/2023 2:39:44 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/pull/56265#issuecomment-1786091110"><span title="10/30/2023 2:40:03 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">Does this need a cherry-pick in order to make it into the RC?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> closed <span class="timestamp"><span title="10/30/2023 3:39:58 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/55015"><span class="OPEN">∏</span> <span class="number-ref">#55015</span></a> Add auto-import for the `package.json` `imports` field</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">8</span></span><span class="reaction-group"><span class="emoji">❤️</span><span class="count">23</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/pull/55015#issuecomment-1760171201"><span title="10/12/2023 11:35:24 AM">on 10/12/2023</span></a></span><div class="comment-body"><p dir="auto">Yes, we’ve been talking offline and <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Andarist/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Andarist">@Andarist</a> is working on addressing <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1804069429" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/55015" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/55015/hovercard?comment_id=1296237735&amp;comment_type=review_comment" href="https://github.com/microsoft/TypeScript/pull/55015#discussion_r1296237735">#55015 (comment)</a></p>
<blockquote>
<p dir="auto">I actually suspect the mapping from output files to input files that module resolution does for imports is probably missing in the module specifier generation implementation</p>
</blockquote></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/pull/55015#issuecomment-1786131527"><span title="10/30/2023 3:16:37 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/andrewbranch/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/andrewbranch">@andrewbranch</a> this is ready for re-review :)</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56234"><span class="CLOSED">⊚</span> <span class="number-ref">#56234</span></a> Function with parameters used as a generic constraint does not work as expected</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="10/27/2023 3:15:14 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/alesmenzel.png?size=40"/>@alesmenzel</span> <a href="https://github.com/microsoft/TypeScript/issues/56234#issuecomment-1783629864"><span title="10/27/2023 5:13:17 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Could you please provide a runtime example when this could not work? From my pov, if I pass <code class="notranslate">fnA</code> then the second argument must be of type <code class="notranslate">{ foo: 'foo', bar: 'bar' }</code> which is the signature for the function. Furthermore, if I remove the constraint on the function parameter (change it to <code class="notranslate">extends ((props: any ) =&gt; void)</code>), then it will work. But I would like to require that the passed function expects a property <code class="notranslate">foo</code>.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// But without the constraint it works
function TEST&lt;T extends ((props: any ) =&gt; void)&gt;(inputFn: T, props: Parameters&lt;T&gt;[0]) {
   // ...
   console.log(props.foo)
   return inputFn(props)
}"><pre class="notranslate"><code class="notranslate">// But without the constraint it works
function TEST&lt;T extends ((props: any ) =&gt; void)&gt;(inputFn: T, props: Parameters&lt;T&gt;[0]) {
   // ...
   console.log(props.foo)
   return inputFn(props)
}
</code></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56234#issuecomment-1785766334"><span title="10/30/2023 10:58:18 AM">3 days ago</span></a></span><div class="comment-body"><div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type A = (props: { foo: 'foo', bar: 'bar' }) =&gt; void
type B = (props: { foo: 'foo' }) =&gt; void

function TEST&lt;T extends ((props: { foo: 'foo', [key: string]: any }) =&gt; void)&gt;(inputFn: T, props: Parameters&lt;T&gt;[0]) {
    // This is OK per the definition of the signature
    inputFn({foo: &quot;foo&quot;});
}

const fnA: A = (props) =&gt; {
    // Prints 'I am sure that undefined is &quot;bar&quot;'
    console.log(`I am sure that ${props.bar} is &quot;bar&quot;`);
}
// Alleged: This should be legal
TESt(fnA, { foo: 'foo', bar: 'bar' });"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">A</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">props</span>: <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-c1">bar</span>: <span class="pl-s">'bar'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>
<span class="pl-k">type</span> <span class="pl-smi">B</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">props</span>: <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">'foo'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span>

<span class="pl-k">function</span> <span class="pl-smi">TEST</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">props</span>: <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-kos">[</span><span class="pl-s1">key</span>: <span class="pl-smi">string</span><span class="pl-kos">]</span>: <span class="pl-smi">any</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi"><span class="pl-k">void</span></span><span class="pl-kos">)</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">inputFn</span>: <span class="pl-smi">T</span><span class="pl-kos">,</span> <span class="pl-s1">props</span>: <span class="pl-smi">Parameters</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-c">// This is OK per the definition of the signature</span>
    <span class="pl-en">inputFn</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-c1">foo</span>: <span class="pl-s">"foo"</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>

<span class="pl-k">const</span> <span class="pl-en">fnA</span>: <span class="pl-smi">A</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">props</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-c">// Prints 'I am sure that undefined is "bar"'</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">`I am sure that <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">props</span><span class="pl-kos">.</span><span class="pl-c1">bar</span><span class="pl-kos">}</span></span> is "bar"`</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>
<span class="pl-c">// Alleged: This should be legal</span>
<span class="pl-smi">TESt</span><span class="pl-kos">(</span><span class="pl-s1">fnA</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-c1">bar</span>: <span class="pl-s">'bar'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<blockquote>
<p dir="auto">But I would like to require that the passed function expects a property foo.</p>
</blockquote>
<p dir="auto">You can't put a contravariant constraint on generic parameters. They're only covariant.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/alesmenzel.png?size=40"/>@alesmenzel</span> <a href="https://github.com/microsoft/TypeScript/issues/56234#issuecomment-1786076546"><span title="10/30/2023 2:29:01 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">I see, I could call the inputFn inside the function without all of the required properties, thanks for explaining.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/alesmenzel.png?size=40"/>@alesmenzel</span> closed <span class="timestamp"><span title="10/30/2023 2:29:01 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56107"><span class="OPEN">⊚</span> <span class="number-ref">#56107</span></a> Declaration emit can't utilize exports map information and ends up reporting &quot;this is likely not portable&quot;</h1><span class="label" style="background-color:#fbca04;color:black;">Design Limitation</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">❤️</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> assigned <span class="timestamp"><span title="10/16/2023 12:24:04 PM">on 10/16/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> milestoned <span class="timestamp"><span title="10/30/2023 11:31:03 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <span title="10/30/2023 12:06:45 PM">3 days ago</span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/56107#issuecomment-1785888438"><span title="10/30/2023 12:19:42 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">The compiler architecture doesn’t allow for loading more files after program construction. We’d have to include all <code class="notranslate">exports</code> entrypoints from all packages up front just in case we need them, which seems like an unacceptable performance tradeoff. This is subtle but I think the structure of this package is inherently problematic for TS—you should try to avoid a situation where you have something exported from a public entrypoint whose signature depends on private modules, and here “private” includes “only reachable through re-exporting modules that TS had no reason to parse.” I would possibly recommend using a triple-slash reference in <code class="notranslate">dist/declarations/src/Equal.d.ts</code> (the private module) pointing to <code class="notranslate">dist/effect-Equal.cjs.d.ts</code> (the public entrypoint) to ensure whenever TS loads the private module, it will also load the only module it can use to write a module specifier that gives access to the exports within.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> removed <span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span> <span class="timestamp"><span title="10/30/2023 12:19:50 PM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> added <span class="label" style="background-color:#fbca04;color:black;">Design Limitation</span> <span class="timestamp"><span title="10/30/2023 12:19:51 PM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/56107#issuecomment-1785889261"><span title="10/30/2023 12:20:16 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">On closer inspection, I think this is not the same as the issue in <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1956034783" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56174" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56174/hovercard" href="https://github.com/microsoft/TypeScript/issues/56174">#56174</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/issues/56107#issuecomment-1786019232"><span title="10/30/2023 1:51:03 PM">3 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">This is subtle but I think the structure of this package is inherently problematic for TS—you should try to avoid a situation where you have something exported from a public entrypoint whose signature depends on private modules</p>
</blockquote>
<p dir="auto">This is quite hard to manage though. With inference on it's hard to know what we depend on and if any private modules are used. In this case, the declaration emit of the package itself was done just fine - the problem raised in the consuming project. I see how this might be hard to fix with the mentioned design limitation in mind but, damn, we lack some early errors<br>
that would help us to recognize the problem sooner 😢</p>
<blockquote>
<p dir="auto">I would possibly recommend using a triple-slash reference in dist/declarations/src/Equal.d.ts (the private module) pointing to dist/effect-Equal.cjs.d.ts (the public entrypoint) to ensure whenever TS loads the private module, it will also load the only module it can use to write a module specifier that gives access to the exports within.</p>
</blockquote>
<p dir="auto">This sounds like something we could do. I wonder - should it be OK to reference an ESM path from a CJS declaration file?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/issues/56107#issuecomment-1786066499"><span title="10/30/2023 2:22:13 PM">2 days ago</span></a></span><div class="comment-body"><p dir="auto">You need a <code class="notranslate">resolution-mode</code> attribute, which unfortunately will be an error outside of node16/nodenext before 5.3. You can ts-ignore it 😕</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56254"><span class="OPEN">⊚</span> <span class="number-ref">#56254</span></a> Incorrect semantic highlighting</h1><span class="label" style="background-color:#e11d21;">Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👀</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56254#issuecomment-1785466541"><span title="10/30/2023 8:28:30 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">We'll definitely need a way to repro this. Strange.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Vap0r1ze.png?size=40"/>@Vap0r1ze</span> <a href="https://github.com/microsoft/TypeScript/issues/56254#issuecomment-1785505154"><span title="10/30/2023 8:47:21 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">I remembered what template I was using, and it's enough to reproduce it out of the box:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pnpm create @quick-start/electron app-test --template=svelte-ts
cd app-test
pnpm i
code . src/preload/index.d.ts
# wait for ts-server to be done and see weird stuff"><pre class="notranslate">pnpm create @quick-start/electron app-test --template=svelte-ts
<span class="pl-c1">cd</span> app-test
pnpm i
code <span class="pl-c1">.</span> src/preload/index.d.ts
<span class="pl-c"><span class="pl-c">#</span> wait for ts-server to be done and see weird stuff</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> removed <span class="label" style="background-color:#556b75;">Needs More Info</span> <span class="timestamp"><span title="10/30/2023 9:54:18 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56254#issuecomment-1785663027"><span title="10/30/2023 9:57:31 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Weird, it's wrong but differently-wrong on my machine<br>
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/6685088/279136680-20f41008-d32c-4dbf-af0f-594084670428.png"><img src="https://user-images.githubusercontent.com/6685088/279136680-20f41008-d32c-4dbf-af0f-594084670428.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">This is specific to semantic highlighting</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#e11d21;">Bug</span> <span class="timestamp"><span title="10/30/2023 9:59:14 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> assigned <span class="timestamp"><span title="10/30/2023 9:59:20 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="10/30/2023 9:59:23 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Vap0r1ze.png?size=40"/>@Vap0r1ze</span> <a href="https://github.com/microsoft/TypeScript/issues/56254#issuecomment-1785912185"><span title="10/30/2023 12:36:01 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">For me it goes a little farther than semantic highlighting. Can you try to do <code class="notranslate">window.api;</code> in <code class="notranslate">preload/index.ts</code>? For me it errors until I rename <code class="notranslate">index.d.ts</code> to something else like <code class="notranslate">real.d.ts</code></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/53933"><span class="CLOSED">⊚</span> <span class="number-ref">#53933</span></a> Confusing rules around function parameter names in a type</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="4/21/2023 2:45:54 AM">on 4/21/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> closed <span class="timestamp"><span title="10/30/2023 12:24:16 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/53946"><span class="MERGED">∏</span> <span class="number-ref">#53946</span></a> fix(53933): Confusing rules around function parameter names in a type</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/53946#issuecomment-1518372629"><span title="4/21/2023 3:01:42 PM">on 4/21/2023</span></a></span><div class="comment-body"><p dir="auto">Hey <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>, the results of running the DT tests are ready.<br>
Everything looks the same!<br>
<a href="https://typescript.visualstudio.com/TypeScript/_build/index?buildId=153081&amp;_a=summary" rel="nofollow">You can check the log here</a>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> closed <span class="timestamp"><span title="10/30/2023 12:24:15 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/40383"><span class="CLOSED">⊚</span> <span class="number-ref">#40383</span></a> Type '{ className: string; }' is not assignable to type 'IntrinsicAttributes &amp; Props'. when using generics in component props. </h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/nvmnghia.png?size=40"/>@nvmnghia</span> <a href="https://github.com/microsoft/TypeScript/issues/40383#issuecomment-720395788"><span title="11/2/2020 2:52:12 AM">on 11/2/2020</span></a></span><div class="comment-body"><p dir="auto">Hi, is there any guide on TypeScript typeset for props?</p>
<p dir="auto">Currently I do as follow:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="interface MyCompProps {
	someAttr: number
}"><pre class="notranslate"><span class="pl-k">interface</span> <span class="pl-smi">MyCompProps</span> <span class="pl-kos">{</span>
	<span class="pl-c1">someAttr</span>: <span class="pl-smi">number</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">I then want to use <code class="notranslate">className</code> and <code class="notranslate">aria</code>, but listing them manually is incredibly cumbersome. I look around and found nothing until I hit this issue. Now it's clear for me: <code class="notranslate">interface MyCompProps extends React.HTMLAttributes&lt;any&gt;</code>, though I still don't fully understand it as I don't have an extensive guide on this matter.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">9</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Inna-Mykytiuk.png?size=40"/>@Inna-Mykytiuk</span> <a href="https://github.com/microsoft/TypeScript/issues/40383#issuecomment-1783875291"><span title="10/28/2023 10:20:33 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Help me please. I have this issue<br>
Type '{ setEditTodo: Dispatch&lt;SetStateAction&lt;string | null&gt;&gt;; }' is not assignable to type 'IntrinsicAttributes &amp; ToDoState'.<br>
Property 'setEditTodo' does not exist on type 'IntrinsicAttributes &amp; ToDoState'.</p>
<p dir="auto">"use client";</p>
<p dir="auto">import React, { useState } from "react";<br>
import { BsEmojiSmile } from "react-icons/bs";<br>
import { AiOutlinePlus } from "react-icons/ai";<br>
import Picker from "@emoji-mart/react";<br>
import data from "@emoji-mart/data";<br>
import { TodoItem } from "./TodoItem";<br>
import { useAppSelector, useAppDispatch } from "../../redux/hooks";<br>
import { addTodo } from "../../redux/slice/todoSlice";</p>
<p dir="auto">// interface TodoSetProps {<br>
//   setEditTodo: React.Dispatch&lt;React.SetStateAction&lt;string | null&gt;&gt;;<br>
// }</p>
<p dir="auto">interface TodoItemProps {<br>
id: number;<br>
text: string;<br>
date: Date;<br>
completed: boolean;<br>
setEditTodo: React.Dispatch&lt;React.SetStateAction&lt;string | null&gt;&gt;;<br>
}<br>
interface ToDoState {<br>
todoList: TodoItemProps[];<br>
}</p>
<p dir="auto">const Todo: React.FC = () =&gt; {<br>
const [showEmoji, setShowEmoji] = useState(false);<br>
const [text, setText] = useState("");<br>
const [editTodo, setEditTodo] = useState&lt;string | null&gt;(null);</p>
<p dir="auto">const dispatch = useAppDispatch();</p>
<p dir="auto">// add emoji<br>
const addEmoji = (e: any) =&gt; {<br>
const sym = e.unified.split("_");<br>
const codeArray: any = [];<br>
sym.forEach((el: any) =&gt; codeArray.push("0x" + el));<br>
let emoji = String.fromCodePoint(...codeArray);<br>
setText(text + emoji);<br>
};</p>
<p dir="auto">const handleSubmit = (e: React.FormEvent) =&gt; {<br>
e.preventDefault();<br>
dispatch(addTodo({<br>
id: Math.floor(Math.random() * 100000),<br>
text,<br>
date: new Date().toISOString(),<br>
completed: false,<br>
}))</p>
<p dir="auto">}</p>
<p dir="auto">return (<br>
</p><div dir="auto"><br>
<h1 dir="auto"><br>
tailwind todo list<br>
</h1><p dir="auto"></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  {/* todo input  */}
  &lt;form
    onSubmit={handleSubmit}
    className=&quot;flex items-start gap-2 pt-2rem&quot;&gt;
    &lt;div className=&quot;w-full flex items-end p-2 bg-todo rounded-sm relative&quot;&gt;
      &lt;textarea
        value={text}
        onChange={(e) =&gt; setText(e.target.value)}
        placeholder=&quot;write your text&quot;
        className=&quot;w-full bg-transparent outline-none resize-none text-sm&quot;
        cols={30}
        rows={2}&gt;&lt;/textarea&gt;

      &lt;span
        onClick={() =&gt; setShowEmoji(!showEmoji)}
        className=&quot;cursor-pointer hover:text-slate-300&quot;&gt;
        &lt;BsEmojiSmile /&gt;
      &lt;/span&gt;

      {showEmoji &amp;&amp; (
        &lt;div className=&quot;absolute top-[100%] right-2&quot;&gt;
          &lt;Picker
            data={data}
            emojiSize={20}
            emojiButtonSize={28}
            onEmojiSelect={addEmoji}
            maxFrequentRows={0}
          /&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;

    &lt;button
      className=&quot;flex items-center capitalize gap-2 bg-yellow-200 text-black py-1.5
        px-3 rounded-sm hover:bg-yellow-100&quot;&gt;
      &lt;AiOutlinePlus /&gt;
      {editTodo ? &quot;update&quot; : &quot;add&quot;}
    &lt;/button&gt;
  &lt;/form&gt;

  {/* print the todo lists  */}
  &lt;div className=&quot;mt-[2rem]&quot;&gt;
    &lt;TodoItem setEditTodo={setEditTodo} /&gt;
  &lt;/div&gt;
&lt;/div&gt;"><pre class="notranslate"><code class="notranslate">  {/* todo input  */}
  &lt;form
    onSubmit={handleSubmit}
    className="flex items-start gap-2 pt-2rem"&gt;
    &lt;div className="w-full flex items-end p-2 bg-todo rounded-sm relative"&gt;
      &lt;textarea
        value={text}
        onChange={(e) =&gt; setText(e.target.value)}
        placeholder="write your text"
        className="w-full bg-transparent outline-none resize-none text-sm"
        cols={30}
        rows={2}&gt;&lt;/textarea&gt;

      &lt;span
        onClick={() =&gt; setShowEmoji(!showEmoji)}
        className="cursor-pointer hover:text-slate-300"&gt;
        &lt;BsEmojiSmile /&gt;
      &lt;/span&gt;

      {showEmoji &amp;&amp; (
        &lt;div className="absolute top-[100%] right-2"&gt;
          &lt;Picker
            data={data}
            emojiSize={20}
            emojiButtonSize={28}
            onEmojiSelect={addEmoji}
            maxFrequentRows={0}
          /&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;

    &lt;button
      className="flex items-center capitalize gap-2 bg-yellow-200 text-black py-1.5
        px-3 rounded-sm hover:bg-yellow-100"&gt;
      &lt;AiOutlinePlus /&gt;
      {editTodo ? "update" : "add"}
    &lt;/button&gt;
  &lt;/form&gt;

  {/* print the todo lists  */}
  &lt;div className="mt-[2rem]"&gt;
    &lt;TodoItem setEditTodo={setEditTodo} /&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div>
<p dir="auto">);<br>
};</p>
<p dir="auto">export { Todo }</p>
<p dir="auto">"use client";<br>
import {<br>
AiTwotoneDelete,<br>
AiTwotoneEdit,<br>
AiOutlineCheckCircle,<br>
} from "react-icons/ai";<br>
import { FaTimes } from "react-icons/fa";</p>
<p dir="auto">import React, { useState } from "react";<br>
import moment from "moment/moment";<br>
import Layer from "./Layer";</p>
<p dir="auto">// interface TodoSetProps {<br>
//   setEditTodo: React.Dispatch&lt;React.SetStateAction&lt;string | null&gt;&gt;;<br>
// }</p>
<p dir="auto">interface TodoItemProps {<br>
id: number;<br>
text: string;<br>
date: Date;<br>
completed: boolean;<br>
setEditTodo: React.Dispatch&lt;React.SetStateAction&lt;string | null&gt;&gt;;<br>
}<br>
interface ToDoState {<br>
todoList: TodoItemProps[];<br>
}</p>
<p dir="auto">const TodoItem: React.FC = () =&gt; {<br>
const [showText, setShowText] = useState(false);<br>
const [showFullText, setShowFullText] = useState("");</p>
<p dir="auto">const fullText = (id: number) =&gt; {<br>
const todoText = todo.find((todo) =&gt; todo.id === id);<br>
if (todoText) {<br>
setShowFullText(todoText.text);<br>
setShowText(true);<br>
}<br>
};</p>
<p dir="auto">const todo = [<br>
{<br>
id: 1,<br>
text: "Hello world",<br>
date: new Date(),<br>
completed: false,<br>
},<br>
{<br>
id: 2,<br>
text: "Hello world",<br>
date: new Date(),<br>
completed: false,<br>
},<br>
];</p>
<p dir="auto">return (<br>
</p><div id="user-content-grid" dir="auto"><br>
{todo.map((todo, i) =&gt; (<br>
<div dir="auto"><br>
<span><br>
{moment(todo.date).fromNow()}<br>
</span><p dir="auto"></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="      &lt;div className=&quot;flex flex-col justify-between h-[80%]&quot;&gt;
        &lt;h1
          className={`pt-3 text-sm ${todo.completed ? &quot;line-through text-slate-400&quot; : &quot;&quot;
            }`}&gt;
          {todo.text.substring(0, 36)}
          {todo.text.length &gt; 36 &amp;&amp; (
            &lt;button
              onClick={() =&gt; fullText(todo.id)}
              className=&quot;text-red-400 text-xs hover:text-red-600&quot;&gt;
              ...more
            &lt;/button&gt;
          )}
        &lt;/h1&gt;

        &lt;div className=&quot;flex items-center justify-end gap-1 py-2&quot;&gt;
          &lt;span className=&quot;cursor-pointer hover:text-slate-500&quot;&gt;
            &lt;AiTwotoneDelete /&gt;
          &lt;/span&gt;
          &lt;span className=&quot;cursor-pointer hover:text-slate-500&quot;&gt;
            &lt;AiTwotoneEdit /&gt;
          &lt;/span&gt;
          &lt;span className=&quot;cursor-pointer hover:text-slate-500&quot;&gt;
            &lt;AiOutlineCheckCircle /&gt;
          &lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {showText &amp;&amp; (
        &lt;div className=&quot;absolute inset-0 flex items-center justify-center bg-slate-600/75&quot;&gt;
          &lt;span
            onClick={() =&gt; setShowText(false)}
            className=&quot;absolute top-10 right-10 text-xl cursor-pointer hover:text-slate-500&quot;&gt;
            &lt;FaTimes /&gt;
          &lt;/span&gt;
          &lt;div className=&quot;w-[25rem] h-[25rem] bg-todo rounded-md&quot;&gt;
            &lt;Layer text={showFullText} /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  ))}
&lt;/div&gt;"><pre class="notranslate"><code class="notranslate">      &lt;div className="flex flex-col justify-between h-[80%]"&gt;
        &lt;h1
          className={`pt-3 text-sm ${todo.completed ? "line-through text-slate-400" : ""
            }`}&gt;
          {todo.text.substring(0, 36)}
          {todo.text.length &gt; 36 &amp;&amp; (
            &lt;button
              onClick={() =&gt; fullText(todo.id)}
              className="text-red-400 text-xs hover:text-red-600"&gt;
              ...more
            &lt;/button&gt;
          )}
        &lt;/h1&gt;

        &lt;div className="flex items-center justify-end gap-1 py-2"&gt;
          &lt;span className="cursor-pointer hover:text-slate-500"&gt;
            &lt;AiTwotoneDelete /&gt;
          &lt;/span&gt;
          &lt;span className="cursor-pointer hover:text-slate-500"&gt;
            &lt;AiTwotoneEdit /&gt;
          &lt;/span&gt;
          &lt;span className="cursor-pointer hover:text-slate-500"&gt;
            &lt;AiOutlineCheckCircle /&gt;
          &lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {showText &amp;&amp; (
        &lt;div className="absolute inset-0 flex items-center justify-center bg-slate-600/75"&gt;
          &lt;span
            onClick={() =&gt; setShowText(false)}
            className="absolute top-10 right-10 text-xl cursor-pointer hover:text-slate-500"&gt;
            &lt;FaTimes /&gt;
          &lt;/span&gt;
          &lt;div className="w-[25rem] h-[25rem] bg-todo rounded-md"&gt;
            &lt;Layer text={showFullText} /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  ))}
&lt;/div&gt;
</code></pre></div>
<p dir="auto">);<br>
};</p>
<p dir="auto">export { TodoItem }</p></div></div></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/microsoft.png?size=40"/>@microsoft</span> locked <span class="timestamp"><span title="10/30/2023 12:23:19 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/48145"><span class="OPEN">⊚</span> <span class="number-ref">#48145</span></a> es2022 transpiles class fields to static init blocks</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">15</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/trusktr.png?size=40"/>@trusktr</span> <a href="https://github.com/microsoft/TypeScript/issues/48145#issuecomment-1686885649"><span title="8/21/2023 12:14:43 PM">on 8/21/2023</span></a></span><div class="comment-body"><p dir="auto">Static class fields are also valid es2022, so there's no need to transpile them to static init blocks if they're already valid es2022 code as written.</p>
<p dir="auto">Given this valid es2022 input,</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Foo {
  static css = 'foo'
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-v">Foo</span> <span class="pl-kos">{</span>
  <span class="pl-k">static</span> <span class="pl-c1">css</span> <span class="pl-c1">=</span> <span class="pl-s">'foo'</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">TypeScript unnecessarily converts it into this:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Foo {
    static { this.css = 'foo'; }
}"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-v">Foo</span> <span class="pl-kos">{</span>
    <span class="pl-k">static</span> <span class="pl-kos">{</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">css</span> <span class="pl-c1">=</span> <span class="pl-s">'foo'</span><span class="pl-kos">;</span> <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">There isn't any reason for this conversion to happen.</p>
<p dir="auto"><a href="https://www.typescriptlang.org/play?target=9&amp;ts=5.2.1-rc#code/MYGwhgzhAEBiD29oG8BQ1oQC5iwS2GmCmgF5oByAM0QtQF9Ug" rel="nofollow">Playground showing unexpected output</a></p>
<p dir="auto">^ No decorators are being used in that example.</p>
<p dir="auto">It might be that TS is pre-emptively using static init blocks for use with decorators. Example with decorators where static init blocks are needed as an implementation detail of decorators:</p>
<p dir="auto"><a href="https://www.typescriptlang.org/play?target=9&amp;ts=5.2.1-rc#code/MYewdgzgLgBAJgU1DAvDAFOglKgfDAbwF8cBDCGUsATwChbgAbcigMRBENphgAFFk0UlACWwGMAgU0AcgBmHGbSK0gA" rel="nofollow">Playground using decorators</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/trusktr.png?size=40"/>@trusktr</span> <a href="https://github.com/microsoft/TypeScript/issues/48145#issuecomment-1785837995"><span title="10/30/2023 11:44:55 AM">3 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I don't really like any of the implied solutions here. Not using useful ES2022 features in ES2022 emit raises the question of why we would call that target ES2022. Making a new target, let's call it "ES2021.5", raises the question of what exactly is in that target and how we choose that would be based on a point-in-time evaluation that is difficult to explain in the future.</p>
</blockquote>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> I totally hear you on that, but <code class="notranslate">static reactiveProperties = ['colors', 'wingSize']</code> is es2022 code that need not be converted to anything.</p>
<p dir="auto">Converting this <code class="notranslate">static foo = 123</code> to <code class="notranslate">static { this.foo = 123 }</code> <em>is not downleveling</em>.</p>
<p dir="auto">Is this an accidental side-effect of standard decorator support? If there are no decorators, no conversion needs to happen.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/48145#issuecomment-1785859585"><span title="10/30/2023 11:59:17 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/trusktr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/trusktr">@trusktr</a> it sounds like you're confused by having <code class="notranslate">useDefineForClassFields</code> off</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/trusktr.png?size=40"/>@trusktr</span> <a href="https://github.com/microsoft/TypeScript/issues/48145#issuecomment-1785884947"><span title="10/30/2023 12:17:23 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/trusktr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/trusktr">@trusktr</a> Ah! Sorry. I overlooked that in the current project <code class="notranslate">useDefineForClassFields</code> is set to <code class="notranslate">false</code>, and I forgot that's what the OP was doing. That makes total sense.</p>
<p dir="auto">As for Lit, I think they need to make their decorator support all permutations in Lit 3 since they still support legacy (<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/bennypowers/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bennypowers">@bennypowers</a> if needed I have sample implementations and tests of decorators that support both <code class="notranslate">useDefineForClassFields</code> values, and all 4 permutations of Babel loose/non-loose modes, for a total of 6 possible permutations (I run tests 6 times for my still-legacy decorators), and with standard decorators in TS and Babel this can be expanded to 12 permutations (run all tests 12 times) assuming loose mode still applies for standard decorators (I really hope not, its just a foot gun)).</p>
<p dir="auto">When Lit moves to version 4 or higher and supports only standard decorators, it can keep <code class="notranslate">useDefineForClassFields</code> enabled so that Lit code is 100% compatible with vanilla JavaScript, and test permutations can be reduced to two (TS and Babel), unless by that time it is out in browsers, then just test the real ones.</p>
<p dir="auto">I don't think that TypeScript can really do anything about this because the option does exactly what it says it does. Plus as of Safari 16.4 static init blocks are supported, so a new escape hatch option will not be needed for long (yet would need to be supported for a long time).</p>
<p dir="auto">I think this can be closed.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56263"><span class="MERGED">∏</span> <span class="number-ref">#56263</span></a> Add dependabot to pr_owners</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/30/2023 11:32:13 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> closed <span class="timestamp"><span title="10/30/2023 12:08:11 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/41281"><span class="CLOSED">⊚</span> <span class="number-ref">#41281</span></a> Module resolution fails when substituion path exists but original path directory does not</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><span class="label" style="background-color:#5319e7;">Rescheduled</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">3</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="2/1/2023 11:05:52 AM">on 2/1/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> <a href="https://github.com/microsoft/TypeScript/issues/41281#issuecomment-1785803388"><span title="10/30/2023 11:22:35 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">This doesn't appear to be a bug, but is the intended behavior of the feature. <code class="notranslate">typesVersions</code> is only used to override types specific to a version of TypeScript given a module that we could have resolved <em>without</em> <code class="notranslate">typesVersions</code>. Even though you have specified a TS version of <code class="notranslate">*</code>, <code class="notranslate">typesVersions</code> still requires a valid original path to override. As such, y\You must have a file at the <code class="notranslate">main</code> path for us to start with, even if that file is an empty <code class="notranslate">index.d.ts</code> or <code class="notranslate">index.js</code> file.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> added <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="10/30/2023 11:22:49 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/rbuckton.png?size=40"/>@rbuckton</span> closed <span class="timestamp"><span title="10/30/2023 11:22:52 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> removed <span class="label" style="background-color:#e11d21;">Bug</span> <span class="timestamp"><span title="10/30/2023 12:21:11 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56262"><span class="CLOSED">⊚</span> <span class="number-ref">#56262</span></a> sweeter syntax for creating new anonymous subclass instance</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Out of Scope</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/nmain.png?size=40"/>@nmain</span> <a href="https://github.com/microsoft/TypeScript/issues/56262#issuecomment-1785794601"><span title="10/30/2023 11:16:56 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Is this not a duplicate of <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1966736168" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56245" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56245/hovercard" href="https://github.com/microsoft/TypeScript/issues/56245">#56245</a>?</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56262#issuecomment-1785843236"><span title="10/30/2023 11:48:30 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ORESoftware/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ORESoftware">@ORESoftware</a> I'm sorry to say it, but it's time for you to stop logging issues here. People creating bugs/suggestions are expected to have a minimal understanding of the scope and operation of TypeScript, but you've consistently not demonstrated that. 46 of your last 50 issues were categorized as some variant of "noise". Out of the 100 issues you've logged, zero got labelled "Bug", and only 1 was an accepted change as far as I can tell. This in particular appears to be exact duplicate of an issue logged a few days ago, which is not acceptable behavior. This is not your <a href="https://github.com/microsoft/TypeScript/issues/32477#issuecomment-514294695" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/32477/hovercard">first warning</a> on using the issue tracker responsibly; future misuse will result in an org block.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/30/2023 11:48:58 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556677;">Out of Scope</span> <span class="timestamp"><span title="10/30/2023 11:48:58 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> closed <span class="timestamp"><span title="10/30/2023 11:49:03 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56260"><span class="OPEN">⊚</span> <span class="number-ref">#56260</span></a> Invalid synthesized import specifiers on infered types in declarations</h1><span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/dmaretskyi.png?size=40"/>@dmaretskyi</span> <a href="https://github.com/microsoft/TypeScript/issues/56260#issuecomment-1785792768"><span title="10/30/2023 11:15:39 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">I'm suspecting this has something to do with how type-aliases are unwrapped during declaration generation: <a href="https://www.typescriptlang.org/play?target=99#code/KYDwDg9gTgLgBDAnmYcBiEJwLxwOQCGecAPvgEZ4BQVoksCyqAQgVDupjQMYQB2AZ3gBzYDAAaHABQBKAFxxW7bAD58RANw060eL0HwAZpmkycagN5U4NuFDEBXKHziiJsqgF8aVIA" rel="nofollow">playground</a></p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export type Foo = 'a' | 'b'

export type Bar = Foo

const getX = (): Bar =&gt; 'a';

export const foo = () =&gt; {
    return getX()
}

// This generates:

export type Foo = 'a' | 'b';
export type Bar = Foo;
export declare const foo: () =&gt; Foo;"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">Foo</span> <span class="pl-c1">=</span> <span class="pl-s">'a'</span> <span class="pl-c1">|</span> <span class="pl-s">'b'</span>

<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">Bar</span> <span class="pl-c1">=</span> <span class="pl-smi">Foo</span>

<span class="pl-k">const</span> <span class="pl-en">getX</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-kos">)</span>: <span class="pl-smi">Bar</span> <span class="pl-c1">=&gt;</span> <span class="pl-s">'a'</span><span class="pl-kos">;</span>

<span class="pl-k">export</span> <span class="pl-k">const</span> <span class="pl-en">foo</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-en">getX</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span>

<span class="pl-c">// This generates:</span>

<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">Foo</span> <span class="pl-c1">=</span> <span class="pl-s">'a'</span> <span class="pl-c1">|</span> <span class="pl-s">'b'</span><span class="pl-kos">;</span>
<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">Bar</span> <span class="pl-c1">=</span> <span class="pl-smi">Foo</span><span class="pl-kos">;</span>
<span class="pl-k">export</span> <span class="pl-k">declare</span> <span class="pl-k">const</span> <span class="pl-s1">foo</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">Foo</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Notice that <code class="notranslate">foo</code>'s return type was inferred as <code class="notranslate">Foo</code> instead of <code class="notranslate">Bar</code> that was explicitly specified in <code class="notranslate">getX</code> function. This is fine when all declarations are in one file, but could break if the aliases are spred out accross different files.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> assigned <span class="timestamp"><span title="10/30/2023 3:07:55 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#DDDDDD;color:black;">Needs Investigation</span> <span class="timestamp"><span title="10/30/2023 3:07:59 PM">2 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="10/30/2023 3:08:03 PM">2 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56187"><span class="MERGED">∏</span> <span class="number-ref">#56187</span></a> fix(55237): TypeScript 5.2 &quot;move to file&quot; results in duplicate imports</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="10/23/2023 9:22:03 AM">on 10/23/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> closed <span class="timestamp"><span title="10/30/2023 10:50:05 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> <a href="https://github.com/microsoft/TypeScript/pull/56187#issuecomment-1785753671"><span title="10/30/2023 10:50:13 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Thanks <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/a-tarasyuk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/a-tarasyuk">@a-tarasyuk</a>!</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55237"><span class="CLOSED">⊚</span> <span class="number-ref">#55237</span></a> TypeScript 5.2 &quot;move to file&quot; results in duplicate imports</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">4</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="10/23/2023 9:22:05 AM">on 10/23/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/andrewbranch.png?size=40"/>@andrewbranch</span> closed <span class="timestamp"><span title="10/30/2023 10:50:07 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/30611"><span class="OPEN">⊚</span> <span class="number-ref">#30611</span></a> Allow &quot;T extends enum&quot; generic constraint</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">230</span></span><span class="reaction-group"><span class="emoji">👀</span><span class="count">16</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Benjamin-Dobell.png?size=40"/>@Benjamin-Dobell</span> <a href="https://github.com/microsoft/TypeScript/issues/30611#issuecomment-1703733123"><span title="9/1/2023 11:40:33 PM">on 9/1/2023</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sh-pq/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sh-pq">@sh-pq</a> I think the following will do what you were after:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type StandardEnum = Record&lt;string, string | number&gt;

type StringLikeValues&lt;T&gt; = { [K in keyof T]: T[K] extends string ? T[K] : never }[keyof T]
type StringValues&lt;T&gt; = StringLikeValues&lt;T&gt; extends string ? `${StringLikeValues&lt;T&gt;}` : never

type EnumCompatibleValue&lt;Enum extends StandardEnum&gt; = Enum[keyof Enum] | StringValues&lt;Enum&gt;;"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">StandardEnum</span> <span class="pl-c1">=</span> <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">,</span> <span class="pl-smi">string</span> <span class="pl-c1">|</span> <span class="pl-smi">number</span><span class="pl-kos">&gt;</span>

<span class="pl-k">type</span> <span class="pl-smi">StringLikeValues</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-kos">[</span><span class="pl-smi">K</span> <span class="pl-k">in</span> <span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">]</span>: <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-smi">K</span><span class="pl-kos">]</span> <span class="pl-k">extends</span> <span class="pl-smi">string</span> ? <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-smi">K</span><span class="pl-kos">]</span> : <span class="pl-smi">never</span> <span class="pl-kos">}</span><span class="pl-kos">[</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">]</span>
<span class="pl-k">type</span> <span class="pl-smi">StringValues</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">StringLikeValues</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span> <span class="pl-k">extends</span> <span class="pl-smi">string</span> ? `${<span class="pl-smi">StringLikeValues</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">}</span>` : <span class="pl-smi">never</span>

<span class="pl-k">type</span> <span class="pl-smi">EnumCompatibleValue</span><span class="pl-c1">&lt;</span><span class="pl-smi">Enum</span> <span class="pl-k">extends</span> <span class="pl-smi">StandardEnum</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">Enum</span><span class="pl-kos">[</span><span class="pl-k">keyof</span> <span class="pl-smi">Enum</span><span class="pl-kos">]</span> <span class="pl-c1">|</span> <span class="pl-smi">StringValues</span><span class="pl-kos">&lt;</span><span class="pl-smi">Enum</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><code class="notranslate">EnumCompatibleValue</code> would be <code class="notranslate">Literal</code> in your example.</p>
<p dir="auto">Can also extend this to obtain an enum from a literal with:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type ValueToEnum&lt;Enum extends StandardEnum, N extends EnumCompatibleValue&lt;Enum&gt;&gt; =
  N extends infer Member extends Enum[keyof Enum]
    ? Member
    : N extends `${infer Member extends Enum[keyof Enum]}` ? Member : never;"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">ValueToEnum</span><span class="pl-c1">&lt;</span><span class="pl-smi">Enum</span> <span class="pl-k">extends</span> <span class="pl-smi">StandardEnum</span><span class="pl-kos">,</span> <span class="pl-smi">N</span> <span class="pl-k">extends</span> <span class="pl-smi">EnumCompatibleValue</span><span class="pl-kos">&lt;</span><span class="pl-smi">Enum</span><span class="pl-kos">&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span>
  <span class="pl-smi">N</span> <span class="pl-k">extends</span> infer <span class="pl-smi">Member</span> <span class="pl-k">extends</span> <span class="pl-smi">Enum</span><span class="pl-kos">[</span><span class="pl-k">keyof</span> <span class="pl-smi">Enum</span><span class="pl-kos">]</span>
    ? <span class="pl-smi">Member</span>
    : <span class="pl-smi">N</span> <span class="pl-k">extends</span> `${infer <span class="pl-smi">Member</span> <span class="pl-k">extends</span> <span class="pl-smi">Enum</span><span class="pl-kos">[</span><span class="pl-k">keyof</span> <span class="pl-smi">Enum</span><span class="pl-kos">]</span><span class="pl-kos">}</span>` ? <span class="pl-smi">Member</span> : <span class="pl-smi">never</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/482276/265185651-a6205e77-f124-4d60-9d6f-cda7bb0f4a6a.png"><img src="https://user-images.githubusercontent.com/482276/265185651-a6205e77-f124-4d60-9d6f-cda7bb0f4a6a.png" alt="CleanShot 2023-09-02 at 16 42 33" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://www.typescriptlang.org/play?ts=5.2.2&amp;ssl=10&amp;ssc=75&amp;pln=8&amp;pc=1#code/C4TwDgpgBAysCGA7AJvATsgoogrgWygF4oAlCAYwHsMAeAZ2DQEtEBzAGigebagB8ouPACMIaAHwAoSaEixGLVgBkmAawgA1eABscEOjQAq4olADeUANoBpKCyjqQlAGZRDAXQBcbm+6gQAD2AIFDouBV4Afh9rP29ECAA3MSgAX0tHFzd3GXBoOB5WLV19IxNiAsUVdWK9A2N-IJDkMO5FKGiAAwASM0q2as0dOrLUzqh4pLFpWWhsfABhSjwweGAmYW0hkpp5gkDg0PkkVAw98qg9jIgnVz2-AX6i4dLzgG4ZvKhaiENKPd2QkahxaxxQ6CwQk4ADlgc0wnslis1hstj9AfhxBdYQd4XZEM4UgBZCAiFK4o5XTJ3IQ5KAdKAksloST07w4ppHHpmFiEtCM0mifkU0FUm5Ze5jBlMoUTQRTNAfSQAemVbn0wDo0hC+CgACF4HQmOQ9uZWfSoABBdjm+l6ySpbVAp6mszmgBilEopgA5M4vT6bXb0L7hOhAw6nbrofgxMbXeaAFpib3EAAMQagAHkEqYAIw2x2SHUEJFgShG4IJi1WzP0nPQYgF21QT2pqB+gORyRURAMKBho0moSW7wGod7AB0ltMaaghu+Lz+ANmWXH8ahUDT4g+vf7g43+D1Y8Nh7wk71+fnYR+y6ENFXrnXw-wnDzO57lD7wAHp5feCzHBgCzZwSCQVgIBPCcgWIAAma9FxKO98AfPI1z-PZOFgj89x-A9-zIAArChgCeMgwDQfQQgQdYvygs9ZwQ29-nvR99QwzcfTTH0P0-b9wkKPY228F0hEnNtfX9SgfSYpcWJQtjRNfDspJ43cv37No2D2A00BEiJWCnXTQ3DWSkPkvBUMgLIlLwTgfTDNA1L4zSDL2QDgNA8DIPkQSYKgeCF2Ylc0NcWz7O0eA8AgZyXJ-IQ43-ZM0EodlY2Yf9J2S9s5yCuSQus1wY2ijLMK3HCNPi9KzwbNKSrPScGyvPLzIKiAsmKxKyvfdT+IS0qhA8kCwLYHzOoG3U4LMvRkMstjxrPLCKr66qCIgYjyFIgzyMouhqJROioAW-9GJamaLKs9qitWsquNi3CoCoFYKyYKsR28MsXre-Bp1Om98tY0KoE+ysIDK7dev7J7y1B9yEg+5YYdesGxKaptpt+C62JB5HuuWqHEa+lH8GE4HCdhsSJOITtpIx2bLqyHHvrslSA3xn9oaJvYiJIsiIAoqjEBophDqZ4mCHTOmsaBsXbu49nHvJ3HBqA4bvIR56KcmgKpbaxmleZpalQe+BvERRGUU2bY9AZ1xZaEC57Z+y1IZ-KSzaEMtLbRF5bbJzXlcxUwnfPNtXagL8fPN5F1it9FsYN8XHcTqcG3D-rjVHS5PYt2OfZ2BOA+Zi403T1bauzxZc9Ra2ID9kOLjzcOtNYUno9WPPa-rlOHckgMPiAA" rel="nofollow">Playground Tests</a></p>
<p dir="auto"><code class="notranslate">ValueToEnum</code> can be used to enforce (at compile time) that mappings of some sort exist between literals and corresponding enum values — this is my use case.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/paolosimone.png?size=40"/>@paolosimone</span> <a href="https://github.com/microsoft/TypeScript/issues/30611#issuecomment-1785733229"><span title="10/30/2023 10:37:28 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">I recently ended up here searching for the same use case <em>"EnumSelect React Component"</em> raised by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/seanlaff/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/seanlaff">@seanlaff</a></p>
<p dir="auto">Probably it has already been solved countless times, nevertheless I'll leave here my solution (based on <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/smaznet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/smaznet">@smaznet</a> modeling) hoping it may be helpful to future readers.</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type EnumType = { [key: string]: number | string };
type ValueOf&lt;T&gt; = T[keyof T];

type EnumSelectProps&lt;T extends EnumType&gt; = {
  enumType: T;
  labels: Record&lt;ValueOf&lt;T&gt;, string&gt;;
};

function EnumSelect&lt;T extends EnumType&gt;(props: EnumSelectProps&lt;T&gt;): JSX.Element {
  return (
    &lt;select&gt;
      {Object.values(props.enumType).map((value) =&gt; (
        &lt;option key={value} value={value}&gt;
          {props.labels[value as ValueOf&lt;T&gt;]}
        &lt;/option&gt;
      ))}
    &lt;/select&gt;
  );
}"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">EnumType</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-kos">[</span><span class="pl-s1">key</span>: <span class="pl-smi">string</span><span class="pl-kos">]</span>: <span class="pl-smi">number</span> <span class="pl-c1">|</span> <span class="pl-smi">string</span> <span class="pl-kos">}</span><span class="pl-kos">;</span>
<span class="pl-k">type</span> <span class="pl-smi">ValueOf</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-smi">T</span><span class="pl-kos">[</span><span class="pl-k">keyof</span> <span class="pl-smi">T</span><span class="pl-kos">]</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">EnumSelectProps</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">EnumType</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c1">enumType</span>: <span class="pl-smi">T</span><span class="pl-kos">;</span>
  <span class="pl-c1">labels</span>: <span class="pl-smi">Record</span><span class="pl-kos">&lt;</span><span class="pl-smi">ValueOf</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">function</span> <span class="pl-smi">EnumSelect</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span> <span class="pl-k">extends</span> <span class="pl-smi">EnumType</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">props</span>: <span class="pl-smi">EnumSelectProps</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">)</span>: <span class="pl-smi">JSX</span><span class="pl-kos">.</span><span class="pl-smi">Element</span> <span class="pl-kos">{</span>
  <span class="pl-k">return</span> <span class="pl-kos">(</span>
    <span class="pl-kos">&lt;</span><span class="pl-smi">select</span><span class="pl-kos">&gt;</span>
      <span class="pl-kos">{</span>Object<span class="pl-kos"></span><span class="pl-kos">.</span><span class="pl-en">values</span><span class="pl-kos">(</span><span class="pl-s1">props</span><span class="pl-kos">.</span><span class="pl-c1">enumType</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">map</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">(</span>
        <span class="pl-c1">&lt;</span><span class="pl-smi">option</span> <span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-c1">value</span><span class="pl-kos">}</span> <span class="pl-s1">value</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">value</span><span class="pl-kos">}</span><span class="pl-c1">&gt;</span>
          <span class="pl-kos">{</span><span class="pl-s1">props</span><span class="pl-kos">.</span><span class="pl-c1">labels</span><span class="pl-kos">[</span><span class="pl-s1">value</span> <span class="pl-k">as</span> <span class="pl-smi">ValueOf</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span><span class="pl-kos">]</span><span class="pl-kos">}</span>
        <span class="pl-c1">&lt;</span><span class="pl-c1">/</span>option&gt;
      <span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">}</span>
    <span class="pl-c1">&lt;</span><span class="pl-c1">/</span>select&gt;
  <span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Intellisense/compiler will complain if a label is missing:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/11669196/279146841-913c1351-454d-4b03-90c8-bf6638a93fdc.png"><img src="https://user-images.githubusercontent.com/11669196/279146841-913c1351-454d-4b03-90c8-bf6638a93fdc.png" alt="enum_select" style="max-width: 100%;"></a></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/51090"><span class="CLOSED">⊚</span> <span class="number-ref">#51090</span></a> [true, false] extends [false, false] sometimes it's true(when use infer，happen with a probability ), and sometime it's false（in most cases）???</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Max10240.png?size=40"/>@Max10240</span> <a href="https://github.com/microsoft/TypeScript/issues/51090#issuecomment-1272446972"><span title="10/8/2022 8:41:58 PM">on 10/8/2022</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a> Good explanation and even helped me find bugs in other places😉, thank you</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Max10240.png?size=40"/>@Max10240</span> <a href="https://github.com/microsoft/TypeScript/issues/51090#issuecomment-1785677758"><span title="10/30/2023 10:05:32 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ahejlsberg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ahejlsberg">@ahejlsberg</a>  Sorry to ask you for help again, a similar problem arises, but this time it looks even weirder!</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type PositiveInfinity = 1e999;
type NegativeInfinity = -1e999;

export type IsEqual&lt;A, B&gt; =
	(&lt;G&gt;() =&gt; G extends A ? 1 : 2) extends
	(&lt;G&gt;() =&gt; G extends B ? 1 : 2)
		? true
		: false;


export type Add&lt;A extends number, B extends number&gt; = [
	IsEqual&lt;A, PositiveInfinity&gt;, IsEqual&lt;A, NegativeInfinity&gt;,
	IsEqual&lt;B, PositiveInfinity&gt;, IsEqual&lt;B, NegativeInfinity&gt;,
] extends infer R extends [boolean, boolean, boolean, boolean]
	? [true, false] extends ([R[0], R[3]]) // Note: with parentheses
		? PositiveInfinity
		: 'failed'
	: never;

export type AddWithoutParentheses&lt;A extends number, B extends number&gt; = [
	IsEqual&lt;A, PositiveInfinity&gt;, IsEqual&lt;A, NegativeInfinity&gt;,
	IsEqual&lt;B, PositiveInfinity&gt;, IsEqual&lt;B, NegativeInfinity&gt;,
] extends infer R extends [boolean, boolean, boolean, boolean]
	? [true, false] extends [R[0], R[3]] // Note: without parentheses
		? PositiveInfinity
		: 'failed'
	: never;


type AddTest0 = Add&lt;PositiveInfinity, PositiveInfinity&gt;; // failed
type AddTest1 = AddWithoutParentheses&lt;PositiveInfinity, PositiveInfinity&gt;; // Infinity
"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">PositiveInfinity</span> <span class="pl-c1">=</span> <span class="pl-c1">1e999</span><span class="pl-kos">;</span>
<span class="pl-k">type</span> <span class="pl-smi">NegativeInfinity</span> <span class="pl-c1">=</span> <span class="pl-c1">-</span><span class="pl-c1">1e999</span><span class="pl-kos">;</span>

<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">IsEqual</span><span class="pl-c1">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">B</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span>
	<span class="pl-kos">(</span><span class="pl-c1">&lt;</span><span class="pl-smi">G</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">G</span> <span class="pl-k">extends</span> <span class="pl-smi">A</span> ? <span class="pl-c1">1</span> : <span class="pl-c1">2</span><span class="pl-kos">)</span> <span class="pl-k">extends</span>
	<span class="pl-kos">(</span><span class="pl-c1">&lt;</span><span class="pl-smi">G</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">G</span> <span class="pl-k">extends</span> <span class="pl-smi">B</span> ? <span class="pl-c1">1</span> : <span class="pl-c1">2</span><span class="pl-kos">)</span>
		? <span class="pl-c1">true</span>
		: <span class="pl-c1">false</span><span class="pl-kos">;</span>


<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">Add</span><span class="pl-c1">&lt;</span><span class="pl-smi">A</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-kos">,</span> <span class="pl-smi">B</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
<span class="pl-kos">]</span> <span class="pl-k">extends</span> infer <span class="pl-smi">R</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">]</span>
	? <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">]</span> <span class="pl-k">extends</span> <span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">// Note: with parentheses</span>
		? <span class="pl-smi">PositiveInfinity</span>
		: <span class="pl-s">'failed'</span>
	: <span class="pl-smi">never</span><span class="pl-kos">;</span>

<span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">AddWithoutParentheses</span><span class="pl-c1">&lt;</span><span class="pl-smi">A</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-kos">,</span> <span class="pl-smi">B</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
<span class="pl-kos">]</span> <span class="pl-k">extends</span> infer <span class="pl-smi">R</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">]</span>
	? <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">]</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">]</span> <span class="pl-c">// Note: without parentheses</span>
		? <span class="pl-smi">PositiveInfinity</span>
		: <span class="pl-s">'failed'</span>
	: <span class="pl-smi">never</span><span class="pl-kos">;</span>


<span class="pl-k">type</span> <span class="pl-smi">AddTest0</span> <span class="pl-c1">=</span> <span class="pl-smi">Add</span><span class="pl-kos">&lt;</span><span class="pl-smi">PositiveInfinity</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span> <span class="pl-c">// failed</span>
<span class="pl-k">type</span> <span class="pl-smi">AddTest1</span> <span class="pl-c1">=</span> <span class="pl-smi">AddWithoutParentheses</span><span class="pl-kos">&lt;</span><span class="pl-smi">PositiveInfinity</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span> <span class="pl-c">// Infinity</span></pre></div>
<p dir="auto"><a href="https://www.typescriptlang.org/play?#code/C4TwDgpgBACg9gZwJbCQNwgSQHYDMnYohQC8UAjBAJw0DcAUKJFAHIQDmAhqhjvoaFJQAtJRpUG9CAA8wcAE7AoTaJgQBRAI4BXTgBsAPAEEANFABCAPlL0AkAAoDAcUv2AlKWtOoM4BGwAJghQRlAA-BRQAFxQAEwevv5Bdo4u7p5Q3omBwebhkTHxdrYRwPLaEMUxuPoIEJJSsgpKKiEBAcY+0n45UNjaALYARhDyZnnZQX2DI-LWZADadmpauoamsIgo6Fh4BESWZis6+sZmbFw8u-wHJssaJ4bmZvDIV3z7oIdQx2sGz6wONwdh8BCBDvQALpdHpTAi4UZQABKMKSwQWQzgcD0EE42DMmOxuPxUEJOLxBKx5OwkLsEQWZQqZhqejq0MmwXsCyRCwADJCzDyAMyQyEeAD04tYcD8MQA7igABZQMCceT+YCKiB1BDFCKvba8PZgqpQADkNSQOICZrsMWwEAw8kkMjkimU4GgRnaAHUlXBtMAYGqNVqdZ0OdNhqNxqjev1o3MhEtbL9ThsDe9jbcfg8-hsLsCjTcvndU3nTgDMyDs6Xc6tK+cgVmS+C7uzumioPDESjIxiqcTKUSKaTB6OycTaSUoAzyhBmbUIB3YeiefzBQsRdDJdLZVAFZqA0pVersJrtdq9Zs3jXW6aLZwrRAbXa+o7Rg1Wt6AgAVbXALyQg-gY1bFp8IAvFsLYQZYtBQLulrWownptH+AHkMBvr+oGwZnhe4ZgdcEFQbe4FgnBCFSqCRD0EAA" rel="nofollow">playground link</a></p>
<p dir="auto">I guess the parentheses make it a complex type?<br>
and, Isn't  <code class="notranslate">IsEqual</code> implemented correctly either? :(</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Max10240.png?size=40"/>@Max10240</span> <a href="https://github.com/microsoft/TypeScript/issues/51090#issuecomment-1785696165"><span title="10/30/2023 10:16:20 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Thank God, I found it works well in this way(with <code class="notranslate">infer</code>)!</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export type AddWithInfer&lt;A extends number, B extends number&gt; = [
	IsEqual&lt;A, PositiveInfinity&gt;, IsEqual&lt;A, NegativeInfinity&gt;,
	IsEqual&lt;B, PositiveInfinity&gt;, IsEqual&lt;B, NegativeInfinity&gt;,
] extends infer R extends [boolean, boolean, boolean, boolean]
	? [true, false] extends (infer _ extends [R[0], R[3]]) // Note: with infer
		? PositiveInfinity
		: 'failed'
	: never;

type AddTest2 = AddWithInfer&lt;PositiveInfinity, PositiveInfinity&gt;; // Infinity, works too!"><pre class="notranslate"><span class="pl-k">export</span> <span class="pl-k">type</span> <span class="pl-smi">AddWithInfer</span><span class="pl-c1">&lt;</span><span class="pl-smi">A</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-kos">,</span> <span class="pl-smi">B</span> <span class="pl-k">extends</span> <span class="pl-smi">number</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">A</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
	<span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-smi">IsEqual</span><span class="pl-kos">&lt;</span><span class="pl-smi">B</span><span class="pl-kos">,</span> <span class="pl-smi">NegativeInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span>
<span class="pl-kos">]</span> <span class="pl-k">extends</span> infer <span class="pl-smi">R</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">,</span> <span class="pl-smi">boolean</span><span class="pl-kos">]</span>
	? <span class="pl-kos">[</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">]</span> <span class="pl-k">extends</span> <span class="pl-kos">(</span>infer <span class="pl-smi">_</span> <span class="pl-k">extends</span> <span class="pl-kos">[</span><span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">,</span> <span class="pl-smi">R</span><span class="pl-kos">[</span><span class="pl-c1">3</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">)</span> <span class="pl-c">// Note: with infer</span>
		? <span class="pl-smi">PositiveInfinity</span>
		: <span class="pl-s">'failed'</span>
	: <span class="pl-smi">never</span><span class="pl-kos">;</span>

<span class="pl-k">type</span> <span class="pl-smi">AddTest2</span> <span class="pl-c1">=</span> <span class="pl-smi">AddWithInfer</span><span class="pl-kos">&lt;</span><span class="pl-smi">PositiveInfinity</span><span class="pl-kos">,</span> <span class="pl-smi">PositiveInfinity</span><span class="pl-kos">&gt;</span><span class="pl-kos">;</span> <span class="pl-c">// Infinity, works too!</span></pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55454"><span class="OPEN">⊚</span> <span class="number-ref">#55454</span></a> Intellisense fails for TS on &quot;completionInfo&quot;</h1><span class="label" style="background-color:#e11d21;">Bug</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/leite08.png?size=40"/>@leite08</span> <a href="https://github.com/microsoft/TypeScript/issues/55454#issuecomment-1728445848"><span title="9/20/2023 2:23:33 PM">on 9/20/2023</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/sagarpanchal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sagarpanchal">@sagarpanchal</a> I see you're working around your issue by using version <code class="notranslate">4.9.5</code> - that's the one we're using as well, so likely not related. Thanks for letting me know and linking the issues, though!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sagarpanchal.png?size=40"/>@sagarpanchal</span> <a href="https://github.com/microsoft/TypeScript/issues/55454#issuecomment-1785175628"><span title="10/30/2023 6:16:55 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/leite08/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/leite08">@leite08</a> I found slow-performing types in my code using this tool <a href="https://github.com/microsoft/typescript-analyze-trace">microsoft/typescript-analyze-trace</a>. Maybe that could help?</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56256"><span class="CLOSED">⊚</span> <span class="number-ref">#56256</span></a> `asserts` keyword with intersection type is not working</h1><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56256#issuecomment-1784614592"><span title="10/30/2023 12:23:18 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">The type <code class="notranslate">string &amp; string</code> is the same as <code class="notranslate">string</code>.</p>
<p dir="auto">It's not clear what you actually want and how it should work. Assertion functions don't return anything. You're just declaring that whatever <code class="notranslate">input</code> is is of the type <code class="notranslate">string &amp; string</code> (which is equal to <code class="notranslate">string</code>).</p>
<p dir="auto">If I had to guess I'd say you want <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="701500659" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/40562" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/40562/hovercard" href="https://github.com/microsoft/TypeScript/issues/40562">#40562</a>, and just mistakingly throw unrelated terms together (the intersection type).</p>
<p dir="auto">Regardless, the error is correct. There is no bug here.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/samchon.png?size=40"/>@samchon</span> <a href="https://github.com/microsoft/TypeScript/issues/56256#issuecomment-1784628978"><span title="10/30/2023 12:34:19 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Got it, what I want is to making a function returning <code class="notranslate">T</code> value. Exact type maybe <code class="notranslate">(asserts input is T) &amp; T</code>.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56256#issuecomment-1784633910"><span title="10/30/2023 12:37:54 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">That would be a feature request, not a bug report, and it already exists: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="701500659" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/40562" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/40562/hovercard" href="https://github.com/microsoft/TypeScript/issues/40562">#40562</a></p>
<p dir="auto">Currently such functions are not possible.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/samchon.png?size=40"/>@samchon</span> <a href="https://github.com/microsoft/TypeScript/issues/56256#issuecomment-1784636344"><span title="10/30/2023 12:39:45 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">Thanks for fast response. I should consider another way.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/samchon.png?size=40"/>@samchon</span> closed <span class="timestamp"><span title="10/30/2023 12:39:45 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56259"><span class="OPEN">⊚</span> <span class="number-ref">#56259</span></a> Intellisense &amp; Quick fix: Add import type from 'xxx.ts'</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/VSCodeTriageBot.png?size=40"/>@VSCodeTriageBot</span> assigned <span class="timestamp"><span title="10/30/2023 12:05:49 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56259#issuecomment-1785641225"><span title="10/30/2023 9:46:37 AM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">This is addressed by <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1940678765" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56090" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56090/hovercard" href="https://github.com/microsoft/TypeScript/pull/56090">#56090</a></p>
<p dir="auto">TypeScript doesn't know anything about external lint programs and can't adjust its behavior accordingly, so the contents of your <code class="notranslate">.eslintrc.js</code> aren't relevant in this situation.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span> <span class="timestamp"><span title="10/30/2023 9:46:51 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/51572"><span class="CLOSED">⊚</span> <span class="number-ref">#51572</span></a> `Object.entries` assumes the key is always a string</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/dev-kg.png?size=40"/>@dev-kg</span> <a href="https://github.com/microsoft/TypeScript/issues/51572#issuecomment-1470129296"><span title="3/15/2023 7:39:25 AM">on 3/15/2023</span></a></span><div class="comment-body"><p dir="auto">just do this and the problem is gone</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="declare global {
  interface ObjectConstructor {
    keys&lt;T&gt;(o: T): (keyof T)[]
    // @ts-ignore
    entries&lt;U, T&gt;(o: { [key in T]: U } | ArrayLike&lt;U&gt;): [T, U][]
  }
}"><pre class="notranslate"><code class="notranslate">declare global {
  interface ObjectConstructor {
    keys&lt;T&gt;(o: T): (keyof T)[]
    // @ts-ignore
    entries&lt;U, T&gt;(o: { [key in T]: U } | ArrayLike&lt;U&gt;): [T, U][]
  }
}
</code></pre></div>
<p dir="auto">I added  // <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ts-ignore/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ts-ignore">@ts-ignore</a> because ts would tell me this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Type 'T' is not assignable to type 'string | number | symbol"><pre class="notranslate"><code class="notranslate">Type 'T' is not assignable to type 'string | number | symbol
</code></pre></div>
<p dir="auto">If someone have a solution to get rid of // <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ts-ignore/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ts-ignore">@ts-ignore</a> without loosing the ability to preserve the dynamic aspect of T, let us know in the comments</p>
<p dir="auto">If this breaks your code you can do:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Object.tsKeys = function getObjectKeys&lt;Obj&gt;(obj: Obj): (keyof Obj)[] {
 return Object.keys(obj!) as (keyof Obj)[]
}
// @ts-ignore
Object.tsEntries = function getObjectEntries&lt;U, T&gt;(obj: { [key in T]: U }): [T, U][] {
 return Object.entries(obj!) as unknown as [T, U][]
}
declare global {
 interface ObjectConstructor {
   // @ts-ignore
   tsEntries&lt;U, T&gt;(o: { [key in T]: U }): [T, U][]
   tsKeys&lt;T&gt;(o: T): (keyof T)[]
 }
}"><pre class="notranslate"><code class="notranslate">Object.tsKeys = function getObjectKeys&lt;Obj&gt;(obj: Obj): (keyof Obj)[] {
 return Object.keys(obj!) as (keyof Obj)[]
}
// @ts-ignore
Object.tsEntries = function getObjectEntries&lt;U, T&gt;(obj: { [key in T]: U }): [T, U][] {
 return Object.entries(obj!) as unknown as [T, U][]
}
declare global {
 interface ObjectConstructor {
   // @ts-ignore
   tsEntries&lt;U, T&gt;(o: { [key in T]: U }): [T, U][]
   tsKeys&lt;T&gt;(o: T): (keyof T)[]
 }
}
</code></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/SanariSan.png?size=40"/>@SanariSan</span> <a href="https://github.com/microsoft/TypeScript/issues/51572#issuecomment-1784582212"><span title="10/29/2023 11:53:24 PM">3 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I added // <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/ts-ignore/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ts-ignore">@ts-ignore</a> because ts would tell me this:</p>
</blockquote>
<p dir="auto">I don't have such issue, but you may try to use <code class="notranslate">PropertyKey</code> keyword, which is what used for indexing objects under the hood (like <code class="notranslate">T extends PropertyKey</code>)</p>
<p dir="auto">Also your first example produces union of values from every key which gives poor type narrowing even when explicitly checking the property:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/76019273/278961381-60640ac5-eff0-4662-b2d6-691cf4f714ed.png"><img src="https://user-images.githubusercontent.com/76019273/278961381-60640ac5-eff0-4662-b2d6-691cf4f714ed.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">You should follow the pattern above and use indexed access type instead of manually assigning union</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56255"><span class="OPEN">∏</span> <span class="number-ref">#56255</span></a> Bump the github-actions group with 1 update</h1><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><span class="label" style="background-color:#0366d6;">dependencies</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/dependabot.png?size=40"/>@dependabot</span> added <span class="label" style="background-color:#0366d6;">dependencies</span> <span class="timestamp"><span title="10/29/2023 6:17:22 PM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56255#issuecomment-1784329831"><span title="10/29/2023 6:17:26 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">This PR doesn't have any linked issues. Please open an issue that references this PR. From there we can discuss and prioritise.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56255#issuecomment-1784329833"><span title="10/29/2023 6:17:26 PM">3 days ago</span></a></span><div class="comment-body"><p dir="auto">This PR doesn't have any linked issues. Please open an issue that references this PR. From there we can discuss and prioritise.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/29/2023 6:17:26 PM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/29/2023 6:17:26 PM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56184"><span class="CLOSED">⊚</span> <span class="number-ref">#56184</span></a> Typescript is not inferring the correct type for an extended class!</h1><span class="label" style="background-color:#d4c5f9;color:black;">Question</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> closed <span class="timestamp"><span title="10/25/2023 6:24:47 PM">on 10/25/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Saff-Elli-Khan.png?size=40"/>@Saff-Elli-Khan</span> <a href="https://github.com/microsoft/TypeScript/issues/56184#issuecomment-1783827456"><span title="10/28/2023 7:21:40 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">See <a href="https://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-type-inference-work-on-this-interface-interface-foot--">the FAQ</a>.</p>
<p dir="auto">The example works when the type parameters are actually used and affect the structure of the class.</p>
</blockquote>
<p dir="auto">I see what you are saying, I did use those parameters on the real code and just created a dummy code for you of course. But I still see an unexpected behaviour because sometimes the third parameter was getting inferred correctly! Maybe I did something wrong, will it be possible for you to make some changes to the above code and build exactly what I am expecting? This will give me an idea of the mistake I've made...</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fatcerberus.png?size=40"/>@fatcerberus</span> <a href="https://github.com/microsoft/TypeScript/issues/56184#issuecomment-1784226487"><span title="10/29/2023 2:12:36 PM">4 days ago</span></a></span><div class="comment-body"><p dir="auto">TS can sometimes infer unused type parameters when inferring between two instances of the same generic (i.e. <code class="notranslate">Foo&lt;string&gt;</code> -&gt; <code class="notranslate">Foo&lt;infer T&gt;</code> -&gt; <code class="notranslate">T = string</code>, but this is a special case and you shouldn't depend on it.  In general inference is structural so trying to infer an unused type parameter makes about as much sense as solving for <code class="notranslate">x * 0 = 0</code></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56250"><span class="OPEN">⊚</span> <span class="number-ref">#56250</span></a> error TS2564: Property 'client' has no initializer and is not definitely assigned in the constructor.</h1><span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56250#issuecomment-1784201659"><span title="10/29/2023 12:17:09 PM">4 days ago</span></a></span><div class="comment-body"><p dir="auto">Duplicate of <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="287595464" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/21132" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/21132/hovercard" href="https://github.com/microsoft/TypeScript/issues/21132">#21132</a>.</p>
<p dir="auto">Besides that, your variable is not definitely set in <code class="notranslate">createClient()</code>.</p>
<p dir="auto">And your "Search Terms" seem excessive. Best try to use keywords, not the entire explanation of your issue.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">😆</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#fbca04;color:black;">Working as Intended</span> <span class="timestamp"><span title="10/30/2023 8:28:58 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56248"><span class="CLOSED">⊚</span> <span class="number-ref">#56248</span></a> a new type to allow only instance of a class</h1><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/xiBread.png?size=40"/>@xiBread</span> <a href="https://github.com/microsoft/TypeScript/issues/56248#issuecomment-1784081312"><span title="10/29/2023 4:51:14 AM">4 days ago</span></a></span><div class="comment-body"><p dir="auto"><span aria-label="This issue is a duplicate of #29063" class="issue-keyword tooltipped tooltipped-se">Duplicate of</span> <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="391815448" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/29063" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/29063/hovercard" href="https://github.com/microsoft/TypeScript/issues/29063">#29063</a></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56248#issuecomment-1784097332"><span title="10/29/2023 5:45:23 AM">4 days ago</span></a></span><div class="comment-body"><p dir="auto">That's why it's IMO best practice to always have at least one private property on your class, even if it's just a branding.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/robertIsaac.png?size=40"/>@robertIsaac</span> <a href="https://github.com/microsoft/TypeScript/issues/56248#issuecomment-1784116865"><span title="10/29/2023 6:43:06 AM">4 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">That's why it's IMO best practice to always have at least one private property on your class, even if it's just a branding.</p>
</blockquote>
<p dir="auto">but if it's private, how I will check for it in the type guard function?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56248#issuecomment-1784118460"><span title="10/29/2023 6:47:55 AM">4 days ago</span></a></span><div class="comment-body"><p dir="auto">Having a private property makes the class nominally typed, not structurally. That means in order to create an instance you need to use the <code class="notranslate">new</code> operator, which means that subsequent checks using <code class="notranslate">instanceof</code> are safe.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">3</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/robertIsaac.png?size=40"/>@robertIsaac</span> <a href="https://github.com/microsoft/TypeScript/issues/56248#issuecomment-1784147069"><span title="10/29/2023 8:39:42 AM">4 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Having a private property makes the class nominally typed, not structurally. That means in order to create an instance you need to use the <code class="notranslate">new</code> operator, which means that subsequent checks using <code class="notranslate">instanceof</code> are safe.</p>
</blockquote>
<p dir="auto">thank you, I tested it now and understood<br>
I will close this issue then since there is a workaround and already proposed duplicate issue</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/robertIsaac.png?size=40"/>@robertIsaac</span> closed <span class="timestamp"><span title="10/29/2023 8:39:43 AM">4 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56245"><span class="CLOSED">⊚</span> <span class="number-ref">#56245</span></a> Allow anonymous/dynamic override / implementation of method without the need for a declared subclass</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Out of Scope</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/issues/56245#issuecomment-1783987049"><span title="10/28/2023 8:21:10 PM">4 days ago</span></a></span><div class="comment-body"><p dir="auto">You checked:</p>
<blockquote>
<p dir="auto">This isn't a runtime feature (e.g. library functionality, non-ECMAScript syntax with JavaScript output, new syntax sugar for JS, etc.)</p>
</blockquote>
<p dir="auto">But this is a runtime feature that doesn't exist in JavaScript, so wouldn't be added to TypeScript.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">4</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#006b75;">Suggestion</span> <span class="timestamp"><span title="10/30/2023 8:29:38 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556677;">Out of Scope</span> <span class="timestamp"><span title="10/30/2023 8:29:38 AM">3 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> closed <span class="timestamp"><span title="10/30/2023 8:29:43 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56236"><span class="CLOSED">⊚</span> <span class="number-ref">#56236</span></a> Unnecessary renames after after extract refactoring code actions</h1><span class="label" style="background-color:#fbca04;color:black;">Not a Defect</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783586089"><span title="10/27/2023 3:44:30 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Why is it a bug what arbitrary name we pick here? It's ephemeral.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783588047"><span title="10/27/2023 3:48:12 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Agree, my bad. It could be an enhancement to the current behavior, but maybe it is just not worth changing since the variable will be renamed anyway. (I just decided to open an issue before sending a pr :)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> closed <span class="timestamp"><span title="10/27/2023 3:48:13 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783588529"><span title="10/27/2023 3:49:08 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/RyanCavanaugh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RyanCavanaugh">@RyanCavanaugh</a> but what about <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1966261750" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/56236" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/56236/hovercard?comment_id=1783576239&amp;comment_type=issue_comment" href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783576239">#56236 (comment)</a> ? It would be so great if I could test refactorings on the same playground, does it work in general?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783594132"><span title="10/27/2023 3:57:31 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">It'd be nice! The Playground uses the editor surface some a slightly lower level than VS Code does, so not everything works the same way. PRs welcomed but I'm not sure it's a straightforward toggle.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fatcerberus.png?size=40"/>@fatcerberus</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783652519"><span title="10/27/2023 6:23:55 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">An enhancement that <em>would</em> be nice is if it automatically triggered a rename action (or just prompted for a name first, but I assume there's no machinery in place for that)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783894185"><span title="10/28/2023 11:39:28 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">An enhancement that <em>would</em> be nice is if it automatically triggered a rename action (or just prompted for a name first, but I assume there's no machinery in place for that)</p>
</blockquote>
<p dir="auto">Doesn't it already trigger a rename action? IMO TypeScript should add snippet support for code actions (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1327659080" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/50166" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/50166/hovercard" href="https://github.com/microsoft/TypeScript/issues/50166">#50166</a>). This would be a big improvement. Right now, the rename action can be triggered with a big delay, which is not ideal.</p>
<hr>
<p dir="auto">Also I used a command in vscode that asks for a variable name first (via inputbox), but it was terrible since you can get word-based completions only within the editor.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/fatcerberus.png?size=40"/>@fatcerberus</span> <a href="https://github.com/microsoft/TypeScript/issues/56236#issuecomment-1783900123"><span title="10/28/2023 12:08:40 PM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Doesn't it already trigger a rename action?</p>
</blockquote>
<p dir="auto">I don't know, actually! 😅  I kind of assumed it didn't though since IMO there's no reason to care about the initial name TS picks for the variable otherwise.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56163"><span class="MERGED">∏</span> <span class="number-ref">#56163</span></a> Update dprint and plugins</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/20/2023 11:39:58 AM">on 10/20/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> closed <span class="timestamp"><span title="10/28/2023 10:40:52 AM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56242"><span class="OPEN">⊚</span> <span class="number-ref">#56242</span></a> Is it possible to keep a strict type argument on Promise when using an import() with a computed string?</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/MartinJohns.png?size=40"/>@MartinJohns</span> <a href="https://github.com/microsoft/TypeScript/issues/56242#issuecomment-1783864318"><span title="10/28/2023 9:31:50 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="743491696" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/41550" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/41550/hovercard?comment_id=727777324&amp;comment_type=issue_comment" href="https://github.com/microsoft/TypeScript/issues/41550#issuecomment-727777324">#41550 (comment)</a></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">❤️</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gustaveWPM.png?size=40"/>@gustaveWPM</span> <a href="https://github.com/microsoft/TypeScript/issues/56242#issuecomment-1783875164"><span title="10/28/2023 10:19:49 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto"><a href="https://github.com/microsoft/TypeScript/issues/41550#issuecomment-727777324" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/41550/hovercard">#41550 (comment)</a></p>
</blockquote>
<p dir="auto">Thank you sir! :)<br>
Humm... So, it looks like I'm trying to do something that is impossible. :(</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span> <span class="timestamp"><span title="10/30/2023 10:01:20 AM">3 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/46011"><span class="OPEN">⊚</span> <span class="number-ref">#46011</span></a> Support for opting out of jsdoc @typedef exports</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556b75;">Needs Proposal</span><span class="label" style="background-color:#556b75;">In Discussion</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">25</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ljharb.png?size=40"/>@ljharb</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783248204"><span title="10/27/2023 10:12:50 AM">6 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">If one of your libraries doesn't have any of its types <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/exported/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/exported">@exported</a> and you want to use some of its types, you'll be out of luck.</p>
</blockquote>
<p dir="auto">this is true of anything, and that’s fine. If you want access to something that’s not exported, you either ask the maintainer, fork it, or <em>you don’t get access</em></p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">2</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jespertheend.png?size=40"/>@jespertheend</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783815295"><span title="10/28/2023 6:43:01 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">this is true of anything</p>
</blockquote>
<p dir="auto">But it doesn't have to be. A new option would be very close to just deprecating exports. And to quote sandersn:</p>
<blockquote>
<p dir="auto">We're definitely not able to deprecate anything because I expect a lot of JSDoc's value is in using VS Code (or even VS!) to open ancient loose .js files and get some kind of help from jsdoc comments.</p>
</blockquote>
<p dir="auto">Projects with this new option enabled would lose this value just as much as if the behaviour was deprecated.</p>
<p dir="auto">Don't get me wrong, an option is better than not fixing this issue at all. I just think there are better alternatives :)</p>
<p dir="auto">Take JavaScripts <code class="notranslate">var</code> for instance: spec authors realised that <code class="notranslate">var</code> was not strict enough. So instead of adding yet another <code class="notranslate">"use strict";</code> kind of statement at the top of files, they came up with <code class="notranslate">let</code> and <code class="notranslate">const</code>. A new JSDoc tag would have the same benefits as this approach. Legacy code can still use <code class="notranslate">@typedef</code> while modern code uses the new tag.</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kungfooman.png?size=40"/>@kungfooman</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783822563"><span title="10/28/2023 7:06:06 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">Take JavaScripts <code class="notranslate">var</code> for instance: spec authors realised that <code class="notranslate">var</code> was not strict enough. So instead of adding yet another <code class="notranslate">"use strict";</code> kind of statement at the top of files, they came up with <code class="notranslate">let</code> and <code class="notranslate">const</code>.</p>
</blockquote>
<p dir="auto">Please note that they have also come to realize that certain aspects are not viable and as a result, they are now causing syntax errors, for example:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;use strict&quot;;
var static = 1;"><pre class="notranslate"><span class="pl-s">"use strict"</span><span class="pl-kos">;</span>
<span class="pl-k">var</span> <span class="pl-s1">static</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span><span class="pl-kos">;</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/5236548/278817828-e2f2e0e4-d1a0-46db-a48b-935d07a3aef5.png"><img src="https://user-images.githubusercontent.com/5236548/278817828-e2f2e0e4-d1a0-46db-a48b-935d07a3aef5.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">IMO we are in the same situation here - ESM is inherently about limiting scope. If you want to make something available outside the module, you must explicitly export it using the <code class="notranslate">export</code> keyword.</p>
<p dir="auto">I think we don't even need <code class="notranslate">strictJSDoc: true</code>, we can simply decide via <code class="notranslate">package.json</code> and <code class="notranslate">type === 'module'</code>. Because ESM implies "local by default".</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jespertheend.png?size=40"/>@jespertheend</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783836230"><span title="10/28/2023 7:49:18 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I think we don't even need <code class="notranslate">strictJSDoc: true</code>, we can simply decide via <code class="notranslate">package.json</code> and <code class="notranslate">type === 'module'</code>. Because ESM implies "local by default".</p>
</blockquote>
<p dir="auto">I'm using Deno and don't have any <code class="notranslate">package.json</code>.</p>
<p dir="auto">If a new JSDoc tag is not something we are happy with (though I still think it's the best option, maybe it just needs a better name than <code class="notranslate">@localtype</code>), then I propose the following:</p>
<p dir="auto">A new <code class="notranslate">@export</code> tag is used to mark types as exported. Files without any <code class="notranslate">@export</code> tags will export all types, like they have always done. But any file that contains at least one <code class="notranslate">@export</code> tag will only export the specified types.<br>
This approach is similar to how TypeScript currently detects module files:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="   await Promise.resolve();
// ^^^^^--- 'await' expressions are only allowed at the top level of a file when that file is a module,
// but this file has no imports or exports. Consider adding an empty 'export {}' to make this file a module."><pre class="notranslate">   <span class="pl-k">await</span> <span class="pl-v">Promise</span><span class="pl-kos">.</span><span class="pl-en">resolve</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// ^^^^^--- 'await' expressions are only allowed at the top level of a file when that file is a module,</span>
<span class="pl-c">// but this file has no imports or exports. Consider adding an empty 'export {}' to make this file a module.</span></pre></div>
<p dir="auto">Doing it like this wouldn't break legacy code, allowing you to gradually update your codebase, old libraries would keep working, and you wouldn't need to configure anything.</p>
<p dir="auto">The only downside is that this might be somewhat unexpected, but an error message similar to the 'top level await' one could take care of that.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/kungfooman.png?size=40"/>@kungfooman</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783838698"><span title="10/28/2023 7:56:29 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">A new <code class="notranslate">@export</code> tag is used to mark types as exported. Files without any <code class="notranslate">@export</code> tags will export all types, like they have always done.</p>
</blockquote>
<p dir="auto">Then a file using this style still doesn't work: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1004809340" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/46011" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/46011/hovercard?comment_id=1538383663&amp;comment_type=issue_comment" href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1538383663">#46011 (comment)</a></p>
<p dir="auto">Or how could that be detected? Your idea is nice and I like it and we just make a special case for <code class="notranslate">export * from ...</code> and if any of those files export a <code class="notranslate">@typedef</code>, then we are following ESM guidelines?</p>
<p dir="auto">Edit: (Now I kinda have a fear that people will just export useless dummies simply because there is no good option)</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/ljharb.png?size=40"/>@ljharb</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783843769"><span title="10/28/2023 8:13:16 AM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I think we don't even need <code class="notranslate">strictJSDoc: true</code>, we can simply decide via <code class="notranslate">package.json</code> and <code class="notranslate">type === 'module'</code>. Because ESM implies "local by default".</p>
</blockquote>
<p dir="auto">this would preclude CJS packages from having the benefit, which is my entire use case.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jespertheend.png?size=40"/>@jespertheend</span> <a href="https://github.com/microsoft/TypeScript/issues/46011#issuecomment-1783844055"><span title="10/28/2023 8:14:13 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">I would say the use of <code class="notranslate">export * from ...</code> shouldn't have any influence of the <code class="notranslate">@typedef</code>s inside that file. I.e. <code class="notranslate">@typedef</code>s from <code class="notranslate">foo.js</code> would still get exported when <code class="notranslate">export * from "./foo.js"</code> is used in <code class="notranslate">bar.js</code>, whether or not <code class="notranslate">bar.js</code> has an <code class="notranslate">@exports</code> tag.</p>
<blockquote>
<p dir="auto">Edit: (Now I kinda have a fear that people will just export useless dummies simply because there is no good option)</p>
</blockquote>
<p dir="auto">That's why I prefer a new JSDoc tag :)</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56155"><span class="OPEN">⊚</span> <span class="number-ref">#56155</span></a> IntelliSense not functioning in large project sometimes</h1><span class="label" style="background-color:#556b75;">Needs More Info</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/en-yash.png?size=40"/>@en-yash</span> <a href="https://github.com/microsoft/TypeScript/issues/56155#issuecomment-1783515503"><span title="10/27/2023 2:09:37 PM">6 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/Zzzen/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Zzzen">@Zzzen</a> we are facing a similar issue with intellisense performance in our monorepo. Is your repo using tsc using project references? Keen to receive some support from the typescript team on this issue</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">1</span></span></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Zzzen.png?size=40"/>@Zzzen</span> <a href="https://github.com/microsoft/TypeScript/issues/56155#issuecomment-1783841077"><span title="10/28/2023 8:04:30 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Yes, we are using project references.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56229"><span class="OPEN">⊚</span> <span class="number-ref">#56229</span></a> Invalid `.d.ts` generated from JSDoc if `module.exports` is assigned not an identifier</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#3178c6;">Help Wanted</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> milestoned <span class="timestamp"><span title="10/27/2023 1:20:33 PM">6 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Andarist.png?size=40"/>@Andarist</span> <a href="https://github.com/microsoft/TypeScript/issues/56229#issuecomment-1783821268"><span title="10/28/2023 7:02:00 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">The additional interesting thing about this is that the generated <code class="notranslate">.d.ts</code> is incorrect (it raises TS error diagnostics): <a href="https://www.typescriptlang.org/play?ts=5.3.0-dev.20231028&amp;ssl=5&amp;ssc=3&amp;pln=1&amp;pc=1&amp;filetype=d.ts#code/CYUwxgNghgTiAEAzArgOzAFwJYHtXwH0QAPABxxgwGcAKHU7PKgLngHkHdUqBKVgNxxZgAbgBQJcpXgBeQpIrVxC6RgCepBB0bdZ8AN5j4x+PQysqGGFlQBzcQF9xQA" rel="nofollow">TS playground</a></p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56237"><span class="MERGED">∏</span> <span class="number-ref">#56237</span></a> Revert &quot;Explicitly declare type=commonjs in package.json (#56190)&quot;</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span> <span class="timestamp"><span title="10/27/2023 4:46:58 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783618193"><span title="10/27/2023 4:47:18 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> perf test this</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783618215"><span title="10/27/2023 4:47:21 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Heya <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a>, I've started to run the regular perf test suite on this PR at <a class="commit-link" data-hovercard-type="commit" data-hovercard-url="https://github.com/microsoft/TypeScript/commit/096afbc98f4a8f989fcf3f11ce5d72c348c0f34d/hovercard" href="https://github.com/microsoft/TypeScript/commit/096afbc98f4a8f989fcf3f11ce5d72c348c0f34d"><tt>096afbc</tt></a>. You can monitor the build <a href="https://typescript.visualstudio.com/cf7ac146-d525-443c-b23c-0d58337efebc/_build/results?buildId=158380" rel="nofollow">here</a>.</p>
<p dir="auto">Update: <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783626848" data-hovercard-type="pull_request" data-hovercard-url="/microsoft/TypeScript/pull/56237/hovercard">The results are in!</a></p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783620095"><span title="10/27/2023 4:52:15 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/evanw/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/evanw">@evanw</a> I hate to ping another time, but maybe you have a better idea what might be happening here. I know our reexports are awful, but the behavior surprised me given <code class="notranslate">type=commonjs</code> is implicitly true because we omit it.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783622392"><span title="10/27/2023 4:58:13 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/DanielRosenwasser/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRosenwasser">@DanielRosenwasser</a> Not sure if you're actually making the release branch today, but I'd definitely want to get this revert in before then as this was totally meant to be a benign positive change.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783626848"><span title="10/27/2023 5:07:02 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a><br>
The results of the perf run you requested are in!</p>
<details><summary> Here they are:</summary><p dir="auto">
</p><h2 dir="auto">Compiler</h2>
<b>Comparison Report - baseline..pr</b>
<table border="0" cellpadding="0" cellspacing="0" role="table">
<thead>
<tr>
<th align="left"><sub>Metric</sub></th>
<th align="right"><sub>baseline</sub></th>
<th align="right"><sub>pr</sub></th>
<th align="right"><sub>Delta</sub></th>
<th align="right"><sub>Best</sub></th>
<th align="right"><sub>Worst</sub></th>
<th align="right"><sub>p-value</sub></th>
</tr>
</thead>
<tbody><tr><th align="left" colspan="7"><sub>Angular - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>295,135k (± 0.01%)</sub></td>
<td align="right"><sub>295,137k (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>295,122k</sub></td>
<td align="right"><sub>295,161k</sub></td>
<td align="right"><sub>p=0.521 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.63s (± 0.42%)</sub></td>
<td align="right"><sub>2.63s (± 0.51%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.62s</sub></td>
<td align="right"><sub>2.65s</sub></td>
<td align="right"><sub>p=0.604 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.83s (± 0.98%)</sub></td>
<td align="right"><sub>0.83s (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.83s</sub></td>
<td align="right"><sub>0.83s</sub></td>
<td align="right"><sub>p=0.405 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>8.07s (± 0.14%)</sub></td>
<td align="right"><sub>8.04s (± 0.36%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>8.02s</sub></td>
<td align="right"><sub>8.09s</sub></td>
<td align="right"><sub>p=0.169 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>7.07s (± 0.25%)</sub></td>
<td align="right"><sub>7.07s (± 0.36%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>7.05s</sub></td>
<td align="right"><sub>7.12s</sub></td>
<td align="right"><sub>p=0.515 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>18.61s (± 0.13%)</sub></td>
<td align="right"><sub>18.58s (± 0.21%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>18.52s</sub></td>
<td align="right"><sub>18.62s</sub></td>
<td align="right"><sub>p=0.225 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>Compiler-Unions - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>193,634k (± 1.68%)</sub></td>
<td align="right"><sub>192,632k (± 1.54%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>190,705k</sub></td>
<td align="right"><sub>196,479k</sub></td>
<td align="right"><sub>p=0.873 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>1.34s (± 0.91%)</sub></td>
<td align="right"><sub>1.38s (± 1.00%)</sub></td>
<td align="right"><sub>+0.03s (+ 2.23%)</sub></td>
<td align="right"><sub>1.35s</sub></td>
<td align="right"><sub>1.39s</sub></td>
<td align="right"><sub>p=0.010 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.73s (± 0.00%)</sub></td>
<td align="right"><sub>0.73s (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.73s</sub></td>
<td align="right"><sub>0.73s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>9.15s (± 0.58%)</sub></td>
<td align="right"><sub>9.18s (± 0.63%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>9.10s</sub></td>
<td align="right"><sub>9.23s</sub></td>
<td align="right"><sub>p=0.686 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>2.63s (± 0.31%)</sub></td>
<td align="right"><sub>2.63s (± 0.54%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.61s</sub></td>
<td align="right"><sub>2.65s</sub></td>
<td align="right"><sub>p=0.677 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>13.87s (± 0.38%)</sub></td>
<td align="right"><sub>13.91s (± 0.36%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>13.85s</sub></td>
<td align="right"><sub>13.98s</sub></td>
<td align="right"><sub>p=0.171 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>Monaco - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>347,335k (± 0.01%)</sub></td>
<td align="right"><sub>347,331k (± 0.01%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>347,307k</sub></td>
<td align="right"><sub>347,358k</sub></td>
<td align="right"><sub>p=0.630 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.46s (± 0.40%)</sub></td>
<td align="right"><sub>2.46s (± 0.31%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.45s</sub></td>
<td align="right"><sub>2.47s</sub></td>
<td align="right"><sub>p=0.858 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.94s (± 0.86%)</sub></td>
<td align="right"><sub>0.94s (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.94s</sub></td>
<td align="right"><sub>0.94s</sub></td>
<td align="right"><sub>p=0.405 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>6.90s (± 0.29%)</sub></td>
<td align="right"><sub>6.90s (± 0.44%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>6.86s</sub></td>
<td align="right"><sub>6.93s</sub></td>
<td align="right"><sub>p=0.746 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>4.04s (± 0.13%)</sub></td>
<td align="right"><sub>4.04s (± 0.26%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>4.02s</sub></td>
<td align="right"><sub>4.05s</sub></td>
<td align="right"><sub>p=0.142 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>14.35s (± 0.17%)</sub></td>
<td align="right"><sub>14.33s (± 0.25%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>14.29s</sub></td>
<td align="right"><sub>14.39s</sub></td>
<td align="right"><sub>p=0.625 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>TFS - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>302,595k (± 0.01%)</sub></td>
<td align="right"><sub>302,608k (± 0.01%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>302,554k</sub></td>
<td align="right"><sub>302,648k</sub></td>
<td align="right"><sub>p=0.689 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.00s (± 0.45%)</sub></td>
<td align="right"><sub>1.99s (± 0.53%)</sub></td>
<td align="right"><sub>-0.01s (- 0.75%)</sub></td>
<td align="right"><sub>1.97s</sub></td>
<td align="right"><sub>2.00s</sub></td>
<td align="right"><sub>p=0.039 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>1.00s (± 0.63%)</sub></td>
<td align="right"><sub>1.01s (± 0.40%)</sub></td>
<td align="right"><sub>+0.01s (+ 0.83%)</sub></td>
<td align="right"><sub>1.00s</sub></td>
<td align="right"><sub>1.01s</sub></td>
<td align="right"><sub>p=0.033 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>6.26s (± 0.36%)</sub></td>
<td align="right"><sub>6.27s (± 0.58%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>6.21s</sub></td>
<td align="right"><sub>6.32s</sub></td>
<td align="right"><sub>p=0.568 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>3.59s (± 0.34%)</sub></td>
<td align="right"><sub>3.58s (± 0.62%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>3.56s</sub></td>
<td align="right"><sub>3.62s</sub></td>
<td align="right"><sub>p=0.120 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>12.85s (± 0.28%)</sub></td>
<td align="right"><sub>12.84s (± 0.40%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>12.77s</sub></td>
<td align="right"><sub>12.93s</sub></td>
<td align="right"><sub>p=0.573 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>material-ui - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>470,536k (± 0.01%)</sub></td>
<td align="right"><sub>470,522k (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>470,507k</sub></td>
<td align="right"><sub>470,536k</sub></td>
<td align="right"><sub>p=0.378 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>2.57s (± 0.53%)</sub></td>
<td align="right"><sub>2.57s (± 0.68%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.54s</sub></td>
<td align="right"><sub>2.59s</sub></td>
<td align="right"><sub>p=0.933 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>0.99s (± 0.76%)</sub></td>
<td align="right"><sub>0.99s (± 1.23%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.98s</sub></td>
<td align="right"><sub>1.01s</sub></td>
<td align="right"><sub>p=0.235 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>16.64s (± 0.32%)</sub></td>
<td align="right"><sub>16.67s (± 0.37%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>16.59s</sub></td>
<td align="right"><sub>16.73s</sub></td>
<td align="right"><sub>p=0.514 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>0.00s (± 0.00%)</sub></td>
<td align="right"><sub>0.00s (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.00s</sub></td>
<td align="right"><sub>0.00s</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>20.21s (± 0.27%)</sub></td>
<td align="right"><sub>20.23s (± 0.38%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>20.15s</sub></td>
<td align="right"><sub>20.32s</sub></td>
<td align="right"><sub>p=0.688 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>xstate - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Memory used</sub></td>
<td align="right"><sub>512,621k (± 0.01%)</sub></td>
<td align="right"><sub>512,657k (± 0.01%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>512,594k</sub></td>
<td align="right"><sub>512,754k</sub></td>
<td align="right"><sub>p=0.521 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Parse Time</sub></td>
<td align="right"><sub>3.27s (± 0.26%)</sub></td>
<td align="right"><sub>3.27s (± 0.23%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>3.26s</sub></td>
<td align="right"><sub>3.28s</sub></td>
<td align="right"><sub>p=0.209 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Bind Time</sub></td>
<td align="right"><sub>1.55s (± 0.33%)</sub></td>
<td align="right"><sub>1.54s (± 0.33%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1.54s</sub></td>
<td align="right"><sub>1.55s</sub></td>
<td align="right"><sub>p=0.311 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Check Time</sub></td>
<td align="right"><sub>2.84s (± 0.75%)</sub></td>
<td align="right"><sub>2.84s (± 0.79%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2.82s</sub></td>
<td align="right"><sub>2.87s</sub></td>
<td align="right"><sub>p=0.567 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Emit Time</sub></td>
<td align="right"><sub>0.08s (± 0.00%)</sub></td>
<td align="right"><sub>0.08s (± 4.99%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>0.08s</sub></td>
<td align="right"><sub>0.09s</sub></td>
<td align="right"><sub>p=0.405 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Total Time</sub></td>
<td align="right"><sub>7.73s (± 0.35%)</sub></td>
<td align="right"><sub>7.73s (± 0.32%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>7.71s</sub></td>
<td align="right"><sub>7.77s</sub></td>
<td align="right"><sub>p=0.935 n=6</sub></td>
</tr>
</tbody>
</table>
<div dir="auto">
<b>System info unknown</b>
</div>
<div dir="auto">
<b>Hosts</b>
<ul dir="auto">
<li>node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<b>Scenarios</b>
<ul dir="auto">
<li>Angular - node (v18.15.0, x64)</li>
<li>Compiler-Unions - node (v18.15.0, x64)</li>
<li>Monaco - node (v18.15.0, x64)</li>
<li>TFS - node (v18.15.0, x64)</li>
<li>material-ui - node (v18.15.0, x64)</li>
<li>xstate - node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<table cellspacing="0" cellpadding="0" border="0" role="table">
<tbody><tr>
<th align="left"><sub>Benchmark</sub></th>
<th align="left"><sub>Name</sub></th>
<th align="left"><sub>Iterations</sub></th>
</tr>
<tr>
<td><sub>Current</sub></td>
<td><sub>pr</sub></td>
<td><sub>6</sub></td>
</tr>
<tr>
<td><sub>Baseline</sub></td>
<td><sub>baseline</sub></td>
<td><sub>6</sub></td>
</tr>
</tbody></table>
</div>
<h2 dir="auto">tsserver</h2>
<b>Comparison Report - baseline..pr</b>
<table border="0" cellpadding="0" cellspacing="0" role="table">
<thead>
<tr>
<th align="left"><sub>Metric</sub></th>
<th align="right"><sub>baseline</sub></th>
<th align="right"><sub>pr</sub></th>
<th align="right"><sub>Delta</sub></th>
<th align="right"><sub>Best</sub></th>
<th align="right"><sub>Worst</sub></th>
<th align="right"><sub>p-value</sub></th>
</tr>
</thead>
<tbody><tr><th align="left" colspan="7"><sub>Compiler-UnionsTSServer - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Req 1 - updateOpen</sub></td>
<td align="right"><sub>2,364ms (± 0.58%)</sub></td>
<td align="right"><sub>2,391ms (± 0.83%)</sub></td>
<td align="right"><sub>+27ms (+ 1.16%)</sub></td>
<td align="right"><sub>2,355ms</sub></td>
<td align="right"><sub>2,411ms</sub></td>
<td align="right"><sub>p=0.037 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 2 - geterr</sub></td>
<td align="right"><sub>5,462ms (± 0.34%)</sub></td>
<td align="right"><sub>5,334ms (± 0.80%)</sub></td>
<td align="right"><sub>-128ms (- 2.35%)</sub></td>
<td align="right"><sub>5,302ms</sub></td>
<td align="right"><sub>5,418ms</sub></td>
<td align="right"><sub>p=0.005 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 3 - references</sub></td>
<td align="right"><sub>328ms (± 0.37%)</sub></td>
<td align="right"><sub>327ms (± 0.85%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>324ms</sub></td>
<td align="right"><sub>331ms</sub></td>
<td align="right"><sub>p=0.683 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 4 - navto</sub></td>
<td align="right"><sub>273ms (± 0.19%)</sub></td>
<td align="right"><sub>279ms (± 0.81%)</sub></td>
<td align="right"><sub>+5ms (+ 1.89%)</sub></td>
<td align="right"><sub>274ms</sub></td>
<td align="right"><sub>280ms</sub></td>
<td align="right"><sub>p=0.006 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo count</sub></td>
<td align="right"><sub>1,356 (± 0.00%)</sub></td>
<td align="right"><sub>1,356 (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1,356</sub></td>
<td align="right"><sub>1,356</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo</sub></td>
<td align="right"><sub>92ms (± 0.00%)</sub></td>
<td align="right"><sub>81ms (± 6.60%)</sub></td>
<td align="right"><sub>🟩-12ms (-12.50%)</sub></td>
<td align="right"><sub>75ms</sub></td>
<td align="right"><sub>90ms</sub></td>
<td align="right"><sub>p=0.003 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>CompilerTSServer - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Req 1 - updateOpen</sub></td>
<td align="right"><sub>2,502ms (± 0.94%)</sub></td>
<td align="right"><sub>2,498ms (± 1.32%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2,439ms</sub></td>
<td align="right"><sub>2,531ms</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 2 - geterr</sub></td>
<td align="right"><sub>4,038ms (± 0.38%)</sub></td>
<td align="right"><sub>4,103ms (± 1.98%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>4,025ms</sub></td>
<td align="right"><sub>4,194ms</sub></td>
<td align="right"><sub>p=0.467 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 3 - references</sub></td>
<td align="right"><sub>383ms (± 6.23%)</sub></td>
<td align="right"><sub>340ms (± 1.68%)</sub></td>
<td align="right"><sub>🟩-43ms (-11.24%)</sub></td>
<td align="right"><sub>333ms</sub></td>
<td align="right"><sub>345ms</sub></td>
<td align="right"><sub>p=0.044 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 4 - navto</sub></td>
<td align="right"><sub>287ms (± 3.05%)</sub></td>
<td align="right"><sub>282ms (± 0.29%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>281ms</sub></td>
<td align="right"><sub>283ms</sub></td>
<td align="right"><sub>p=0.373 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo count</sub></td>
<td align="right"><sub>1,518 (± 0.00%)</sub></td>
<td align="right"><sub>1,518 (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1,518</sub></td>
<td align="right"><sub>1,518</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo</sub></td>
<td align="right"><sub>75ms (± 0.69%)</sub></td>
<td align="right"><sub>83ms (± 7.73%)</sub></td>
<td align="right"><sub>🔻+9ms (+11.38%)</sub></td>
<td align="right"><sub>76ms</sub></td>
<td align="right"><sub>89ms</sub></td>
<td align="right"><sub>p=0.004 n=6</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>xstateTSServer - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Req 1 - updateOpen</sub></td>
<td align="right"><sub>2,628ms (± 0.97%)</sub></td>
<td align="right"><sub>2,588ms (± 0.65%)</sub></td>
<td align="right"><sub>-39ms (- 1.50%)</sub></td>
<td align="right"><sub>2,567ms</sub></td>
<td align="right"><sub>2,607ms</sub></td>
<td align="right"><sub>p=0.013 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 2 - geterr</sub></td>
<td align="right"><sub>1,740ms (± 0.49%)</sub></td>
<td align="right"><sub>1,716ms (± 2.17%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>1,671ms</sub></td>
<td align="right"><sub>1,760ms</sub></td>
<td align="right"><sub>p=0.520 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 3 - references</sub></td>
<td align="right"><sub>112ms (± 7.27%)</sub></td>
<td align="right"><sub>119ms (± 4.02%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>111ms</sub></td>
<td align="right"><sub>125ms</sub></td>
<td align="right"><sub>p=0.123 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 4 - navto</sub></td>
<td align="right"><sub>365ms (± 0.41%)</sub></td>
<td align="right"><sub>367ms (± 1.27%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>363ms</sub></td>
<td align="right"><sub>376ms</sub></td>
<td align="right"><sub>p=0.437 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo count</sub></td>
<td align="right"><sub>2,073 (± 0.00%)</sub></td>
<td align="right"><sub>2,073 (± 0.00%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>2,073</sub></td>
<td align="right"><sub>2,073</sub></td>
<td align="right"><sub>p=1.000 n=6</sub></td>
</tr>
<tr>
<td align="left"><sub>Req 5 - completionInfo</sub></td>
<td align="right"><sub>314ms (± 1.75%)</sub></td>
<td align="right"><sub>307ms (± 2.39%)</sub></td>
<td align="right"><sub>~</sub></td>
<td align="right"><sub>299ms</sub></td>
<td align="right"><sub>318ms</sub></td>
<td align="right"><sub>p=0.149 n=6</sub></td>
</tr>
</tbody>
</table>
<div dir="auto">
<b>System info unknown</b>
</div>
<div dir="auto">
<b>Hosts</b>
<ul dir="auto">
<li>node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<b>Scenarios</b>
<ul dir="auto">
<li>CompilerTSServer - node (v18.15.0, x64)</li>
<li>Compiler-UnionsTSServer - node (v18.15.0, x64)</li>
<li>xstateTSServer - node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<table cellspacing="0" cellpadding="0" border="0" role="table">
<tbody><tr>
<th align="left"><sub>Benchmark</sub></th>
<th align="left"><sub>Name</sub></th>
<th align="left"><sub>Iterations</sub></th>
</tr>
<tr>
<td><sub>Current</sub></td>
<td><sub>pr</sub></td>
<td><sub>6</sub></td>
</tr>
<tr>
<td><sub>Baseline</sub></td>
<td><sub>baseline</sub></td>
<td><sub>6</sub></td>
</tr>
</tbody></table>
</div>
<h2 dir="auto">Startup</h2>
<b>Comparison Report - baseline..pr</b>
<table border="0" cellpadding="0" cellspacing="0" role="table">
<thead>
<tr>
<th align="left"><sub>Metric</sub></th>
<th align="right"><sub>baseline</sub></th>
<th align="right"><sub>pr</sub></th>
<th align="right"><sub>Delta</sub></th>
<th align="right"><sub>Best</sub></th>
<th align="right"><sub>Worst</sub></th>
<th align="right"><sub>p-value</sub></th>
</tr>
</thead>
<tbody><tr><th align="left" colspan="7"><sub>tsc-startup - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Execution time</sub></td>
<td align="right"><sub>152.11ms (± 0.17%)</sub></td>
<td align="right"><sub>152.05ms (± 0.19%)</sub></td>
<td align="right"><sub>-0.06ms (- 0.04%)</sub></td>
<td align="right"><sub>150.97ms</sub></td>
<td align="right"><sub>154.51ms</sub></td>
<td align="right"><sub>p=0.009 n=600</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>tsserver-startup - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Execution time</sub></td>
<td align="right"><sub>258.64ms (± 0.13%)</sub></td>
<td align="right"><sub>227.19ms (± 0.14%)</sub></td>
<td align="right"><sub>🟩-31.45ms (-12.16%)</sub></td>
<td align="right"><sub>225.93ms</sub></td>
<td align="right"><sub>230.62ms</sub></td>
<td align="right"><sub>p=0.000 n=600</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>tsserverlibrary-startup - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Execution time</sub></td>
<td align="right"><sub>239.40ms (± 0.14%)</sub></td>
<td align="right"><sub>228.63ms (± 0.17%)</sub></td>
<td align="right"><sub>🟩-10.77ms (- 4.50%)</sub></td>
<td align="right"><sub>227.04ms</sub></td>
<td align="right"><sub>234.50ms</sub></td>
<td align="right"><sub>p=0.000 n=600</sub></td>
</tr>
</tbody>
<tbody><tr><th align="left" colspan="7"><sub>typescript-startup - node (v18.15.0, x64)</sub></th></tr>
</tbody><tbody>
<tr>
<td align="left"><sub>Execution time</sub></td>
<td align="right"><sub>238.72ms (± 0.16%)</sub></td>
<td align="right"><sub>228.61ms (± 0.16%)</sub></td>
<td align="right"><sub>🟩-10.10ms (- 4.23%)</sub></td>
<td align="right"><sub>227.17ms</sub></td>
<td align="right"><sub>232.54ms</sub></td>
<td align="right"><sub>p=0.000 n=600</sub></td>
</tr>
</tbody>
</table>
<div dir="auto">
<b>System info unknown</b>
</div>
<div dir="auto">
<b>Hosts</b>
<ul dir="auto">
<li>node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<b>Scenarios</b>
<ul dir="auto">
<li>tsc-startup - node (v18.15.0, x64)</li>
<li>tsserver-startup - node (v18.15.0, x64)</li>
<li>tsserverlibrary-startup - node (v18.15.0, x64)</li>
<li>typescript-startup - node (v18.15.0, x64)</li>
</ul>
</div>
<div dir="auto">
<table cellspacing="0" cellpadding="0" border="0" role="table">
<tbody><tr>
<th align="left"><sub>Benchmark</sub></th>
<th align="left"><sub>Name</sub></th>
<th align="left"><sub>Iterations</sub></th>
</tr>
<tr>
<td><sub>Current</sub></td>
<td><sub>pr</sub></td>
<td><sub>6</sub></td>
</tr>
<tr>
<td><sub>Baseline</sub></td>
<td><sub>baseline</sub></td>
<td><sub>6</sub></td>
</tr>
</tbody></table>
</div>
<p dir="auto"></p>
<details><summary>Developer Information:</summary><p dir="auto"><a href="https://typescript.visualstudio.com/TypeScript/_build/results?buildId=158380&amp;view=artifacts" rel="nofollow">Download Benchmarks</a></p></details>
</details></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/evanw.png?size=40"/>@evanw</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783646379"><span title="10/27/2023 6:02:26 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a> I believe I know why this happens. Here is a demonstration:</p>
<ul dir="auto">
<li><a href="https://esbuild.github.io/try/#YgAwLjE5LjUALS1idW5kbGUgLS1wbGF0Zm9ybT1ub2RlAABwYWNrYWdlLmpzb24AewogICJ0eXBlIjogImNvbW1vbmpzIgp9AGUAc3JjL3Rzc2VydmVyL3NlcnZlci50cwBleHBvcnQgKiBmcm9tICIuL19uYW1lc3BhY2VzL3RzIjsAAHNyYy90c3NlcnZlci9fbmFtZXNwYWNlcy90cy50cwBleHBvcnQgKiBmcm9tICIuLi8uLi9zZXJ2ZXIvX25hbWVzcGFjZXMvdHMiOwAAc3JjL3NlcnZlci9fbmFtZXNwYWNlcy90cy50cwBleHBvcnQgKiBmcm9tICIuLi8uLi9kZXByZWNhdGVkQ29tcGF0L19uYW1lc3BhY2VzL3RzIjsAAHNyYy9kZXByZWNhdGVkQ29tcGF0L19uYW1lc3BhY2VzL3RzLnRzAGV4cG9ydCAqIGZyb20gIi4uLzUuMC9pZGVudGlmaWVyUHJvcGVydGllcyI7AABzcmMvZGVwcmVjYXRlZENvbXBhdC81LjAvaWRlbnRpZmllclByb3BlcnRpZXMudHMAZGVjbGFyZSBtb2R1bGUgIi4uLy4uL2NvbXBpbGVyL3R5cGVzIiB7fQ" rel="nofollow">With <code class="notranslate">type: commonjs</code></a></li>
<li><a href="https://esbuild.github.io/try/#YgAwLjE5LjUALS1idW5kbGUgLS1wbGF0Zm9ybT1ub2RlAABwYWNrYWdlLmpzb24Aewp9AGUAc3JjL3Rzc2VydmVyL3NlcnZlci50cwBleHBvcnQgKiBmcm9tICIuL19uYW1lc3BhY2VzL3RzIjsAAHNyYy90c3NlcnZlci9fbmFtZXNwYWNlcy90cy50cwBleHBvcnQgKiBmcm9tICIuLi8uLi9zZXJ2ZXIvX25hbWVzcGFjZXMvdHMiOwAAc3JjL3NlcnZlci9fbmFtZXNwYWNlcy90cy50cwBleHBvcnQgKiBmcm9tICIuLi8uLi9kZXByZWNhdGVkQ29tcGF0L19uYW1lc3BhY2VzL3RzIjsAAHNyYy9kZXByZWNhdGVkQ29tcGF0L19uYW1lc3BhY2VzL3RzLnRzAGV4cG9ydCAqIGZyb20gIi4uLzUuMC9pZGVudGlmaWVyUHJvcGVydGllcyI7AABzcmMvZGVwcmVjYXRlZENvbXBhdC81LjAvaWRlbnRpZmllclByb3BlcnRpZXMudHMAZGVjbGFyZSBtb2R1bGUgIi4uLy4uL2NvbXBpbGVyL3R5cGVzIiB7fQ" rel="nofollow">Without <code class="notranslate">type: commonjs</code></a></li>
</ul>
<p dir="auto">When esbuild sees a file without any exports, it attempts to guess what type of module it is. That logic lives <a href="https://github.com/evanw/esbuild/blob/4e11b50fe3178ed0a78c077df78788d66304d379/internal/js_parser/js_parser.go#L17641-L17660">here</a>:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// If this module has no exports, try to determine what kind of module it
// is by looking at node's &quot;type&quot; field in &quot;package.json&quot; and/or whether
// the file extension is &quot;.mjs&quot;/&quot;.mts&quot; or &quot;.cjs&quot;/&quot;.cts&quot;.
switch {
case p.options.moduleTypeData.Type.IsCommonJS():
  // &quot;.cjs&quot; or &quot;.cts&quot; or (&quot;type: commonjs&quot; and (&quot;.js&quot; or &quot;.jsx&quot; or &quot;.ts&quot; or &quot;.tsx&quot;))
  exportsKind = js_ast.ExportsCommonJS

case p.options.moduleTypeData.Type.IsESM():
  // &quot;.mjs&quot; or &quot;.mts&quot; or (&quot;type: module&quot; and (&quot;.js&quot; or &quot;.jsx&quot; or &quot;.ts&quot; or &quot;.tsx&quot;))
  exportsKind = js_ast.ExportsESM

default:
  // Treat unknown modules containing an import statement as ESM. Otherwise
  // the bundler will treat this file as CommonJS if it's imported and ESM
  // if it's not imported.
  if p.esmImportStatementKeyword.Len &gt; 0 {
    exportsKind = js_ast.ExportsESM
  }
}"><pre class="notranslate"><span class="pl-c">// If this module has no exports, try to determine what kind of module it</span>
<span class="pl-c">// is by looking at node's "type" field in "package.json" and/or whether</span>
<span class="pl-c">// the file extension is ".mjs"/".mts" or ".cjs"/".cts".</span>
<span class="pl-k">switch</span> {
<span class="pl-k">case</span> <span class="pl-s1">p</span>.<span class="pl-c1">options</span>.<span class="pl-c1">moduleTypeData</span>.<span class="pl-c1">Type</span>.<span class="pl-en">IsCommonJS</span>():
  <span class="pl-c">// ".cjs" or ".cts" or ("type: commonjs" and (".js" or ".jsx" or ".ts" or ".tsx"))</span>
  <span class="pl-s1">exportsKind</span> <span class="pl-c1">=</span> <span class="pl-s1">js_ast</span>.<span class="pl-c1">ExportsCommonJS</span>

<span class="pl-k">case</span> <span class="pl-s1">p</span>.<span class="pl-c1">options</span>.<span class="pl-c1">moduleTypeData</span>.<span class="pl-c1">Type</span>.<span class="pl-en">IsESM</span>():
  <span class="pl-c">// ".mjs" or ".mts" or ("type: module" and (".js" or ".jsx" or ".ts" or ".tsx"))</span>
  <span class="pl-s1">exportsKind</span> <span class="pl-c1">=</span> <span class="pl-s1">js_ast</span>.<span class="pl-c1">ExportsESM</span>

<span class="pl-k">default</span>:
  <span class="pl-c">// Treat unknown modules containing an import statement as ESM. Otherwise</span>
  <span class="pl-c">// the bundler will treat this file as CommonJS if it's imported and ESM</span>
  <span class="pl-c">// if it's not imported.</span>
  <span class="pl-k">if</span> <span class="pl-s1">p</span>.<span class="pl-c1">esmImportStatementKeyword</span>.<span class="pl-c1">Len</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> {
    <span class="pl-s1">exportsKind</span> <span class="pl-c1">=</span> <span class="pl-s1">js_ast</span>.<span class="pl-c1">ExportsESM</span>
  }
}</pre></div>
<p dir="auto">The file <code class="notranslate">src/deprecatedCompat/5.0/identifierProperties.ts</code> has no exports (there may be others too, but I haven't checked). In that case the file is considered to be a CommonJS module if <code class="notranslate">type: commonjs</code> is present in <code class="notranslate">package.json</code>, which means that imports of that file use <code class="notranslate">require()</code>, which means that re-exports of that file use dynamic re-exports via a property-copying loop instead of static re-exports via inheriting the re-exported properties at compile time, which results in a bigger bundle size.</p>
<p dir="auto">If <code class="notranslate">type</code> is absent then esbuild guesses that the file should be considered ESM if there is an <code class="notranslate">import</code> statement, which there is in <code class="notranslate">src/deprecatedCompat/5.0/identifierProperties.ts</code>. It's true that node would default to CommonJS in this case, but esbuild can't really do that because esbuild is a bundler and bundling code that people would consider to be ESM as CommonJS instead by default can result in much worse code, which is a non-starter. So esbuild only does that if you explicitly say that files without <code class="notranslate">.m*</code> or <code class="notranslate">.c*</code> extensions should be CommonJS.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783687017"><span title="10/27/2023 8:50:33 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">I see, so to recap for my own understanding, for files without exports, setting <code class="notranslate">type=commonjs</code> forced us into the first case, rather than falling back to the default. I'm honestly surprised that just having an import statement wouldn't be enough to force it into ESM (for "maximum good codegen"), but I know this stuff is fickle. In our case, we kinda do want it to treat everything as ESM; with the way our build works, we actually <code class="notranslate">--define</code> away <code class="notranslate">require</code> entirely and replace it post-build, making the entire bundle entirely ESM internally (source wise), only calling <code class="notranslate">require</code> on Node. Probably we're unique in that we don't have external deps whatsoever.</p>
<p dir="auto">It seems like adding <code class="notranslate">export {}</code> to the end of these files fixes the problem (at least in the playground). So maybe that is the fix or leads to one.</p>
<p dir="auto">For now I'm going to just revert the change and swing back later to figure out something that will allow us to set this and also not regress the code size. I really assumed this change would be benign, so I'd rather go back to the status quo given today's the release cutoff. (Good thing I looked at packagephobia while building my perf review...)</p>
<p dir="auto">Thanks for the help, I appreciate it!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> closed <span class="timestamp"><span title="10/27/2023 8:50:39 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Jack-Works.png?size=40"/>@Jack-Works</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783700180"><span title="10/27/2023 9:47:54 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">can you rename it to <code class="notranslate">.mts</code> to force esbuild treat it as esm?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56237#issuecomment-1783769529"><span title="10/28/2023 3:16:14 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">No, that would totally break our <code class="notranslate">--no-bundle</code> build. Using non-ts extensions is its own can of worms.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/27465"><span class="CLOSED">⊚</span> <span class="number-ref">#27465</span></a> Feature Request: Declared constructor return types</h1><span class="label" style="background-color:#f7c6c7;color:black;">Duplicate</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/conartist6.png?size=40"/>@conartist6</span> <a href="https://github.com/microsoft/TypeScript/issues/27465#issuecomment-447106536"><span title="12/13/2018 12:17:45 PM">on 12/13/2018</span></a></span><div class="comment-body"><p dir="auto">Also may I suggest that if the bot is going to have a 24 hour period in which no activity will result in closure, it should announce that period on the thread to give the issue author a chance to do/say something.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zareismail.png?size=40"/>@zareismail</span> <a href="https://github.com/microsoft/TypeScript/issues/27465#issuecomment-1783768779"><span title="10/28/2023 3:12:34 AM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Another example is here. Builder design pattern implemented by Proxy</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import camelcase from 'camelcase';

abstract class ProxyToGate {
  constructor() {
    return new Proxy(this, {
      get: function (parent, property, receiver): any {
        // handle exists method
        if (property in parent) {
          return parent[property as keyof typeof parent];
        }
        // handle unhandled promises
        if (property === 'then') {
          return new Promise((resolve) =&gt; {
            resolve(parent);
          });
        }
        // handle unhandled methods
        if (typeof parent.__call === 'function') {
          return parent.__call(property);
        }

        throw new Error('The &quot;__call&quot; method not implemented.');
      },
    });
  }

  /**
   * Proxy unhandled method and properties.
   *
   * @param {string | symbol} property
   * @returns {Function: any}
   */
  protected abstract __call(property: string | symbol): () =&gt; any;
}

interface Cache {
  set: () =&gt; void;
}

class Redis implements Cache {
  set() {
    console.log(this, '--------------', arguments);
  }
}

export default abstract class Manager&lt;T, D extends T = T&gt; extends ProxyToGate {
  protected drivers: { [key: string]: T } = {};

  /**
   * Get the driver instance.
   */
  driver&lt;D extends T = T&gt;(driver?: string): D {
    return this.resolveDriver&lt;D&gt;(driver ?? this.getDefaultDriver());
  }

  /**
   * Get name of the default driver.
   */
  abstract getDefaultDriver(): string;

  /**
   * Resolve the driver instance.
   */
  protected resolveDriver&lt;D extends T = T&gt;(driver: string): D {
    // cache driver if not initiated yet
    if (this.drivers[driver] === undefined) {
      this.drivers[driver] = this.createDriver(driver);
    }
    return this.drivers[driver] as unknown as D;
  }

  /**
   * Create new driver instance
   */
  protected createDriver(driver: string): T {
    const callback = this.driverCallback(driver) as keyof this;

    if (typeof this[callback] !== 'function') {
      throw new Error(`Creator method not found for driver '${driver}'.`);
    }
    return (this[callback] as Function)();
  }

  /**
   * Guess driver callback.
   */
  protected driverCallback(driver: string): string {
    return `create${camelcase(driver, { pascalCase: true })}Driver`;
  }

  /**
   * Proxy unhandled method and properties.
   */
  protected __call(property: string | symbol): () =&gt; any {
    return (...args) =&gt; {
      const driver: D = this.driver();
      const unhandled = driver[property as keyof D];

      return typeof unhandled === 'function'
        ? unhandled.apply(driver, args)
        : unhandled;
    };
  }
}

class CacheManager extends Manager&lt;Cache, Redis&gt; {
  /**
   * Get name of the default driver.
   */
  getDefaultDriver(): string {
    return 'redis';
  }

  createRedisDriver() {
    return new Redis();
  }
}"><pre class="notranslate"><code class="notranslate">import camelcase from 'camelcase';

abstract class ProxyToGate {
  constructor() {
    return new Proxy(this, {
      get: function (parent, property, receiver): any {
        // handle exists method
        if (property in parent) {
          return parent[property as keyof typeof parent];
        }
        // handle unhandled promises
        if (property === 'then') {
          return new Promise((resolve) =&gt; {
            resolve(parent);
          });
        }
        // handle unhandled methods
        if (typeof parent.__call === 'function') {
          return parent.__call(property);
        }

        throw new Error('The "__call" method not implemented.');
      },
    });
  }

  /**
   * Proxy unhandled method and properties.
   *
   * @param {string | symbol} property
   * @returns {Function: any}
   */
  protected abstract __call(property: string | symbol): () =&gt; any;
}

interface Cache {
  set: () =&gt; void;
}

class Redis implements Cache {
  set() {
    console.log(this, '--------------', arguments);
  }
}

export default abstract class Manager&lt;T, D extends T = T&gt; extends ProxyToGate {
  protected drivers: { [key: string]: T } = {};

  /**
   * Get the driver instance.
   */
  driver&lt;D extends T = T&gt;(driver?: string): D {
    return this.resolveDriver&lt;D&gt;(driver ?? this.getDefaultDriver());
  }

  /**
   * Get name of the default driver.
   */
  abstract getDefaultDriver(): string;

  /**
   * Resolve the driver instance.
   */
  protected resolveDriver&lt;D extends T = T&gt;(driver: string): D {
    // cache driver if not initiated yet
    if (this.drivers[driver] === undefined) {
      this.drivers[driver] = this.createDriver(driver);
    }
    return this.drivers[driver] as unknown as D;
  }

  /**
   * Create new driver instance
   */
  protected createDriver(driver: string): T {
    const callback = this.driverCallback(driver) as keyof this;

    if (typeof this[callback] !== 'function') {
      throw new Error(`Creator method not found for driver '${driver}'.`);
    }
    return (this[callback] as Function)();
  }

  /**
   * Guess driver callback.
   */
  protected driverCallback(driver: string): string {
    return `create${camelcase(driver, { pascalCase: true })}Driver`;
  }

  /**
   * Proxy unhandled method and properties.
   */
  protected __call(property: string | symbol): () =&gt; any {
    return (...args) =&gt; {
      const driver: D = this.driver();
      const unhandled = driver[property as keyof D];

      return typeof unhandled === 'function'
        ? unhandled.apply(driver, args)
        : unhandled;
    };
  }
}

class CacheManager extends Manager&lt;Cache, Redis&gt; {
  /**
   * Get name of the default driver.
   */
  getDefaultDriver(): string {
    return 'redis';
  }

  createRedisDriver() {
    return new Redis();
  }
}
</code></pre></div>
<p dir="auto"><strong>here typescript doesn't detect callable method since proxified</strong></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="new CacheManager().set('a', 'b', 'c', 'd');"><pre class="notranslate"><code class="notranslate">new CacheManager().set('a', 'b', 'c', 'd');
</code></pre></div></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/50928"><span class="CLOSED">⊚</span> <span class="number-ref">#50928</span></a> StackOverflow during completion in TryGhost/Ghost</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><span class="label" style="background-color:#30F1AD;color:black;">Crawler-Detected</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/DanielRosenwasser.png?size=40"/>@DanielRosenwasser</span> milestoned <span class="timestamp"><span title="2/24/2023 4:54:27 PM">on 2/24/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 6:08:22 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/52642"><span class="MERGED">∏</span> <span class="number-ref">#52642</span></a> add pushTypeResolution to getTypeOfAlias</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> <a href="https://github.com/microsoft/TypeScript/pull/52642#issuecomment-1781979758"><span title="10/26/2023 3:31:22 PM">6 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/jakebailey/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jakebailey">@jakebailey</a> Here are the results of running the top-repos suite comparing <code class="notranslate">main</code> and <code class="notranslate">refs/pull/52642/merge</code>:</p>
<p dir="auto">Everything looks good!</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> <a href="https://github.com/microsoft/TypeScript/pull/52642#issuecomment-1783621690"><span title="10/27/2023 4:56:18 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> test top200<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> user test this<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> run dt<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/typescript-bot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/typescript-bot">@typescript-bot</a> perf test this</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 6:08:20 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/54035"><span class="CLOSED">⊚</span> <span class="number-ref">#54035</span></a> Extract type alias doesn't extract entire selected type</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="10/16/2023 1:17:03 PM">on 10/16/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 5:59:20 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56131"><span class="MERGED">∏</span> <span class="number-ref">#56131</span></a> fix54035, extractType now allows parts of union and intersection types to be extracted</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> <a href="https://github.com/microsoft/TypeScript/pull/56131#issuecomment-1776221119"><span title="10/23/2023 4:39:27 PM">on 10/23/2023</span></a></span><div class="comment-body"><p dir="auto">The most recent change only addresses the behavior discussed above, and doesn't require such a big change like I had originally expected.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 5:59:17 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/56235"><span class="OPEN">⊚</span> <span class="number-ref">#56235</span></a> Safe type assertion operator</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">2</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> added <span class="label" style="background-color:#556677;">Awaiting More Feedback</span> <span class="timestamp"><span title="10/27/2023 3:27:04 PM">5 days ago</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/bgenia.png?size=40"/>@bgenia</span> <a href="https://github.com/microsoft/TypeScript/issues/56235#issuecomment-1783575922"><span title="10/27/2023 3:27:28 PM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">This was discussed a bit at <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1140499239" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/47920" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/47920/hovercard" href="https://github.com/microsoft/TypeScript/issues/47920">#47920</a>. Your example is missing what I'd consider the most straightforward solution:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const f: () =&gt; Promise&lt;Foo&gt; = async () =&gt; ({ a: 1 })"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-en">f</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">Promise</span><span class="pl-kos">&lt;</span><span class="pl-smi">Foo</span><span class="pl-kos">&gt;</span> <span class="pl-c1">=</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">1</span> <span class="pl-kos">}</span><span class="pl-kos">)</span></pre></div>
</blockquote>
<p dir="auto">This has the same problem as my 1st example, you have to retype generics</p>
<p dir="auto">Here's a more complex example to show why it's inconvenient:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="type Foo&lt;T&gt; = { foo: T }
type Bar&lt;T&gt; = { bar: T }

declare function makeFoo&lt;T&gt;(value: T): Foo&lt;T&gt;
declare function makeBar&lt;T&gt;(value: T): Bar&lt;T&gt;

type Value = { value: number }

const f = async () =&gt; makeFoo(makeBar({ value: 1 }))"><pre class="notranslate"><span class="pl-k">type</span> <span class="pl-smi">Foo</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-smi">T</span> <span class="pl-kos">}</span>
<span class="pl-k">type</span> <span class="pl-smi">Bar</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">bar</span>: <span class="pl-smi">T</span> <span class="pl-kos">}</span>

<span class="pl-k">declare</span> <span class="pl-k">function</span> <span class="pl-s1">makeFoo</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">value</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span>: <span class="pl-smi">Foo</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span>
<span class="pl-k">declare</span> <span class="pl-k">function</span> <span class="pl-s1">makeBar</span><span class="pl-c1">&lt;</span><span class="pl-smi">T</span><span class="pl-c1">&gt;</span><span class="pl-kos">(</span><span class="pl-s1">value</span>: <span class="pl-smi">T</span><span class="pl-kos">)</span>: <span class="pl-smi">Bar</span><span class="pl-kos">&lt;</span><span class="pl-smi">T</span><span class="pl-kos">&gt;</span>

<span class="pl-k">type</span> <span class="pl-smi">Value</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">value</span>: <span class="pl-smi">number</span> <span class="pl-kos">}</span>

<span class="pl-k">const</span> <span class="pl-en">f</span> <span class="pl-c1">=</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-en">makeFoo</span><span class="pl-kos">(</span><span class="pl-en">makeBar</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">value</span>: <span class="pl-c1">1</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span></pre></div>
<p dir="auto">Now I have to type 3 generics:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const f: () =&gt; Promise&lt;Foo&lt;Bar&lt;Value&gt;&gt;&gt; = async () =&gt; makeFoo(makeBar({ value: 1 }))"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-en">f</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">Promise</span><span class="pl-kos">&lt;</span><span class="pl-smi">Foo</span><span class="pl-kos">&lt;</span><span class="pl-smi">Bar</span><span class="pl-kos">&lt;</span><span class="pl-smi">Value</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span><span class="pl-kos">&gt;</span> <span class="pl-c1">=</span> <span class="pl-k">async</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-en">makeFoo</span><span class="pl-kos">(</span><span class="pl-en">makeBar</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">value</span>: <span class="pl-c1">1</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/RyanCavanaugh.png?size=40"/>@RyanCavanaugh</span> <a href="https://github.com/microsoft/TypeScript/issues/56235#issuecomment-1783576966"><span title="10/27/2023 3:29:12 PM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">you have to retype generics</p>
</blockquote>
<p dir="auto">This only applies to <code class="notranslate">Promise</code>, though. In all other cases, you're writing the full type again.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/bgenia.png?size=40"/>@bgenia</span> <a href="https://github.com/microsoft/TypeScript/issues/56235#issuecomment-1783582827"><span title="10/27/2023 3:38:48 PM">5 days ago</span></a></span><div class="comment-body"><blockquote>
<blockquote>
<p dir="auto">you have to retype generics</p>
</blockquote>
<p dir="auto">This only applies to <code class="notranslate">Promise</code>, though. In all other cases, you're writing the full type again.</p>
</blockquote>
<p dir="auto">I used promises because it's the most obvious example, but you can have all kinds of functions that take your value and wrap it in different generics. I updated my example to demonstrate this.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Josh-Cena.png?size=40"/>@Josh-Cena</span> <a href="https://github.com/microsoft/TypeScript/issues/56235#issuecomment-1783638532"><span title="10/27/2023 5:36:03 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">The most painful thing this would remedy is cases such as <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="167984634" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/9998" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/9998/hovercard" href="https://github.com/microsoft/TypeScript/issues/9998">#9998</a>, which forces you to do <code class="notranslate">true as boolean</code>. I believe there are "best practices" these days that force you to do <code class="notranslate">x satisfies T as T</code>—based on feature requests we've closed in ts-eslint.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56190"><span class="MERGED">∏</span> <span class="number-ref">#56190</span></a> Explicitly declare type=commonjs in package.json</h1><span class="label" style="background-color:#3178C6;">Author: Team</span><span class="label" style="background-color:#ededed;color:black;">For Uncommitted Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> closed <span class="timestamp"><span title="10/24/2023 11:18:38 AM">on 10/24/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/jakebailey.png?size=40"/>@jakebailey</span> <a href="https://github.com/microsoft/TypeScript/pull/56190#issuecomment-1783617220"><span title="10/27/2023 4:44:56 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Apparently this change had an effect on esbuild's behavior, for the worse.</p>
<table role="table">
<thead>
<tr>
<th></th>
<th>Before</th>
<th>After</th>
<th>Diff</th>
<th>Diff (percent)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Packed</td>
<td>5.49 MiB</td>
<td>5.56 MiB</td>
<td>+71.00 KiB</td>
<td>+1.26%</td>
</tr>
<tr>
<td>Unpacked</td>
<td>30.49 MiB</td>
<td>31.03 MiB</td>
<td>+546.64 KiB</td>
<td>+1.75%</td>
</tr>
</tbody>
</table>
<table role="table">
<thead>
<tr>
<th></th>
<th>Before</th>
<th>After</th>
<th>Diff</th>
<th>Diff (percent)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">lib/tsc.js</code></td>
<td>5.55 MiB</td>
<td>5.55 MiB</td>
<td>+75.00 B</td>
<td>+0.00%</td>
</tr>
<tr>
<td><code class="notranslate">lib/tsserver.js</code></td>
<td>8.12 MiB</td>
<td>8.52 MiB</td>
<td>+407.05 KiB</td>
<td>+4.89%</td>
</tr>
<tr>
<td><code class="notranslate">lib/typescript.js</code></td>
<td>8.59 MiB</td>
<td>8.72 MiB</td>
<td>+139.49 KiB</td>
<td>+1.59%</td>
</tr>
<tr>
<td><code class="notranslate">package.json</code></td>
<td>3.44 KiB</td>
<td>3.46 KiB</td>
<td>+24.00 B</td>
<td>+0.68%</td>
</tr>
</tbody>
</table>
<p dir="auto">This wasn't intended at all. Will send a revert.</p></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/52080"><span class="OPEN">⊚</span> <span class="number-ref">#52080</span></a> React props in typescript are displayed in alphabetical order instead of showing component props at the top when running &quot;trigger suggest&quot;</h1><span class="label" style="background-color:#006b75;">Suggestion</span><span class="label" style="background-color:#006b75;">Domain: Completion Lists</span><span class="label" style="background-color:#556677;">Awaiting More Feedback</span><div class="reaction-bar"><span class="reaction-group"><span class="emoji">👍</span><span class="count">7</span></span></div><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/52080#issuecomment-1685320165"><span title="8/20/2023 9:05:37 AM">on 8/20/2023</span></a></span><div class="comment-body"><p dir="auto">Thank you for linking! However, I see some interesting parts</p>
<blockquote>
<p dir="auto">So, as far as I know, at the time of this writing, there is no mechanism for a user to configure certain suggestions to have a higher priority.</p>
</blockquote>
<p dir="auto">Actually, I've thought about adding <code class="notranslate">sort</code> jsdoc support but specifying the sorting manually every time would be annoying, instead, you can move the property to the top in the interface and <strong>use the <a href="https://marketplace.visualstudio.com/items?itemName=zardoy.ts-essential-plugins" rel="nofollow">aforementioned extension</a></strong> with the following setting: <code class="notranslate">"tsEssentialPlugins.fixSuggestionsSorting": true,</code></p>
<p dir="auto">So with the component from the StackOverflow question, you should see the property <code class="notranslate">tag</code> displayed on top.</p>
<p dir="auto">And also I do not recommend using <code class="notranslate">editor.suggest.localityBonus</code> see <a href="https://github.com/zardoy/typescript-vscode-plugins/issues/143#issuecomment-1629747556" data-hovercard-type="issue" data-hovercard-url="/zardoy/typescript-vscode-plugins/issues/143/hovercard">this issue for more</a>. The same thing applies for <code class="notranslate">editor.suggestSelection: recentlyUsed</code> as well.</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/gbrocha.png?size=40"/>@gbrocha</span> <a href="https://github.com/microsoft/TypeScript/issues/52080#issuecomment-1783613071"><span title="10/27/2023 4:35:11 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">Is there some update here? I think it's a common issue</p></div><div class="reaction-bar"><span class="reaction-group"><span class="emoji">😕</span><span class="count">1</span></span></div></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/55939"><span class="CLOSED">⊚</span> <span class="number-ref">#55939</span></a> JS Doc comment not shown in signature help when `overload` tag exists</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#bfe5bf;color:black;">Fix Available</span> <span class="timestamp"><span title="10/17/2023 1:12:30 PM">on 10/17/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 3:24:09 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/56139"><span class="MERGED">∏</span> <span class="number-ref">#56139</span></a> fix(55939): JS Doc comment not shown in signature help when overload tag exists</h1><span class="label" style="background-color:#001f77;">For Milestone Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/typescript-bot.png?size=40"/>@typescript-bot</span> added <span class="label" style="background-color:#001f77;">For Milestone Bug</span> <span class="timestamp"><span title="10/17/2023 1:12:29 PM">on 10/17/2023</span></span></span></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/iisaduan.png?size=40"/>@iisaduan</span> closed <span class="timestamp"><span title="10/27/2023 3:24:08 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/pull/55887"><span class="OPEN">∏</span> <span class="number-ref">#55887</span></a> error on variables that are used but never initialized</h1><span class="label" style="background-color:#9ff4ed;color:black;">For Backlog Bug</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/Zzzen.png?size=40"/>@Zzzen</span> <a href="https://github.com/microsoft/TypeScript/pull/55887#issuecomment-1740901141"><span title="9/29/2023 6:30:04 AM">on 9/29/2023</span></a></span><div class="comment-body"><blockquote>
<p dir="auto">I'm a little bit concerned that we aren't guarding previous accesses of isAssigned in some way - but it looks like the binder didn't need to be changed at all. Were accesses of isAssigned already guarded by something like symbol.flags &amp; SymbolFlags.Parameter?</p>
</blockquote>
<p dir="auto">After conducting some research, it appears that the <code class="notranslate">isAssigned</code> flag is not referenced in the binder. Moreover, all the reads have been appropriately guarded, as demonstrated in the examples below:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="parent.kind === SyntaxKind.Parameter &amp;&amp; isSymbolAssigned(symbol)

isParameter &amp;&amp; !isSymbolAssigned(localOrExportSymbol)

isParameterOrCatchClauseVariable(symbol) &amp;&amp; !isSymbolAssigned(symbol)"><pre class="notranslate"><span class="pl-s1">parent</span><span class="pl-kos">.</span><span class="pl-c1">kind</span> <span class="pl-c1">===</span> <span class="pl-smi">SyntaxKind</span><span class="pl-kos">.</span><span class="pl-c1">Parameter</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-en">isSymbolAssigned</span><span class="pl-kos">(</span><span class="pl-s1">symbol</span><span class="pl-kos">)</span>

<span class="pl-s1">isParameter</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-c1">!</span><span class="pl-en">isSymbolAssigned</span><span class="pl-kos">(</span><span class="pl-s1">localOrExportSymbol</span><span class="pl-kos">)</span>

<span class="pl-en">isParameterOrCatchClauseVariable</span><span class="pl-kos">(</span><span class="pl-s1">symbol</span><span class="pl-kos">)</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-c1">!</span><span class="pl-en">isSymbolAssigned</span><span class="pl-kos">(</span><span class="pl-s1">symbol</span><span class="pl-kos">)</span></pre></div></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/sandersn.png?size=40"/>@sandersn</span> assigned <span class="timestamp"><span title="10/27/2023 3:19:19 PM">5 days ago</span></span></span></div></div></div><div class="issue"><h1><a href="https://github.com/microsoft/TypeScript/issues/41751"><span class="OPEN">⊚</span> <span class="number-ref">#41751</span></a> &quot;Extract to function&quot;: rename doesn't always works</h1><span class="label" style="background-color:#e11d21;">Bug</span><span class="label" style="background-color:#5319e7;">Domain: Refactorings</span><div class="events"><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/OliverJAsh.png?size=40"/>@OliverJAsh</span> <a href="https://github.com/microsoft/TypeScript/issues/41751#issuecomment-846263343"><span title="5/21/2021 2:14:33 PM">on 5/21/2021</span></a></span><div class="comment-body"><p dir="auto">I've just tried to write a failing Fourslash test for this but I haven't had any success. However I can still reproduce in VS Code, with no extensions and the latest TS version.</p>
<p dir="auto">One thing I noticed: it only reproduces when the file has a new line at the very end, e.g. this doesn't reproduce:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/921609/119198778-d1e62300-ba81-11eb-84f5-afeadd4fb7a5.png"><img src="https://user-images.githubusercontent.com/921609/119198778-d1e62300-ba81-11eb-84f5-afeadd4fb7a5.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">but this does:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/921609/119198750-c2ff7080-ba81-11eb-9856-345a224e24a3.png"><img src="https://user-images.githubusercontent.com/921609/119198750-c2ff7080-ba81-11eb-9856-345a224e24a3.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">Notice line 6 is an empty new line.</p>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/a-tarasyuk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/a-tarasyuk">@a-tarasyuk</a> Are you able to reproduce when you have a new line at the end of the file?</p></div></div><div class="event"><span class="oneliner"><span class="author"><img src="https://github.com/zardoy.png?size=40"/>@zardoy</span> <a href="https://github.com/microsoft/TypeScript/issues/41751#issuecomment-1783559841"><span title="10/27/2023 3:04:57 PM">5 days ago</span></a></span><div class="comment-body"><p dir="auto">I want to help resolve this one.<br>
<a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/OliverJAsh/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/OliverJAsh">@OliverJAsh</a> do you think this might be related to <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1612298253" data-permission-text="Title is private" data-url="https://github.com/microsoft/TypeScript/issues/53120" data-hovercard-type="issue" data-hovercard-url="/microsoft/TypeScript/issues/53120/hovercard" href="https://github.com/microsoft/TypeScript/issues/53120">#53120</a> (incorrect offsets from refactorings on empty newline)? This is really vscode-specific, I think need to debug vscode extension instead.</p></div></div></div></div></div></body></html>